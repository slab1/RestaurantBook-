(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9424],{2898:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=(e,t)=>{let s=(0,a.forwardRef)(({color:s="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:l,children:d,...c},u)=>(0,a.createElement)("svg",{ref:u,...r,width:i,height:i,stroke:s,strokeWidth:l?24*Number(o)/Number(i):o,className:`lucide lucide-${n(e)}`,...c},[...t.map(([e,t])=>(0,a.createElement)(e,t)),...(Array.isArray(d)?d:[d])||[]]));return s.displayName=`${e}`,s}},998:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(2898);let r=(0,a.Z)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]])},2894:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(2898);let r=(0,a.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},1195:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(2898);let r=(0,a.Z)("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]])},8203:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(2898);let r=(0,a.Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},3008:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(2898);let r=(0,a.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1291:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(2898);let r=(0,a.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},7158:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(2898);let r=(0,a.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},6141:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(2898);let r=(0,a.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1298:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(2898);let r=(0,a.Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},5817:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(2898);let r=(0,a.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},9670:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(2898);let r=(0,a.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6637:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(2898);let r=(0,a.Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},2882:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(2898);let r=(0,a.Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},290:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(2898);let r=(0,a.Z)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},4280:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(2898);let r=(0,a.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},1827:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(2898);let r=(0,a.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},4522:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(2898);let r=(0,a.Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},5790:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(2898);let r=(0,a.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},5750:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(2898);let r=(0,a.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2104:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(2898);let r=(0,a.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},2549:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(2898);let r=(0,a.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6791:function(e,t,s){Promise.resolve().then(s.bind(s,7056))},7056:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return C}});var a=s(7437),r=s(2265),n=s(8203),i=s(3008),o=s(6141),l=s(2894),d=s(1298),c=s(4280),u=s(5750),m=s(4522),g=s(1195),x=s(5790),h=s(5817),p=s(1827),b=s(1291),y=s(7158),f=s(998),v=s(2898);let j=(0,v.Z)("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);var w=s(2104),N=s(290),k=s(9670),S=s(2882),I=s(6637),D=s(2549),A=s(798);class T{getData(){let e=localStorage.getItem(this.storageKey);if(!e){let e={bookings:this.getInitialBookings(),disputes:this.getInitialDisputes(),refunds:this.getInitialRefunds(),activities:this.getInitialActivities(),lastSync:new Date().toISOString()};return this.saveData(e),e}return JSON.parse(e)}saveData(e){localStorage.setItem(this.storageKey,JSON.stringify(e))}getInitialBookings(){let e=new Date,t=new Date(e);t.setDate(t.getDate()+1);let s=new Date(e);return s.setDate(s.getDate()-1),[{id:"b1",bookingNumber:"BK-2025-001234",restaurantId:"r1",restaurantName:"The Golden Spoon",customerId:"u1",customerName:"John Smith",customerEmail:"john.smith@email.com",customerPhone:"+1-555-0101",date:e.toISOString().split("T")[0],time:"19:00",guests:4,status:"confirmed",tablePreference:"Window seating",specialOccasion:"Anniversary",depositAmount:50,totalAmount:250,createdAt:new Date(e.getTime()-2592e5).toISOString(),confirmedAt:new Date(e.getTime()-1728e5).toISOString(),hasDispute:!1,source:"web",notes:"Requested quiet table for anniversary celebration"},{id:"b2",bookingNumber:"BK-2025-001235",restaurantId:"r3",restaurantName:"Sakura Sushi House",customerId:"u2",customerName:"Sarah Johnson",customerEmail:"sarah.j@email.com",customerPhone:"+1-555-0102",date:e.toISOString().split("T")[0],time:"20:00",guests:2,status:"pending",tablePreference:"Omakase bar",totalAmount:180,createdAt:new Date(e.getTime()-36e5).toISOString(),hasDispute:!1,source:"mobile"},{id:"b3",bookingNumber:"BK-2025-001236",restaurantId:"r1",restaurantName:"The Golden Spoon",customerId:"u3",customerName:"Michael Chen",customerEmail:"michael.chen@email.com",customerPhone:"+1-555-0103",date:s.toISOString().split("T")[0],time:"18:30",guests:6,status:"completed",tablePreference:"Private dining room",specialOccasion:"Business meeting",depositAmount:100,totalAmount:450,createdAt:new Date(s.getTime()-432e6).toISOString(),confirmedAt:new Date(s.getTime()-3456e5).toISOString(),completedAt:new Date(s.getTime()+72e5).toISOString(),hasDispute:!1,source:"web"},{id:"b4",bookingNumber:"BK-2025-001237",restaurantId:"r4",restaurantName:"Spice Route Indian Kitchen",customerId:"u4",customerName:"Emily Rodriguez",customerEmail:"emily.r@email.com",customerPhone:"+1-555-0104",date:new Date(e.getTime()-1728e5).toISOString().split("T")[0],time:"19:30",guests:4,status:"cancelled",tablePreference:"Indoor seating",totalAmount:120,createdAt:new Date(e.getTime()-432e6).toISOString(),confirmedAt:new Date(e.getTime()-3456e5).toISOString(),cancelledAt:new Date(e.getTime()-2592e5).toISOString(),cancellationReason:"Customer changed plans",hasDispute:!1,source:"web"},{id:"b5",bookingNumber:"BK-2025-001238",restaurantId:"r3",restaurantName:"Sakura Sushi House",customerId:"u5",customerName:"David Kim",customerEmail:"david.kim@email.com",customerPhone:"+1-555-0105",date:new Date(e.getTime()-864e5).toISOString().split("T")[0],time:"20:30",guests:3,status:"no-show",tablePreference:"Any table",depositAmount:50,totalAmount:150,createdAt:new Date(e.getTime()-6048e5).toISOString(),confirmedAt:new Date(e.getTime()-5184e5).toISOString(),hasDispute:!0,disputeId:"d1",source:"mobile",notes:"No-show, deposit forfeited"},{id:"b6",bookingNumber:"BK-2025-001239",restaurantId:"r1",restaurantName:"The Golden Spoon",customerId:"u6",customerName:"Lisa Wong",customerEmail:"lisa.wong@email.com",customerPhone:"+1-555-0106",date:t.toISOString().split("T")[0],time:"18:00",guests:2,status:"confirmed",tablePreference:"Outdoor patio",specialOccasion:"Birthday",totalAmount:180,createdAt:new Date(e.getTime()-1728e5).toISOString(),confirmedAt:new Date(e.getTime()-864e5).toISOString(),hasDispute:!1,source:"web",notes:"Birthday dessert requested"},{id:"b7",bookingNumber:"BK-2025-001240",restaurantId:"r5",restaurantName:"Le Petit Bistro",customerId:"u7",customerName:"James Taylor",customerEmail:"james.t@email.com",customerPhone:"+1-555-0107",date:new Date(e.getTime()-2592e5).toISOString().split("T")[0],time:"19:00",guests:4,status:"completed",tablePreference:"Indoor seating",totalAmount:220,createdAt:new Date(e.getTime()-864e6).toISOString(),confirmedAt:new Date(e.getTime()-7776e5).toISOString(),completedAt:new Date(e.getTime()-2592e5+72e5).toISOString(),hasDispute:!0,disputeId:"d2",source:"phone"},{id:"b8",bookingNumber:"BK-2025-001241",restaurantId:"r3",restaurantName:"Sakura Sushi House",customerId:"u8",customerName:"Maria Garcia",customerEmail:"maria.g@email.com",customerPhone:"+1-555-0108",date:e.toISOString().split("T")[0],time:"21:00",guests:5,status:"in-progress",tablePreference:"Any table",depositAmount:75,totalAmount:275,createdAt:new Date(e.getTime()-3456e5).toISOString(),confirmedAt:new Date(e.getTime()-2592e5).toISOString(),hasDispute:!1,source:"web"}]}getInitialDisputes(){let e=new Date;return[{id:"d1",bookingId:"b5",bookingNumber:"BK-2025-001238",restaurantId:"r3",restaurantName:"Sakura Sushi House",customerId:"u5",customerName:"David Kim",category:"no-show",description:"Customer claims they called to cancel but restaurant has no record. Requesting deposit refund.",status:"investigating",priority:"medium",filedAt:new Date(e.getTime()-432e5).toISOString(),assignedTo:"Admin User",communications:[{id:"c1",from:"customer",message:"I called 2 hours before the reservation to cancel but no one answered. I should not lose my deposit.",timestamp:new Date(e.getTime()-432e5).toISOString()},{id:"c2",from:"restaurant",message:"We have no record of any cancellation call. Customer did not show up and we held the table.",timestamp:new Date(e.getTime()-36e6).toISOString()},{id:"c3",from:"admin",message:"Investigating phone records. Please provide any additional evidence.",timestamp:new Date(e.getTime()-288e5).toISOString()}],evidence:["phone_logs.pdf","reservation_confirmation.pdf"]},{id:"d2",bookingId:"b7",bookingNumber:"BK-2025-001240",restaurantId:"r5",restaurantName:"Le Petit Bistro",customerId:"u7",customerName:"James Taylor",category:"quality",description:"Customer complained about food quality and service. Main course was cold and service was slow.",status:"resolved",priority:"high",filedAt:new Date(e.getTime()-2592e5+108e5).toISOString(),assignedTo:"Admin User",resolution:"Partial refund of $80 approved for main course. Restaurant manager will personally follow up.",resolvedAt:new Date(e.getTime()-1728e5).toISOString(),refundAmount:80,communications:[{id:"c4",from:"customer",message:"Very disappointed with the experience. Food was served cold and we waited 40 minutes for the main course.",timestamp:new Date(e.getTime()-2592e5+108e5).toISOString()},{id:"c5",from:"restaurant",message:"We sincerely apologize. We were short-staffed that evening. We would like to offer a complimentary meal.",timestamp:new Date(e.getTime()-2592e5+18e6).toISOString()},{id:"c6",from:"admin",message:"Resolution: $80 partial refund approved. Restaurant will issue refund within 5-7 business days.",timestamp:new Date(e.getTime()-1728e5).toISOString()}],evidence:["customer_photos.jpg","receipt.pdf"]},{id:"d3",bookingNumber:"BK-2025-001242",bookingId:"b9",restaurantId:"r4",restaurantName:"Spice Route Indian Kitchen",customerId:"u9",customerName:"Robert Brown",category:"billing",description:"Customer disputes final bill amount. Says charges do not match menu prices.",status:"open",priority:"urgent",filedAt:new Date(e.getTime()-216e5).toISOString(),communications:[{id:"c7",from:"customer",message:"I was charged $180 but menu prices should total $150. Please review the bill.",timestamp:new Date(e.getTime()-216e5).toISOString()}],evidence:["receipt_photo.jpg"]}]}getInitialRefunds(){let e=new Date;return[{id:"r1",bookingId:"b4",bookingNumber:"BK-2025-001237",restaurantId:"r4",restaurantName:"Spice Route Indian Kitchen",customerId:"u4",customerName:"Emily Rodriguez",requestedAmount:120,approvedAmount:120,status:"completed",reason:"Customer cancelled 48 hours in advance per policy",requestedAt:new Date(e.getTime()-2592e5).toISOString(),approvedAt:new Date(e.getTime()-1728e5).toISOString(),processedAt:new Date(e.getTime()-864e5).toISOString(),approvedBy:"Admin User",refundMethod:"original"},{id:"r2",bookingId:"b7",bookingNumber:"BK-2025-001240",restaurantId:"r5",restaurantName:"Le Petit Bistro",customerId:"u7",customerName:"James Taylor",requestedAmount:220,approvedAmount:80,status:"processed",reason:"Quality issue - partial refund for main course",requestedAt:new Date(e.getTime()-2592e5+108e5).toISOString(),approvedAt:new Date(e.getTime()-1728e5).toISOString(),processedAt:new Date(e.getTime()-864e5).toISOString(),approvedBy:"Admin User",refundMethod:"original"},{id:"r3",bookingId:"b5",bookingNumber:"BK-2025-001238",restaurantId:"r3",restaurantName:"Sakura Sushi House",customerId:"u5",customerName:"David Kim",requestedAmount:50,status:"pending",reason:"Claims attempted cancellation call was not answered",requestedAt:new Date(e.getTime()-432e5).toISOString(),refundMethod:"original"}]}getInitialActivities(){let e=new Date;return{b1:[{id:"a1",bookingId:"b1",type:"created",description:"Booking created by customer",performedBy:"John Smith",timestamp:new Date(e.getTime()-2592e5).toISOString()},{id:"a2",bookingId:"b1",type:"confirmed",description:"Booking confirmed by restaurant",performedBy:"The Golden Spoon",timestamp:new Date(e.getTime()-1728e5).toISOString()}],b7:[{id:"a3",bookingId:"b7",type:"completed",description:"Booking completed",performedBy:"System",timestamp:new Date(e.getTime()-2592e5+72e5).toISOString()},{id:"a4",bookingId:"b7",type:"disputed",description:"Quality dispute filed by customer",performedBy:"James Taylor",timestamp:new Date(e.getTime()-2592e5+108e5).toISOString()},{id:"a5",bookingId:"b7",type:"refunded",description:"Partial refund of $80 approved",performedBy:"Admin User",timestamp:new Date(e.getTime()-1728e5).toISOString()}]}}async getAllBookings(){let e=this.getData();return(null==e?void 0:e.bookings)||[]}async getBookingById(e){let t=this.getData();return(null==t?void 0:t.bookings.find(t=>t.id===e))||null}async updateBooking(e,t){let s=this.getData(),a=s.bookings.findIndex(t=>t.id===e);if(-1===a)throw Error("Booking not found");return s.bookings[a]={...s.bookings[a],...t},this.saveData(s),await this.logActivity({bookingId:e,type:"modified",description:"Booking updated: ".concat(Object.keys(t).join(", ")),performedBy:"Admin",timestamp:new Date().toISOString()}),s.bookings[a]}async cancelBooking(e,t){return this.updateBooking(e,{status:"cancelled",cancelledAt:new Date().toISOString(),cancellationReason:t})}async confirmBooking(e){return this.updateBooking(e,{status:"confirmed",confirmedAt:new Date().toISOString()})}async completeBooking(e){return this.updateBooking(e,{status:"completed",completedAt:new Date().toISOString()})}async markNoShow(e){return this.updateBooking(e,{status:"no-show"})}async getAllDisputes(){let e=this.getData();return(null==e?void 0:e.disputes)||[]}async getDisputeById(e){let t=this.getData();return(null==t?void 0:t.disputes.find(t=>t.id===e))||null}async updateDispute(e,t){let s=this.getData(),a=s.disputes.findIndex(t=>t.id===e);if(-1===a)throw Error("Dispute not found");return s.disputes[a]={...s.disputes[a],...t},this.saveData(s),s.disputes[a]}async resolveDispute(e,t,s){return this.updateDispute(e,{status:"resolved",resolution:t,resolvedAt:new Date().toISOString(),refundAmount:s})}async addDisputeCommunication(e,t){let s=this.getData(),a=s.disputes.find(t=>t.id===e);if(!a)throw Error("Dispute not found");let r={...t,id:"c_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))};return a.communications.push(r),this.saveData(s),a}async getAllRefunds(){let e=this.getData();return(null==e?void 0:e.refunds)||[]}async getRefundById(e){let t=this.getData();return(null==t?void 0:t.refunds.find(t=>t.id===e))||null}async updateRefund(e,t){let s=this.getData(),a=s.refunds.findIndex(t=>t.id===e);if(-1===a)throw Error("Refund not found");return s.refunds[a]={...s.refunds[a],...t},this.saveData(s),s.refunds[a]}async approveRefund(e,t,s){return this.updateRefund(e,{status:"approved",approvedAmount:t,approvedBy:s,approvedAt:new Date().toISOString()})}async rejectRefund(e,t){return this.updateRefund(e,{status:"rejected",rejectionReason:t})}async processRefund(e){return this.updateRefund(e,{status:"processed",processedAt:new Date().toISOString()})}async getBookingActivities(e){let t=this.getData();return(null==t?void 0:t.activities[e])||[]}async logActivity(e){let t=this.getData(),s={...e,id:"act_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))};return t.activities[e.bookingId]||(t.activities[e.bookingId]=[]),t.activities[e.bookingId].unshift(s),this.saveData(t),s}async getStatistics(){let e=await this.getAllBookings(),t=await this.getAllDisputes(),s=await this.getAllRefunds(),a=new Date().toISOString().split("T")[0],r=new Date;r.setDate(r.getDate()+1);let n=r.toISOString().split("T")[0],i=e.filter(e=>e.date===a).length,o=e.filter(e=>e.date===n).length,l=e.filter(e=>"completed"===e.status).reduce((e,t)=>e+t.totalAmount,0),d=e.length>0?e.reduce((e,t)=>e+t.guests,0)/e.length:0,c=e.filter(e=>"completed"===e.status).length,u=e.filter(e=>"cancelled"===e.status).length,m=e.filter(e=>"no-show"===e.status).length;return{total:e.length,pending:e.filter(e=>"pending"===e.status).length,confirmed:e.filter(e=>"confirmed"===e.status).length,inProgress:e.filter(e=>"in-progress"===e.status).length,completed:e.filter(e=>"completed"===e.status).length,cancelled:u,noShow:m,todayBookings:i,tomorrowBookings:o,activeDisputes:t.filter(e=>"closed"!==e.status&&"resolved"!==e.status).length,pendingRefunds:s.filter(e=>"pending"===e.status).length,totalRevenue:l,averagePartySize:Math.round(10*d)/10,cancellationRate:Math.round(10*(c>0?u/(c+u)*100:0))/10,noShowRate:Math.round(10*(c>0?m/(c+m)*100:0))/10}}async exportBookings(){let e=await this.getAllBookings(),t=e.map(e=>'"'.concat(e.bookingNumber,'","').concat(e.restaurantName,'","').concat(e.customerName,'","').concat(e.date,'","').concat(e.time,'",').concat(e.guests,",").concat(e.status,",$").concat(e.totalAmount,",").concat(e.source,',"').concat(e.createdAt,'"')).join("\n");return"Booking #,Restaurant,Customer,Date,Time,Guests,Status,Amount,Source,Created\n"+t}constructor(){this.storageKey="admin_bookings_data"}}let O=new T;function C(){let{toast:e}=(0,A.pm)(),[t,s]=(0,r.useState)([]),[f,v]=(0,r.useState)([]),[j,w]=(0,r.useState)([]),[N,k]=(0,r.useState)(null),[S,I]=(0,r.useState)(!0),[D,T]=(0,r.useState)(""),[C,_]=(0,r.useState)("all"),[L,q]=(0,r.useState)(""),[z,K]=(0,r.useState)("createdAt"),[F,$]=(0,r.useState)("desc"),[U,H]=(0,r.useState)(1),[V,J]=(0,r.useState)(null),[W,G]=(0,r.useState)(null),[X,Q]=(0,r.useState)(null),[Y,ee]=(0,r.useState)(null),[et,es]=(0,r.useState)(!1);(0,r.useEffect)(()=>{ea()},[]);let ea=async()=>{try{I(!0);let[e,t,a,r]=await Promise.all([O.getAllBookings(),O.getAllDisputes(),O.getAllRefunds(),O.getStatistics()]);s(e),v(t),w(a),k(r)}catch(t){console.error("Failed to load data:",t),e({title:"Error",description:"Failed to load booking data. Please refresh the page.",variant:"destructive"})}finally{I(!1)}},er=(0,r.useMemo)(()=>{let e=t.filter(e=>{let t=e.bookingNumber.toLowerCase().includes(D.toLowerCase())||e.customerName.toLowerCase().includes(D.toLowerCase())||e.restaurantName.toLowerCase().includes(D.toLowerCase())||e.customerEmail.toLowerCase().includes(D.toLowerCase()),s="all"===C||e.status===C,a=!L||e.date===L;return t&&s&&a});return e.sort((e,t)=>{let s,a;switch(z){case"bookingNumber":s=e.bookingNumber,a=t.bookingNumber;break;case"date":s=new Date(e.date+" "+e.time).getTime(),a=new Date(t.date+" "+t.time).getTime();break;case"customerName":s=e.customerName.toLowerCase(),a=t.customerName.toLowerCase();break;case"totalAmount":s=e.totalAmount,a=t.totalAmount;break;case"createdAt":s=new Date(e.createdAt).getTime(),a=new Date(t.createdAt).getTime();break;default:return 0}return s<a?"asc"===F?-1:1:s>a?"asc"===F?1:-1:0}),e},[t,D,C,L,z,F]),en=(0,r.useMemo)(()=>{let e=(U-1)*10;return er.slice(e,e+10)},[er,U]),ei=Math.ceil(er.length/10),eo=async t=>{try{await O.confirmBooking(t),await ea(),e({title:"Booking Confirmed",description:"The booking has been confirmed successfully."})}catch(t){e({title:"Error",description:"Failed to confirm booking.",variant:"destructive"})}},el=async(t,s)=>{try{await O.cancelBooking(t,s),await ea(),e({title:"Booking Cancelled",description:"The booking has been cancelled."})}catch(t){e({title:"Error",description:"Failed to cancel booking.",variant:"destructive"})}},ed=async t=>{try{await O.completeBooking(t),await ea(),e({title:"Booking Completed",description:"The booking has been marked as completed."})}catch(t){e({title:"Error",description:"Failed to complete booking.",variant:"destructive"})}},ec=async t=>{try{await O.markNoShow(t),await ea(),e({title:"Marked as No-Show",description:"The booking has been marked as no-show."})}catch(t){e({title:"Error",description:"Failed to mark no-show.",variant:"destructive"})}},eu=async()=>{try{let t=await O.exportBookings(),s=new Blob([t],{type:"text/csv"}),a=window.URL.createObjectURL(s),r=document.createElement("a");r.href=a,r.download="bookings-export-".concat(new Date().toISOString().split("T")[0],".csv"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(a),e({title:"Export Successful",description:"Booking data has been exported to CSV."})}catch(t){e({title:"Error",description:"Failed to export booking data.",variant:"destructive"})}},em=e=>{z===e?$("asc"===F?"desc":"asc"):(K(e),$("desc"))};return S?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading bookings..."})]})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Booking Management"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Comprehensive platform-wide booking oversight and management"})]}),N&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsx)(B,{title:"Total Bookings",value:N.total,icon:(0,a.jsx)(n.Z,{className:"w-6 h-6"}),color:"blue"}),(0,a.jsx)(B,{title:"Confirmed",value:N.confirmed,icon:(0,a.jsx)(i.Z,{className:"w-6 h-6"}),color:"green"}),(0,a.jsx)(B,{title:"Pending",value:N.pending,icon:(0,a.jsx)(o.Z,{className:"w-6 h-6"}),color:"yellow"}),(0,a.jsx)(B,{title:"Active Disputes",value:N.activeDisputes,icon:(0,a.jsx)(l.Z,{className:"w-6 h-6"}),color:"red"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Today's Bookings"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:N.todayBookings})]}),(0,a.jsx)(n.Z,{className:"w-8 h-8 text-blue-600"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Tomorrow's Bookings"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:N.tomorrowBookings})]}),(0,a.jsx)(n.Z,{className:"w-8 h-8 text-green-600"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:["$",N.totalRevenue.toLocaleString()]})]}),(0,a.jsx)(d.Z,{className:"w-8 h-8 text-green-600"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending Refunds"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:N.pendingRefunds})]}),(0,a.jsx)(c.Z,{className:"w-8 h-8 text-orange-600"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg Party Size"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:[N.averagePartySize," guests"]})]}),(0,a.jsx)(u.Z,{className:"w-8 h-8 text-blue-600"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Cancellation Rate"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:[N.cancellationRate,"%"]})]}),(0,a.jsx)(m.Z,{className:"w-8 h-8 text-red-600"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"No-Show Rate"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:[N.noShowRate,"%"]})]}),(0,a.jsx)(g.Z,{className:"w-8 h-8 text-red-600"})]})})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between bg-white rounded-lg border border-gray-200 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("button",{onClick:()=>es(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"Analytics"]}),(0,a.jsxs)("button",{onClick:eu,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[er.length," bookings"]})})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)("div",{className:"md:col-span-2",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by booking #, customer, restaurant, email...",value:D,onChange:e=>T(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("select",{value:C,onChange:e=>_(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"pending",children:"Pending"}),(0,a.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,a.jsx)("option",{value:"in-progress",children:"In Progress"}),(0,a.jsx)("option",{value:"completed",children:"Completed"}),(0,a.jsx)("option",{value:"cancelled",children:"Cancelled"}),(0,a.jsx)("option",{value:"no-show",children:"No-Show"})]})}),(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"date",value:L,onChange:e=>q(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)(Z,{field:"bookingNumber",currentField:z,sortOrder:F,onSort:em,children:"Booking #"}),(0,a.jsx)(Z,{field:"date",currentField:z,sortOrder:F,onSort:em,children:"Date & Time"}),(0,a.jsx)(Z,{field:"customerName",currentField:z,sortOrder:F,onSort:em,children:"Customer"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Restaurant"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Details"}),(0,a.jsx)(Z,{field:"totalAmount",currentField:z,sortOrder:F,onSort:em,children:"Amount"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:en.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.bookingNumber}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.date}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.time})]}),(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.customerName}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.customerEmail})]}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.restaurantName})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-900",children:[e.guests," guests"]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.tablePreference})]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["$",e.totalAmount]}),e.depositAmount&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Deposit: $",e.depositAmount]})]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)(R,{status:e.status}),e.hasDispute&&(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[(0,a.jsx)(l.Z,{className:"w-3 h-3 mr-1"}),"Dispute"]})})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,a.jsx)(P,{booking:e,onViewDetails:J})})]},e.id))})]})}),ei>1&&(0,a.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Page ",U," of ",ei]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:()=>H(Math.max(1,U-1)),disabled:1===U,className:"px-3 py-1 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(b.Z,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>H(Math.min(ei,U+1)),disabled:U===ei,className:"px-3 py-1 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(y.Z,{className:"w-4 h-4"})})]})]})]}),V&&(0,a.jsx)(E,{bookingId:V,onClose:()=>J(null),onConfirm:eo,onCancel:el,onComplete:ed,onMarkNoShow:ec}),et&&(0,a.jsx)(M,{bookings:t,disputes:f,refunds:j,statistics:N,onClose:()=>es(!1)})]})}function B(e){let{title:t,value:s,icon:r,color:n}=e;return(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:s})]}),(0,a.jsx)("div",{className:{blue:"text-blue-600",green:"text-green-600",yellow:"text-yellow-600",red:"text-red-600",purple:"text-purple-600",orange:"text-orange-600"}[n],children:r})]})})}function Z(e){let{field:t,currentField:s,sortOrder:r,onSort:n,children:i}=e;return(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>n(t),children:(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("span",{children:i}),s===t&&(0,a.jsx)("span",{className:"text-blue-600",children:"asc"===r?"↑":"↓"})]})})}function R(e){let{status:t}=e,s={pending:{bg:"bg-yellow-100",text:"text-yellow-800",icon:o.Z,label:"Pending"},confirmed:{bg:"bg-green-100",text:"text-green-800",icon:i.Z,label:"Confirmed"},"in-progress":{bg:"bg-blue-100",text:"text-blue-800",icon:f.Z,label:"In Progress"},completed:{bg:"bg-purple-100",text:"text-purple-800",icon:j,label:"Completed"},cancelled:{bg:"bg-gray-100",text:"text-gray-800",icon:w.Z,label:"Cancelled"},"no-show":{bg:"bg-red-100",text:"text-red-800",icon:g.Z,label:"No-Show"}},r=s[t]||s.pending,n=r.icon;return(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(r.bg," ").concat(r.text),children:[(0,a.jsx)(n,{className:"w-3 h-3 mr-1"}),r.label]})}function P(e){let{booking:t,onViewDetails:s}=e,[n,i]=(0,r.useState)(!1);return(0,a.jsxs)("div",{className:"relative inline-block",children:[(0,a.jsx)("button",{onClick:()=>i(!n),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(N.Z,{className:"w-5 h-5 text-gray-600"})}),n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>i(!1)}),(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-20",children:[(0,a.jsxs)("button",{onClick:()=>{s(t.id),i(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center rounded-t-lg",children:[(0,a.jsx)(k.Z,{className:"w-4 h-4 mr-2"}),"View Details"]}),(0,a.jsxs)("button",{className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center",children:[(0,a.jsx)(S.Z,{className:"w-4 h-4 mr-2"}),"Contact Customer"]}),(0,a.jsxs)("button",{className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center rounded-b-lg",children:[(0,a.jsx)(I.Z,{className:"w-4 h-4 mr-2"}),"Activity Log"]})]})]})]})}function E(e){let{bookingId:t,onClose:s,onConfirm:n,onCancel:i,onComplete:o,onMarkNoShow:l}=e,[d,c]=(0,r.useState)(null),[u,m]=(0,r.useState)([]),[g,x]=(0,r.useState)(!1),[h,p]=(0,r.useState)("");(0,r.useEffect)(()=>{b()},[t]);let b=async()=>{let e=await O.getBookingById(t),s=await O.getBookingActivities(t);c(e),m(s)};return d?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Booking Details"}),(0,a.jsx)("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,a.jsx)(D.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Booking Information"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(L,{label:"Booking Number",value:d.bookingNumber}),(0,a.jsx)(L,{label:"Status",value:(0,a.jsx)(R,{status:d.status})}),(0,a.jsx)(L,{label:"Date",value:d.date}),(0,a.jsx)(L,{label:"Time",value:d.time}),(0,a.jsx)(L,{label:"Guests",value:"".concat(d.guests," people")}),(0,a.jsx)(L,{label:"Table Preference",value:d.tablePreference}),d.specialOccasion&&(0,a.jsx)(L,{label:"Special Occasion",value:d.specialOccasion}),d.specialRequests&&(0,a.jsx)(L,{label:"Special Requests",value:d.specialRequests})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Customer Information"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(L,{label:"Name",value:d.customerName}),(0,a.jsx)(L,{label:"Email",value:d.customerEmail}),(0,a.jsx)(L,{label:"Phone",value:d.customerPhone})]}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 mt-6",children:"Payment Information"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(L,{label:"Total Amount",value:"$".concat(d.totalAmount)}),d.depositAmount&&(0,a.jsx)(L,{label:"Deposit Paid",value:"$".concat(d.depositAmount)}),(0,a.jsx)(L,{label:"Source",value:d.source})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Restaurant"}),(0,a.jsx)("div",{className:"text-gray-900",children:d.restaurantName})]}),u.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Activity Log"}),(0,a.jsx)("div",{className:"space-y-2",children:u.map(e=>(0,a.jsx)("div",{className:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.description}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[new Date(e.timestamp).toLocaleString()," • ",e.performedBy]})]})},e.id))})]}),g?(0,a.jsxs)("div",{className:"pt-4 border-t border-gray-200",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cancellation Reason"}),(0,a.jsx)("textarea",{value:h,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",rows:3,placeholder:"Please provide a reason for cancellation..."}),(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-4 mt-4",children:[(0,a.jsx)("button",{onClick:()=>x(!1),className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Back"}),(0,a.jsx)("button",{onClick:()=>i(d.id,h),disabled:!h.trim(),className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Confirm Cancellation"})]})]}):(0,a.jsxs)("div",{className:"flex items-center justify-end space-x-4 pt-4 border-t border-gray-200",children:["pending"===d.status&&(0,a.jsx)("button",{onClick:()=>n(d.id),className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Confirm Booking"}),"confirmed"===d.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>o(d.id),className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Mark Completed"}),(0,a.jsx)("button",{onClick:()=>l(d.id),className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Mark No-Show"})]}),["pending","confirmed"].includes(d.status)&&(0,a.jsx)("button",{onClick:()=>x(!0),className:"px-6 py-2 border border-red-600 text-red-600 rounded-lg hover:bg-red-50 transition-colors",children:"Cancel Booking"})]})]})]})}):null}function M(e){let{bookings:t,disputes:s,refunds:r,statistics:o,onClose:l}=e;return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Booking Analytics"}),(0,a.jsx)("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,a.jsx)(D.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"bg-blue-50 rounded-lg p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-blue-600",children:"Total Bookings"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-blue-900 mt-2",children:null==o?void 0:o.total})]}),(0,a.jsx)(n.Z,{className:"w-12 h-12 text-blue-600"})]})}),(0,a.jsx)("div",{className:"bg-green-50 rounded-lg p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-green-600",children:"Completion Rate"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-green-900 mt-2",children:[o&&o.total>0?Math.round(o.completed/o.total*100):0,"%"]})]}),(0,a.jsx)(i.Z,{className:"w-12 h-12 text-green-600"})]})}),(0,a.jsx)("div",{className:"bg-purple-50 rounded-lg p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-purple-600",children:"Total Revenue"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-purple-900 mt-2",children:["$",null==o?void 0:o.totalRevenue.toLocaleString()]})]}),(0,a.jsx)(d.Z,{className:"w-12 h-12 text-purple-600"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Booking Status Distribution"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(_,{label:"Confirmed",count:null==o?void 0:o.confirmed,total:null==o?void 0:o.total,color:"green"}),(0,a.jsx)(_,{label:"Pending",count:null==o?void 0:o.pending,total:null==o?void 0:o.total,color:"yellow"}),(0,a.jsx)(_,{label:"In Progress",count:null==o?void 0:o.inProgress,total:null==o?void 0:o.total,color:"blue"}),(0,a.jsx)(_,{label:"Completed",count:null==o?void 0:o.completed,total:null==o?void 0:o.total,color:"purple"}),(0,a.jsx)(_,{label:"Cancelled",count:null==o?void 0:o.cancelled,total:null==o?void 0:o.total,color:"gray"}),(0,a.jsx)(_,{label:"No-Show",count:null==o?void 0:o.noShow,total:null==o?void 0:o.total,color:"red"})]})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Key Metrics"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Average Party Size"}),(0,a.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:[null==o?void 0:o.averagePartySize," guests"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Cancellation Rate"}),(0,a.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:[null==o?void 0:o.cancellationRate,"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"No-Show Rate"}),(0,a.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:[null==o?void 0:o.noShowRate,"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[(0,a.jsx)("span",{className:"text-sm text-red-600",children:"Active Disputes"}),(0,a.jsx)("span",{className:"text-lg font-bold text-red-900",children:null==o?void 0:o.activeDisputes})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-orange-50 rounded-lg",children:[(0,a.jsx)("span",{className:"text-sm text-orange-600",children:"Pending Refunds"}),(0,a.jsx)("span",{className:"text-lg font-bold text-orange-900",children:null==o?void 0:o.pendingRefunds})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Booking Sources"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:["web","mobile","walk-in","phone"].map(e=>{let s=t.filter(t=>t.source===e).length,r=t.length>0?Math.round(s/t.length*100):0;return(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 capitalize",children:e}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:s}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[r,"%"]})]},e)})})]})]})]})})}function _(e){let{label:t,count:s,total:r,color:n}=e,i=r>0?s/r*100:0;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm mb-1",children:[(0,a.jsx)("span",{className:"text-gray-600",children:t}),(0,a.jsxs)("span",{className:"font-medium text-gray-900",children:[s," (",Math.round(i),"%)"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full ".concat({green:"bg-green-500",yellow:"bg-yellow-500",blue:"bg-blue-500",purple:"bg-purple-500",gray:"bg-gray-500",red:"bg-red-500"}[n]),style:{width:"".concat(i,"%")}})})]})}function L(e){let{label:t,value:s}=e;return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-xs text-gray-500 uppercase tracking-wide",children:t}),(0,a.jsx)("div",{className:"text-sm text-gray-900 mt-1",children:s})]})}},798:function(e,t,s){"use strict";s.d(t,{pm:function(){return m}});var a=s(2265);let r=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function c(e){d=o(d,e),l.forEach(e=>{e(d)})}function u(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=a.useState(d);return a.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},622:function(e,t,s){"use strict";var a=s(2265),r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,s){var a,n={},d=null,c=null;for(a in void 0!==s&&(d=""+s),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)i.call(t,a)&&!l.hasOwnProperty(a)&&(n[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===n[a]&&(n[a]=t[a]);return{$$typeof:r,type:e,key:d,ref:c,props:n,_owner:o.current}}t.Fragment=n,t.jsx=d,t.jsxs=d},7437:function(e,t,s){"use strict";e.exports=s(622)}},function(e){e.O(0,[2971,2472,1744],function(){return e(e.s=6791)}),_N_E=e.O()}]);