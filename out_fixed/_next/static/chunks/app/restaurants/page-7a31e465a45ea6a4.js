(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[529],{9185:function(e,a,s){Promise.resolve().then(s.bind(s,6041))},6041:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return Q}});var t=s(1758),i=s(5295),n=s(3107),r=s(8922),c=s(8631),l=s(9996),o=s(4873),d=s(3640);function u(e){let{restaurant:a,onBook:s,onViewMenu:n,onShare:r}=e,[u,m]=(0,i.useState)(!1);return(0,t.jsx)("div",{className:"w-full max-w-sm mx-auto",children:(0,t.jsx)(c.Zb,{className:"overflow-hidden",children:(0,t.jsxs)(c.aY,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg",children:a.name}),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:a.cuisine})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(o.Z,{className:"w-4 h-4 text-yellow-400 fill-current"}),(0,t.jsx)("span",{className:"ml-1 text-sm",children:a.rating}),(0,t.jsxs)("span",{className:"ml-1 text-sm text-gray-500",children:["(",a.reviews,")"]})]}),(0,t.jsx)("span",{className:"text-sm text-gray-500",children:a.priceRange})]}),(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-500 mb-4",children:[(0,t.jsx)(d.Z,{className:"w-4 h-4 mr-1"}),(0,t.jsx)("span",{children:a.location}),a.distance&&(0,t.jsx)("span",{className:"ml-2",children:a.distance})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)(l.z,{onClick:()=>{s(a.id)},className:"flex-1",disabled:!a.isOpen,children:a.isOpen?"Book Now":"Closed"}),(0,t.jsx)(l.z,{variant:"outline",onClick:()=>{n(a.id)},children:"Menu"})]})]})})})}var m=s(7902),h=s(3900),x=s(1666),p=s(2179);function g(e){let{onRefresh:a,children:s,className:n=""}=e,[r,c]=(0,i.useState)(!1),[l,o]=(0,i.useState)(0),d=async()=>{c(!0);try{await a()}catch(e){console.error("Refresh failed:",e)}finally{c(!1),o(0)}},{onTouchStart:u,onTouchMove:m,onTouchEnd:g}=function(e){let a=(0,i.useRef)(0),s=(0,i.useRef)(0),t=(0,i.useRef)(!1),n=(0,i.useCallback)(e=>{window.scrollY>0||(a.current=e.touches[0].clientY)},[]),r=(0,i.useCallback)(e=>{if(window.scrollY>0)return;s.current=e.touches[0].clientY;let i=s.current-a.current;i>0&&(t.current=!0,e.preventDefault())},[]),c=(0,i.useCallback)(async()=>{t.current&&s.current-a.current>100&&await e(),t.current=!1,a.current=0,s.current=0},[e]);return{onTouchStart:n,onTouchMove:r,onTouchEnd:c}}(d);return window.innerWidth>=768?(0,t.jsx)("div",{className:n,children:s}):(0,t.jsxs)("div",{className:n,children:[(0,t.jsx)(h.M,{children:l>0&&(0,t.jsx)(x.E.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"fixed top-0 left-0 right-0 z-40 flex items-center justify-center h-16 bg-white dark:bg-gray-950 shadow-sm",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.E.div,{animate:{rotate:r?360:l>50?180:0},transition:{duration:r?1:.3,repeat:r?1/0:0,ease:r?"linear":"easeOut"},className:"w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full ".concat(r?"animate-spin":""),children:l>50&&!r&&(0,t.jsx)(p.Z,{className:"w-4 h-4 text-blue-500 absolute top-1 left-1"})}),(0,t.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:r?"Refreshing...":l>50?"Release to refresh":"Pull to refresh"})]})})}),(0,t.jsx)("div",{onTouchStart:e=>{window.scrollY>0||u(e)},onTouchMove:e=>{if(window.scrollY>0)return;m(e);let a=e.touches[0],s=parseFloat(a.startY)||0,t=a.clientY;o(Math.min(Math.max(0,t-s),100))},onTouchEnd:()=>{g(),setTimeout(()=>o(0),300)},style:{transform:l>0?"translateY(".concat(Math.min(.5*l,30),"px)"):"translateY(0)",transition:l>50?"none":"transform 0.3s ease-out"},children:s})]})}var f=s(6952),j=s(684),v=s(5927),N=s(4806),y=s(5178);function b(e){let{onScan:a,onClose:s,isOpen:n,title:r="Scan QR Code"}=e,[c,o]=(0,i.useState)(null),[d,u]=(0,i.useState)(null),[m,h]=(0,i.useState)("prompt"),x=(0,i.useRef)(null),p=(0,i.useRef)(null);(0,i.useEffect)(()=>(n&&x.current?g():b(),()=>{b()}),[n]);let g=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({video:!0});e.getTracks().forEach(e=>e.stop()),h("granted");let t=new y.Z(x.current,e=>{a(e.data),s()},{preferredCamera:"environment",highlightScanRegion:!0,highlightCodeOutline:!0,maxScansPerSecond:1});o(t),await t.start(),u(null)}catch(e){console.error("Camera access error:",e),h("denied"),u("Camera access denied. Please allow camera permissions to scan QR codes.")}},b=()=>{c&&(c.stop(),c.destroy(),o(null))},w=e=>{var t;let i=null===(t=e.target.files)||void 0===t?void 0:t[0];i&&y.Z.scanImage(i).then(e=>{a(e),s()}).catch(e=>{u("Could not scan QR code from image. Please try again.")})};return"denied"===m?(0,t.jsx)(N.Vq,{open:n,onOpenChange:s,children:(0,t.jsxs)(N.cZ,{className:"sm:max-w-md",children:[(0,t.jsx)(N.fK,{children:(0,t.jsx)(N.$N,{children:r})}),(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center p-6 text-center",children:[(0,t.jsx)(f.Z,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Camera access is required to scan QR codes. Please enable camera permissions in your browser settings and try again."}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(l.z,{variant:"outline",onClick:()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.click()},className:"flex items-center gap-2",children:[(0,t.jsx)(j.Z,{className:"h-4 w-4"}),"Upload Image"]}),(0,t.jsx)("input",{ref:p,type:"file",accept:"image/*",onChange:w,className:"hidden"})]})]}),d&&(0,t.jsx)("div",{className:"text-center text-sm text-destructive",children:d})]})}):(0,t.jsx)(N.Vq,{open:n,onOpenChange:s,children:(0,t.jsxs)(N.cZ,{className:"sm:max-w-md p-0",children:[(0,t.jsx)(N.fK,{className:"p-6 pb-0",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(N.$N,{children:r}),(0,t.jsx)(l.z,{variant:"ghost",size:"sm",onClick:s,children:(0,t.jsx)(v.Z,{className:"h-4 w-4"})})]})}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("video",{ref:x,className:"w-full h-64 bg-black rounded-none",playsInline:!0,muted:!0}),d&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-75",children:(0,t.jsxs)("div",{className:"text-center text-white p-4",children:[(0,t.jsx)(f.Z,{className:"h-8 w-8 mx-auto mb-2"}),(0,t.jsx)("p",{className:"text-sm",children:d}),(0,t.jsx)(l.z,{variant:"outline",onClick:()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.click()},className:"mt-4 bg-white text-black hover:bg-gray-100",children:"Upload Image Instead"})]})})]}),(0,t.jsxs)("div",{className:"p-6 pt-4",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"Position the QR code within the camera view to scan"}),(0,t.jsx)("input",{ref:p,type:"file",accept:"image/*",onChange:w,className:"hidden"})]})]})})}var w=s(4157),C=s(7450),k=s(932),S=s(6277),z=s(7706),R=s(4589),Z=s(241),E=s(5974),P=s(6513),q=s(1011),O=s(6786);function _(e){let{restaurantName:a,onSubmit:s,onCancel:n}=e,[r,o]=(0,i.useState)(!1),[d,u]=(0,i.useState)({date:"",time:"",partySize:2,guestName:"",guestEmail:"",guestPhone:"",specialRequests:"",notifications:!0}),{toast:m}=(0,q.pm)(),{vibrate:h,mediumImpact:p}=function(){let e=(0,i.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;"vibrate"in navigator&&navigator.vibrate(e)},[]),a=(0,i.useCallback)(()=>{"vibrate"in navigator&&navigator.vibrate(10)},[]),s=(0,i.useCallback)(()=>{"vibrate"in navigator&&navigator.vibrate(20)},[]),t=(0,i.useCallback)(()=>{"vibrate"in navigator&&navigator.vibrate(30)},[]);return{vibrate:e,lightImpact:a,mediumImpact:s,heavyImpact:t}}(),{subscribeToPush:g,sendNotification:f}=function(){let[e,a]=(0,i.useState)({permission:Notification.permission,isSubscribed:!1,subscription:null}),s=async()=>{if(!("Notification"in window))return console.warn("This browser does not support notifications"),"denied";let e=await Notification.requestPermission();return a(a=>({...a,permission:e})),e},t=async t=>{if("granted"!==e.permission){let e=await s();if("granted"!==e)return!1}try{let e=await navigator.serviceWorker.ready,s=await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:O.env.NEXT_PUBLIC_VAPID_PUBLIC_KEY});return a(e=>({...e,isSubscribed:!0,subscription:s})),await fetch("/api/notifications/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:s,userId:t})}),!0}catch(e){return console.error("Failed to subscribe to push notifications:",e),!1}},n=async()=>{if(!e.subscription)return!1;try{return await e.subscription.unsubscribe(),a(e=>({...e,isSubscribed:!1,subscription:null})),await fetch("/api/notifications/unsubscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:e.subscription})}),!0}catch(e){return console.error("Failed to unsubscribe from push notifications:",e),!1}},r=async function(a){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"Notification"in window&&"granted"===e.permission&&new Notification(a,{icon:"/icons/icon-192x192.png",badge:"/icons/icon-72x72.png",...s})};return{...e,requestPermission:s,subscribeToPush:t,unsubscribeFromPush:n,sendNotification:r}}(),j=(e,a)=>{u(s=>({...s,[e]:a}))},v=async e=>{e.preventDefault(),p(),o(!0);try{d.notifications&&await g("current-user-id"),await s(d),d.notifications&&f("Booking Confirmed!",{body:"Your table at ".concat(a," has been booked for ").concat(d.date," at ").concat(d.time),icon:"/icons/icon-192x192.png",tag:"booking-confirmation"}),m({title:"Booking Confirmed!",description:"Your table at ".concat(a," has been successfully booked.")})}catch(e){m({title:"Booking Failed",description:"Please check your information and try again.",variant:"destructive"})}finally{o(!1)}},N=new Date().toISOString().split("T")[0];return(0,t.jsx)(x.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md mx-auto",children:(0,t.jsxs)(c.Zb,{className:"shadow-lg",children:[(0,t.jsx)(c.Ol,{children:(0,t.jsxs)(c.ll,{className:"text-xl text-center",children:["Book at ",a]})}),(0,t.jsxs)("form",{onSubmit:v,children:[(0,t.jsxs)(c.aY,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(k._,{htmlFor:"date",className:"flex items-center gap-2",children:[(0,t.jsx)(S.Z,{className:"h-4 w-4"}),"Date"]}),(0,t.jsx)(C.I,{id:"date",type:"date",min:N,required:!0,value:d.date,onChange:e=>j("date",e.target.value),className:"touch-target"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(k._,{htmlFor:"time",className:"flex items-center gap-2",children:[(0,t.jsx)(z.Z,{className:"h-4 w-4"}),"Time"]}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2 max-h-32 overflow-y-auto",children:["11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30"].map(e=>(0,t.jsx)(l.z,{type:"button",variant:d.time===e?"default":"outline",size:"sm",className:"h-10 text-xs touch-target",onClick:()=>j("time",e),children:e},e))})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(k._,{htmlFor:"partySize",className:"flex items-center gap-2",children:[(0,t.jsx)(R.Z,{className:"h-4 w-4"}),"Party Size"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.z,{type:"button",variant:"outline",size:"sm",onClick:()=>j("partySize",Math.max(1,d.partySize-1)),className:"h-10 w-10 p-0 touch-target",children:"-"}),(0,t.jsx)(C.I,{id:"partySize",type:"number",min:"1",max:"20",required:!0,value:d.partySize,onChange:e=>j("partySize",parseInt(e.target.value)||1),className:"text-center touch-target flex-1"}),(0,t.jsx)(l.z,{type:"button",variant:"outline",size:"sm",onClick:()=>j("partySize",Math.min(20,d.partySize+1)),className:"h-10 w-10 p-0 touch-target",children:"+"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(k._,{htmlFor:"guestName",className:"flex items-center gap-2",children:[(0,t.jsx)(R.Z,{className:"h-4 w-4"}),"Full Name"]}),(0,t.jsx)(C.I,{id:"guestName",type:"text",required:!0,value:d.guestName,onChange:e=>j("guestName",e.target.value),placeholder:"Enter your full name",className:"touch-target"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(k._,{htmlFor:"guestEmail",className:"flex items-center gap-2",children:[(0,t.jsx)(Z.Z,{className:"h-4 w-4"}),"Email"]}),(0,t.jsx)(C.I,{id:"guestEmail",type:"email",required:!0,value:d.guestEmail,onChange:e=>j("guestEmail",e.target.value),placeholder:"Enter your email",className:"touch-target"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(k._,{htmlFor:"guestPhone",className:"flex items-center gap-2",children:[(0,t.jsx)(E.Z,{className:"h-4 w-4"}),"Phone"]}),(0,t.jsx)(C.I,{id:"guestPhone",type:"tel",required:!0,value:d.guestPhone,onChange:e=>j("guestPhone",e.target.value),placeholder:"Enter your phone number",className:"touch-target"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(k._,{htmlFor:"specialRequests",className:"flex items-center gap-2",children:[(0,t.jsx)(P.Z,{className:"h-4 w-4"}),"Special Requests (Optional)"]}),(0,t.jsx)("textarea",{id:"specialRequests",value:d.specialRequests,onChange:e=>j("specialRequests",e.target.value),placeholder:"Any special dietary requirements or requests...",className:"w-full min-h-[80px] p-3 border border-input rounded-md text-sm resize-none touch-target",rows:3})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(k._,{htmlFor:"notifications",className:"text-sm font-medium",children:"Enable Notifications"}),(0,t.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Get booking confirmations and reminders"})]}),(0,t.jsx)("input",{id:"notifications",type:"checkbox",checked:d.notifications,onChange:e=>j("notifications",e.target.checked),className:"h-4 w-4 rounded touch-target"})]})]}),(0,t.jsxs)(c.eW,{className:"flex gap-2",children:[(0,t.jsx)(l.z,{type:"button",variant:"outline",onClick:n,className:"flex-1 touch-target",disabled:r,children:"Cancel"}),(0,t.jsx)(l.z,{type:"submit",className:"flex-1 touch-target",disabled:r,children:r?"Booking...":"Confirm Booking"})]})]})]})})}var I=s(8349),F=s(6612),Y=s(2429),T=s(5142),B=s(1658),M=s(8033);function Q(){let e=(0,n.useSearchParams)(),a=(0,n.useRouter)(),{user:s}=(0,I.useAuth)(),{toast:o}=(0,q.pm)(),[h,x]=(0,i.useState)([]),[p,f]=(0,i.useState)(!0),[j,v]=(0,i.useState)(!1),[y,C]=(0,i.useState)(!1),[k,S]=(0,i.useState)("grid"),[z,R]=(0,i.useState)(null),[Z,E]=(0,i.useState)(!1),[P,O]=(0,i.useState)({page:1,limit:12,total:0,pages:0}),[Q,U]=(0,i.useState)({cuisine:"",priceRange:"",query:""});(0,i.useEffect)(()=>{U({cuisine:e.get("cuisine")||"",priceRange:e.get("priceRange")||"",query:e.get("query")||""}),D(1)},[e]);let D=async function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P.page;try{f(!0);let s=new URLSearchParams({page:a.toString(),limit:P.limit.toString()});e.forEach((e,a)=>{e&&s.set(a,e)});let t=await F.Z.get("/api/restaurants?".concat(s.toString()));x(t.data.restaurants),O(t.data.pagination)}catch(e){console.error("Error fetching restaurants:",e),o({title:"Error",description:"Failed to load restaurants. Please try again.",variant:"destructive"})}finally{f(!1)}},V=async()=>{v(!0);try{await D(1),o({title:"Updated",description:"Restaurant list refreshed"})}finally{v(!1)}},A=e=>{D(e),window.scrollTo({top:0,behavior:"smooth"})},L=()=>{a.push("/restaurants")},W=e=>{R(e),E(!0)},K=async e=>{console.log("Booking data:",e,"for restaurant:",null==z?void 0:z.name);try{await F.Z.post("/api/bookings",{...e,restaurantId:null==z?void 0:z.id}),E(!1),R(null),o({title:"Booking Confirmed!",description:"Your table has been booked at ".concat(null==z?void 0:z.name)}),a.push("/bookings")}catch(e){throw Error("Booking failed")}},J=e=>{a.push("/restaurants/".concat(e,"/menu"))},$=async e=>{let a=h.find(a=>a.id===e);if(a){if(navigator.share)try{await navigator.share({title:a.name,text:"Check out ".concat(a.name," - ").concat(a.cuisine),url:"".concat(window.location.origin,"/restaurants/").concat(e)})}catch(e){}else await navigator.clipboard.writeText("".concat(window.location.origin,"/restaurants/").concat(e)),o({title:"Link Copied",description:"Restaurant link has been copied to clipboard"})}},G=""!==e.toString(),X=window.innerWidth<768;return(0,t.jsxs)(g,{onRefresh:V,className:"space-y-8",children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight mb-4",children:"Discover Restaurants"}),(0,t.jsx)("p",{className:"text-lg text-muted-foreground",children:"Find the perfect dining experience for any occasion"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(m.E,{}),X&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(l.z,{variant:"outline",size:"sm",onClick:()=>C(!0),className:"flex-1 touch-target",children:[(0,t.jsx)(Y.Z,{className:"h-4 w-4 mr-2"}),"Scan QR"]}),(0,t.jsxs)(l.z,{variant:"outline",size:"sm",onClick:()=>a.push("/nearby"),className:"flex-1 touch-target",children:[(0,t.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Nearby"]})]}),!X&&(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:p?"Loading restaurants...":"Showing ".concat(h.length," of ").concat(P.total," restaurants")}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.z,{variant:"grid"===k?"default":"outline",size:"sm",onClick:()=>S("grid"),children:(0,t.jsx)(T.Z,{className:"h-4 w-4"})}),(0,t.jsx)(l.z,{variant:"list"===k?"default":"outline",size:"sm",onClick:()=>S("list"),children:(0,t.jsx)(B.Z,{className:"h-4 w-4"})})]})]})]}),G&&(0,t.jsx)(c.Zb,{children:(0,t.jsx)(c.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(M.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Active filters:"}),e.get("query")&&(0,t.jsxs)(w.C,{variant:"secondary",children:["Query: ",e.get("query")]}),e.get("cuisine")&&(0,t.jsxs)(w.C,{variant:"secondary",children:["Cuisine: ",e.get("cuisine")]}),e.get("priceRange")&&(0,t.jsxs)(w.C,{variant:"secondary",children:["Price: ",e.get("priceRange")]}),e.get("location")&&(0,t.jsxs)(w.C,{variant:"secondary",children:["Location: ",e.get("location")]})]}),(0,t.jsx)(l.z,{variant:"outline",size:"sm",onClick:L,children:"Clear all"})]})})}),p?(0,t.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((e,a)=>(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"bg-muted h-48 rounded-lg mb-4"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"bg-muted h-4 rounded w-3/4"}),(0,t.jsx)("div",{className:"bg-muted h-3 rounded w-1/2"})]})]},a))}):h.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:X?"space-y-4":"grid ".concat("grid"===k?"md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"," gap-6"),children:h.map(e=>{var s;return X?(0,t.jsx)(u,{restaurant:{...e,location:e.address,image:e.imageUrl,isOpen:null===(s=e.isOpen)||void 0===s||s},onBook:a=>W(e),onViewMenu:J,onShare:$,onScanQR:e=>{a.push("/restaurants/".concat(e,"/menu"))}},e.id):(0,t.jsx)(r.P,{restaurant:e,viewMode:k},e.id)})}),P.pages>1&&(0,t.jsxs)("div",{className:"flex justify-center items-center space-x-2 mt-8",children:[(0,t.jsx)(l.z,{variant:"outline",onClick:()=>A(P.page-1),disabled:1===P.page,children:"Previous"}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[Array.from({length:Math.min(5,P.pages)},(e,a)=>{let s=a+1;return(0,t.jsx)(l.z,{variant:P.page===s?"default":"outline",size:"sm",onClick:()=>A(s),children:s},s)}),P.pages>5&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"px-2",children:"..."}),(0,t.jsx)(l.z,{variant:P.page===P.pages?"default":"outline",size:"sm",onClick:()=>A(P.pages),children:P.pages})]})]}),(0,t.jsx)(l.z,{variant:"outline",onClick:()=>A(P.page+1),disabled:P.page===P.pages,children:"Next"})]})]}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No restaurants found"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search criteria or browse all restaurants"}),G&&(0,t.jsx)(l.z,{onClick:L,children:"View all restaurants"})]})]}),(0,t.jsx)(b,{isOpen:y,onClose:()=>C(!1),onScan:e=>{try{let s=JSON.parse(e);s.restaurantId&&a.push("/restaurants/".concat(s.restaurantId))}catch(a){e.startsWith("http")?window.open(e,"_blank"):o({title:"QR Code Scanned",description:"Scanned: ".concat(e)})}},title:"Scan Restaurant QR Code"}),(0,t.jsx)(N.Vq,{open:Z,onOpenChange:E,children:(0,t.jsx)(N.cZ,{className:"sm:max-w-md max-h-[90vh] overflow-y-auto",children:z&&(0,t.jsx)(_,{restaurantName:z.name,onSubmit:K,onCancel:()=>E(!1)})})})]})}},932:function(e,a,s){"use strict";s.d(a,{_:function(){return o}});var t=s(1758),i=s(5295),n=s(7844),r=s(5897),c=s(8150);let l=(0,r.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=i.forwardRef((e,a)=>{let{className:s,...i}=e;return(0,t.jsx)(n.f,{ref:a,className:(0,c.cn)(l(),s),...i})});o.displayName=n.f.displayName}},function(e){e.O(0,[164,790,600,830,136,366,123,969,522,744],function(){return e(e.s=9185)}),_N_E=e.O()}]);