<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restaurants - RestaurantBook</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-md border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <a href="/" class="flex items-center space-x-2">
                        <i class="fas fa-utensils text-blue-600 text-xl"></i>
                        <span class="text-xl font-bold text-gray-900">RestaurantBook</span>
                    </a>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="/restaurants/" class="text-gray-700 hover:text-blue-600 px-3 py-2">Restaurants</a>
                    <a href="/login/" class="text-gray-700 hover:text-blue-600 px-3 py-2">Login</a>
                    <a href="/register/" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">Sign Up</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-900 mb-4">Discover Restaurants</h1>
            <p class="text-lg text-gray-600">Find the perfect dining experience for any occasion</p>
        </div>

        <!-- Search Bar -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-8">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-search mr-2"></i>Restaurant or Cuisine
                    </label>
                    <input type="text" id="searchQuery" placeholder="Search restaurants..." 
                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-map-marker-alt mr-2"></i>Location
                    </label>
                    <input type="text" id="searchLocation" placeholder="Enter location" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-calendar mr-2"></i>Date
                    </label>
                    <input type="date" id="searchDate" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Time</label>
                    <input type="time" id="searchTime" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-users mr-2"></i>Party Size
                    </label>
                    <input type="number" id="searchPartySize" min="1" max="20" value="2" 
                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
            </div>
            <div class="mt-6 text-center">
                <button onclick="performSearch()" 
                        class="bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors">
                    <i class="fas fa-search mr-2"></i>Search Restaurants
                </button>
            </div>
        </div>

        <!-- Filters Display -->
        <div id="activeFilters" class="hidden bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-filter text-blue-600"></i>
                    <span class="font-medium text-blue-900">Active filters:</span>
                    <span id="filterDisplay" class="text-sm text-blue-800"></span>
                </div>
                <button onclick="clearFilters()" 
                        class="text-blue-600 hover:text-blue-800 text-sm font-medium">
                    Clear all
                </button>
            </div>
        </div>

        <!-- Results Count -->
        <div class="mb-6">
            <p id="resultsCount" class="text-sm text-gray-600">
                Loading restaurants...
            </p>
        </div>

        <!-- Restaurant Grid -->
        <div id="restaurantGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Loading skeleton -->
            <div class="animate-pulse">
                <div class="bg-gray-300 h-48 rounded-lg mb-4"></div>
                <div class="space-y-2">
                    <div class="bg-gray-300 h-4 rounded w-3/4"></div>
                    <div class="bg-gray-300 h-3 rounded w-1/2"></div>
                </div>
            </div>
            <div class="animate-pulse">
                <div class="bg-gray-300 h-48 rounded-lg mb-4"></div>
                <div class="space-y-2">
                    <div class="bg-gray-300 h-4 rounded w-3/4"></div>
                    <div class="bg-gray-300 h-3 rounded w-1/2"></div>
                </div>
            </div>
            <div class="animate-pulse">
                <div class="bg-gray-300 h-48 rounded-lg mb-4"></div>
                <div class="space-y-2">
                    <div class="bg-gray-300 h-4 rounded w-3/4"></div>
                    <div class="bg-gray-300 h-3 rounded w-1/2"></div>
                </div>
            </div>
        </div>

        <!-- No Results -->
        <div id="noResults" class="hidden text-center py-12">
            <i class="fas fa-search text-6xl text-gray-300 mb-4"></i>
            <h3 class="text-xl font-semibold text-gray-700 mb-2">No restaurants found</h3>
            <p class="text-gray-500 mb-4">Try adjusting your search criteria or browse all restaurants</p>
            <button onclick="clearFilters()" 
                    class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700">
                View all restaurants
            </button>
        </div>
    </main>

    <script>
        // Mock restaurant data
        const restaurants = [
            {
                id: '1',
                name: 'Bella Vista',
                description: 'Italian restaurant serving authentic pasta and wood-fired pizzas',
                address: '123 Main Street, New York, NY 10001',
                cuisine: 'Italian',
                priceRange: '$$$',
                rating: 4.5,
                imageUrl: '/imgs/authentic_italian_pasta_dinner_wine_cozy_setting.jpg',
                isOpen: true,
                nextAvailableTime: '7:30 PM',
                distance: 0.8,
                reviews: 128
            },
            {
                id: '2',
                name: 'Sakura Sushi',
                description: 'Fresh sushi and sashimi with traditional Japanese ambiance',
                address: '456 Oak Avenue, New York, NY 10002',
                cuisine: 'Japanese',
                priceRange: '$$$$',
                rating: 4.8,
                imageUrl: '/imgs/modern_japanese_sushi_restaurant_bar_chefs.jpg',
                isOpen: true,
                nextAvailableTime: '8:00 PM',
                distance: 1.2,
                reviews: 256
            },
            {
                id: '3',
                name: 'Spice Route',
                description: 'Authentic Indian cuisine with aromatic spices and traditional flavors',
                address: '789 Pine Street, New York, NY 10003',
                cuisine: 'Indian',
                priceRange: '$$',
                rating: 4.3,
                imageUrl: '/imgs/authentic_indian_chicken_tikka_masala_rice_naan.jpg',
                isOpen: true,
                nextAvailableTime: '7:00 PM',
                distance: 0.5,
                reviews: 89
            },
            {
                id: '4',
                name: 'Le Petit Bistro',
                description: 'French cuisine in an intimate, elegant setting',
                address: '321 Elm Street, New York, NY 10004',
                cuisine: 'French',
                priceRange: '$$$$',
                rating: 4.7,
                imageUrl: '/imgs/classic_french_bistro_elegant_dining_room.jpg',
                isOpen: false,
                nextAvailableTime: 'Closed - Opens Tomorrow 6:00 PM',
                distance: 2.1,
                reviews: 167
            },
            {
                id: '5',
                name: 'Golden Dragon',
                description: 'Traditional Chinese cuisine with modern presentation',
                address: '654 Maple Drive, New York, NY 10005',
                cuisine: 'Chinese',
                priceRange: '$$',
                rating: 4.2,
                imageUrl: '/imgs/elegant_asian_fine_dining_restaurant_interior_luxury_decor.jpg',
                isOpen: true,
                nextAvailableTime: '7:45 PM',
                distance: 1.5,
                reviews: 203
            },
            {
                id: '6',
                name: 'Sunset Grill',
                description: 'American comfort food with a modern twist',
                address: '987 Cedar Lane, New York, NY 10006',
                cuisine: 'American',
                priceRange: '$$$',
                rating: 4.4,
                imageUrl: '/imgs/american_comfort_food_feast_family_restaurant.jpg',
                isOpen: true,
                nextAvailableTime: '6:45 PM',
                distance: 0.9,
                reviews: 145
            },
            {
                id: '7',
                name: 'Mediterranean Delights',
                description: 'Fresh Mediterranean dishes with organic ingredients',
                address: '147 Birch Road, New York, NY 10007',
                cuisine: 'Mediterranean',
                priceRange: '$$',
                rating: 4.6,
                imageUrl: '/imgs/elegant_upscale_fine_dining_restaurant_interior.jpg',
                isOpen: true,
                nextAvailableTime: '8:15 PM',
                distance: 1.8,
                reviews: 98
            },
            {
                id: '8',
                name: 'Taco Fiesta',
                description: 'Authentic Mexican street food and colorful atmosphere',
                address: '258 Walnut Street, New York, NY 10008',
                cuisine: 'Mexican',
                priceRange: '$',
                rating: 4.1,
                imageUrl: '/imgs/luxury_restaurant_interior_golden_chandelier_elegant_setting.jpg',
                isOpen: true,
                nextAvailableTime: '7:30 PM',
                distance: 1.1,
                reviews: 178
            },
            {
                id: '9',
                name: 'Vine & Dine',
                description: 'Wine bar with small plates and extensive wine selection',
                address: '369 Cherry Street, New York, NY 10009',
                cuisine: 'Wine Bar',
                priceRange: '$$$',
                rating: 4.5,
                imageUrl: '/imgs/elegant_french_bistro_wine_bar.jpg',
                isOpen: true,
                nextAvailableTime: '8:30 PM',
                distance: 0.7,
                reviews: 112
            },
            {
                id: '10',
                name: 'Farm Table',
                description: 'Farm-to-table dining with seasonal American cuisine',
                address: '741 Spruce Avenue, New York, NY 10010',
                cuisine: 'American',
                priceRange: '$$$',
                rating: 4.8,
                imageUrl: '/imgs/family_friendly_american_comfort_food_spread.jpg',
                isOpen: true,
                nextAvailableTime: '6:00 PM',
                distance: 1.4,
                reviews: 234
            },
            {
                id: '11',
                name: 'Pasta & Co',
                description: 'Fresh handmade pasta with authentic Italian recipes',
                address: '852 Willow Street, New York, NY 10011',
                cuisine: 'Italian',
                priceRange: '$$',
                rating: 4.4,
                imageUrl: '/imgs/delicious_authentic_italian_spaghetti_pasta_fork.jpg',
                isOpen: true,
                nextAvailableTime: '7:15 PM',
                distance: 1.6,
                reviews: 156
            },
            {
                id: '12',
                name: 'Riverside Steakhouse',
                description: 'Premium steaks with river views and sophisticated ambiance',
                address: '963 Poplar Drive, New York, NY 10012',
                cuisine: 'Steakhouse',
                priceRange: '$$$$',
                rating: 4.7,
                imageUrl: '/imgs/delicious_shrimp_pasta_outdoor_dining_italian.jpg',
                isOpen: true,
                nextAvailableTime: '8:00 PM',
                distance: 2.3,
                reviews: 189
            }
        ];

        let filteredRestaurants = [...restaurants];

        function performSearch() {
            const query = document.getElementById('searchQuery').value.toLowerCase();
            const location = document.getElementById('searchLocation').value.toLowerCase();
            
            filteredRestaurants = restaurants.filter(restaurant => {
                const matchesQuery = !query || 
                    restaurant.name.toLowerCase().includes(query) ||
                    restaurant.description.toLowerCase().includes(query) ||
                    restaurant.cuisine.toLowerCase().includes(query);
                
                const matchesLocation = !location || 
                    restaurant.address.toLowerCase().includes(location);
                
                return matchesQuery && matchesLocation;
            });

            // Sort by rating
            filteredRestaurants.sort((a, b) => b.rating - a.rating);

            renderRestaurants();
            updateActiveFilters();
        }

        function clearFilters() {
            document.getElementById('searchQuery').value = '';
            document.getElementById('searchLocation').value = '';
            document.getElementById('searchDate').value = '';
            document.getElementById('searchTime').value = '';
            document.getElementById('searchPartySize').value = '2';
            
            filteredRestaurants = [...restaurants];
            renderRestaurants();
            updateActiveFilters();
        }

        function updateActiveFilters() {
            const query = document.getElementById('searchQuery').value;
            const location = document.getElementById('searchLocation').value;
            const activeFilters = [];

            if (query) activeFilters.push(`Query: ${query}`);
            if (location) activeFilters.push(`Location: ${location}`);

            const filterDisplay = document.getElementById('filterDisplay');
            const activeFiltersDiv = document.getElementById('activeFilters');

            if (activeFilters.length > 0) {
                filterDisplay.textContent = activeFilters.join(', ');
                activeFiltersDiv.classList.remove('hidden');
            } else {
                activeFiltersDiv.classList.add('hidden');
            }
        }

        function renderRestaurants() {
            const grid = document.getElementById('restaurantGrid');
            const noResults = document.getElementById('noResults');
            const resultsCount = document.getElementById('resultsCount');

            if (filteredRestaurants.length === 0) {
                grid.classList.add('hidden');
                noResults.classList.remove('hidden');
                resultsCount.textContent = 'No restaurants found';
                return;
            }

            grid.classList.remove('hidden');
            noResults.classList.add('hidden');
            resultsCount.textContent = `Showing ${filteredRestaurants.length} of ${restaurants.length} restaurants`;

            grid.innerHTML = filteredRestaurants.map(restaurant => `
                <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow">
                    <div class="aspect-video bg-gray-200 relative">
                        <img src="${restaurant.imageUrl}" alt="${restaurant.name}" 
                             class="w-full h-full object-cover"
                             onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDIwMCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjIwMCIgaGVpZ2h0PSIxMjAiIGZpbGw9IiNGM0Y0RjYiLz48dGV4dCB4PSIxMDAiIHk9IjYwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjOTk5IiBmb250LXNpemU9IjE0Ij7igKIgUmVzdGF1cmFudCBJbWFnZSDigKI8L3RleHQ+PC9zdmc+'">
                        <div class="absolute top-2 right-2">
                            <span class="${restaurant.isOpen ? 'bg-green-500' : 'bg-red-500'} text-white text-xs px-2 py-1 rounded">
                                ${restaurant.isOpen ? 'Open' : 'Closed'}
                            </span>
                        </div>
                    </div>
                    <div class="p-4">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="text-lg font-semibold text-gray-900">${restaurant.name}</h3>
                            <span class="text-sm font-medium text-gray-600">${restaurant.priceRange}</span>
                        </div>
                        <p class="text-gray-600 text-sm mb-2">${restaurant.cuisine}</p>
                        <p class="text-gray-500 text-sm mb-3 line-clamp-2">${restaurant.description}</p>
                        <div class="flex justify-between items-center mb-3">
                            <div class="flex items-center space-x-1">
                                <span class="text-yellow-400">★</span>
                                <span class="text-sm font-medium">${restaurant.rating}</span>
                                <span class="text-sm text-gray-500">(${restaurant.reviews})</span>
                            </div>
                            <div class="text-sm text-gray-500">
                                ${restaurant.distance} mi away
                            </div>
                        </div>
                        <div class="flex space-x-2">
                            <button onclick="viewRestaurant('${restaurant.id}')" 
                                    class="flex-1 bg-blue-600 text-white px-3 py-2 rounded text-sm hover:bg-blue-700 transition-colors">
                                View Details
                            </button>
                            <button onclick="bookTable('${restaurant.id}')" 
                                    class="flex-1 bg-green-600 text-white px-3 py-2 rounded text-sm hover:bg-green-700 transition-colors">
                                Book Table
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function viewRestaurant(id) {
            const restaurant = restaurants.find(r => r.id === id);
            if (restaurant) {
                alert(`Viewing details for ${restaurant.name}\n\n${restaurant.description}\n\nAddress: ${restaurant.address}\nCuisine: ${restaurant.cuisine}\nRating: ${restaurant.rating}/5\nNext available: ${restaurant.nextAvailableTime}`);
            }
        }

        function bookTable(id) {
            const restaurant = restaurants.find(r => r.id === id);
            const date = document.getElementById('searchDate').value;
            const time = document.getElementById('searchTime').value;
            const partySize = document.getElementById('searchPartySize').value;

            if (restaurant) {
                const details = `Booking request for ${restaurant.name}\n\nDate: ${date || 'Not selected'}\nTime: ${time || 'Not selected'}\nParty Size: ${partySize}\n\n(In a real app, this would open a booking form)`;
                alert(details);
            }
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                renderRestaurants();
            }, 1000); // Simulate loading time

            // Add enter key support
            document.getElementById('searchQuery').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') performSearch();
            });
            document.getElementById('searchLocation').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') performSearch();
            });
        });

        console.log('✅ Restaurant search page loaded successfully!');
    </script>
</body>
</html>