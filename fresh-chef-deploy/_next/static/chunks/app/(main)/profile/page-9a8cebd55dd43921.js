(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[86],{7539:function(e,s,t){Promise.resolve().then(t.bind(t,8265))},8265:function(e,s,t){"use strict";t.r(s),t.d(s,{ProfileClient:function(){return P}});var a=t(7437),r=t(7970),l=t(9598),i=t(3611),n=t(708),c=t(1750),d=t(7972),x=t(1541),o=t(3008),m=t(9036),u=t(8203),h=t(1295),g=t(2741),j=t(6142),f=t(9409),p=t(5883),N=t(6712),v=t(7980),y=t(7810),b=t(4033),w=t(2265),k=t(798),C=t(2188),Z=t(434),S=t(6691),O=t.n(S);function P(){let{user:e,logout:s}=(0,r.useAuth)(),t=(0,b.useRouter)(),{toast:S}=(0,k.pm)(),{items:P}=(0,Z.useCart)(),z=(0,w.useRef)(null),[T,E]=(0,w.useState)(null),[A,R]=(0,w.useState)([]),[Y,q]=(0,w.useState)([]),[D,I]=(0,w.useState)(!1);(0,w.useEffect)(()=>{if(e){let s=(0,C.et)(e.id,e.email,e.firstName,e.lastName);E(s),R((0,C.SM)()),q((0,C.KJ)())}},[e]);let F=async e=>{var s;let t=null===(s=e.target.files)||void 0===s?void 0:s[0];if(t){if(!t.type.startsWith("image/")){S({title:"Invalid File",description:"Please select an image file",variant:"destructive"});return}I(!0);try{let e=await (0,C.eO)(t);E(s=>s?{...s,profilePhoto:e}:null),S({title:"Success",description:"Profile photo updated successfully"})}catch(e){S({title:"Error",description:e instanceof Error?e.message:"Failed to upload photo",variant:"destructive"})}finally{I(!1)}}};return e?T?(0,a.jsx)("div",{className:"min-h-screen pb-20",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"My Profile"}),(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-6 mb-6",children:[(0,a.jsx)(l.Zb,{className:"lg:col-span-1",children:(0,a.jsx)(l.aY,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,a.jsxs)("div",{className:"relative mb-4",children:[T.profilePhoto?(0,a.jsx)("div",{className:"w-24 h-24 rounded-full overflow-hidden shadow-lg",children:(0,a.jsx)(O(),{src:T.profilePhoto,alt:"Profile",width:96,height:96,className:"object-cover"})}):(0,a.jsx)("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center shadow-lg",children:(0,a.jsx)(d.Z,{className:"h-12 w-12 text-white"})}),(0,a.jsx)(i.z,{size:"sm",className:"absolute bottom-0 right-0 rounded-full h-8 w-8 p-0",onClick:()=>{var e;return null===(e=z.current)||void 0===e?void 0:e.click()},disabled:D,children:(0,a.jsx)(x.Z,{className:"h-4 w-4"})}),(0,a.jsx)("input",{ref:z,type:"file",accept:"image/*",onChange:F,className:"hidden"})]}),(0,a.jsxs)("h2",{className:"text-2xl font-semibold mb-1",children:[e.firstName," ",e.lastName]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[e.emailVerified&&(0,a.jsxs)(n.C,{variant:"default",className:"bg-green-100 text-green-700",children:[(0,a.jsx)(o.Z,{className:"h-3 w-3 mr-1"}),"Verified"]}),"ADMIN"===e.role&&(0,a.jsxs)(n.C,{variant:"default",className:"bg-red-100 text-red-700",children:[(0,a.jsx)(m.Z,{className:"h-3 w-3 mr-1"}),"Admin"]})]}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4",children:e.email}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 w-full mb-4",children:[(0,a.jsxs)("div",{className:"text-center p-3 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:T.statistics.totalOrders}),(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Orders"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-green-50 dark:bg-green-950 rounded-lg",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:T.statistics.totalBookings}),(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Bookings"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-purple-50 dark:bg-purple-950 rounded-lg",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:T.preferences.favoriteRestaurants.length}),(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Favorites"})]}),(0,a.jsxs)("div",{className:"text-center p-3 bg-orange-50 dark:bg-orange-950 rounded-lg",children:[(0,a.jsxs)("p",{className:"text-lg font-bold text-orange-600",children:["$",T.statistics.totalSpent.toFixed(0)]}),(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Total Spent"})]})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4"}),"Member since ",new Date(T.joinDate).toLocaleDateString("en-US",{month:"long",year:"numeric"})]})]})})}),(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)(c.Tabs,{defaultValue:"overview",className:"w-full",children:[(0,a.jsxs)(c.TabsList,{className:"grid w-full grid-cols-4",children:[(0,a.jsx)(c.TabsTrigger,{value:"overview",children:"Overview"}),(0,a.jsx)(c.TabsTrigger,{value:"activity",children:"Activity"}),(0,a.jsx)(c.TabsTrigger,{value:"preferences",children:"Preferences"}),(0,a.jsx)(c.TabsTrigger,{value:"settings",children:"Settings"})]}),(0,a.jsxs)(c.TabsContent,{value:"overview",className:"space-y-4",children:[(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{children:"Contact Information"})}),(0,a.jsxs)(l.aY,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-gray-50 dark:bg-gray-900",children:[(0,a.jsx)(h.Z,{className:"h-5 w-5 text-blue-500"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Email"}),(0,a.jsx)("p",{className:"font-medium",children:e.email})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-gray-50 dark:bg-gray-900",children:[(0,a.jsx)(g.Z,{className:"h-5 w-5 text-gray-400"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Phone"}),(0,a.jsx)("p",{className:"text-gray-500",children:T.phone||"Not provided"})]}),(0,a.jsx)(i.z,{size:"sm",variant:"ghost",onClick:()=>t.push("/settings"),children:T.phone?"Edit":"Add"})]})]})]}),P.length>0&&(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsxs)(l.ll,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Current Cart"}),(0,a.jsxs)(n.C,{children:[P.length," items"]})]})}),(0,a.jsxs)(l.aY,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[P.slice(0,3).map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,a.jsxs)("span",{children:[e.quantity,"x ",e.name]}),(0,a.jsxs)("span",{className:"font-medium",children:["$",(e.price*e.quantity).toFixed(2)]})]},e.id)),P.length>3&&(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["+ ",P.length-3," more items"]})]}),(0,a.jsx)(i.z,{onClick:()=>t.push("/cart"),className:"w-full mt-4",children:"View Cart"})]})]}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{children:"Quick Actions"})}),(0,a.jsxs)(l.aY,{className:"space-y-2",children:[(0,a.jsxs)(i.z,{variant:"outline",className:"w-full justify-start",onClick:()=>t.push("/bookings"),children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"View My Bookings"]}),(0,a.jsxs)(i.z,{variant:"outline",className:"w-full justify-start",onClick:()=>t.push("/restaurants"),children:[(0,a.jsx)(j.Z,{className:"h-4 w-4 mr-2"}),"Browse Restaurants"]}),(0,a.jsxs)(i.z,{variant:"outline",className:"w-full justify-start",onClick:()=>t.push("/settings"),children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Account Settings"]}),(0,a.jsxs)(i.z,{variant:"outline",className:"w-full justify-start text-red-600",onClick:()=>{s(),t.push("/login")},children:[(0,a.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Log Out"]})]})]})]}),(0,a.jsxs)(c.TabsContent,{value:"activity",className:"space-y-4",children:[(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(N.Z,{className:"h-5 w-5"}),"Recent Orders (",A.length,")"]})}),(0,a.jsx)(l.aY,{children:0===A.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(N.Z,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),(0,a.jsx)("p",{children:"No orders yet"}),(0,a.jsx)(i.z,{variant:"link",onClick:()=>t.push("/restaurants"),children:"Start ordering"})]}):(0,a.jsx)("div",{className:"space-y-3",children:A.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-center p-3 rounded-lg bg-gray-50 dark:bg-gray-900",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.restaurantName}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[new Date(e.date).toLocaleDateString()," â€¢ ",e.items.length," items"]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"font-semibold",children:["$",e.total.toFixed(2)]}),(0,a.jsx)(n.C,{variant:"completed"===e.status?"default":"pending"===e.status?"secondary":"destructive",children:e.status})]})]},e.id))})})]}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"h-5 w-5"}),"Booking History (",Y.length,")"]})}),(0,a.jsx)(l.aY,{children:0===Y.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(u.Z,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),(0,a.jsx)("p",{children:"No bookings yet"}),(0,a.jsx)(i.z,{variant:"link",onClick:()=>t.push("/bookings"),children:"Make a reservation"})]}):(0,a.jsx)("div",{className:"space-y-3",children:Y.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"flex justify-between items-center p-3 rounded-lg bg-gray-50 dark:bg-gray-900",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.restaurantName}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[new Date(e.date).toLocaleDateString()," at ",e.time]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-sm",children:[e.partySize," guests"]}),(0,a.jsx)(n.C,{variant:"confirmed"===e.status?"default":"completed"===e.status?"secondary":"destructive",children:e.status})]})]},e.id))})})]})]}),(0,a.jsxs)(c.TabsContent,{value:"preferences",className:"space-y-4",children:[(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(v.Z,{className:"h-5 w-5"}),"Cuisine Preferences"]})}),(0,a.jsx)(l.aY,{children:0===T.preferences.cuisinePreferences.length?(0,a.jsxs)("div",{className:"text-center py-6 text-gray-500",children:[(0,a.jsx)("p",{className:"mb-3",children:"No cuisine preferences set"}),(0,a.jsx)(i.z,{variant:"outline",onClick:()=>t.push("/settings"),children:"Set Preferences"})]}):(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:T.preferences.cuisinePreferences.map(e=>(0,a.jsx)(n.C,{variant:"secondary",children:e},e))})})]}),(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsxs)(l.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(y.Z,{className:"h-5 w-5"}),"Favorite Restaurants"]})}),(0,a.jsx)(l.aY,{children:0===T.preferences.favoriteRestaurants.length?(0,a.jsxs)("div",{className:"text-center py-6 text-gray-500",children:[(0,a.jsx)(y.Z,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),(0,a.jsx)("p",{children:"No favorite restaurants yet"}),(0,a.jsx)(i.z,{variant:"link",onClick:()=>t.push("/restaurants"),children:"Explore restaurants"})]}):(0,a.jsx)("div",{className:"space-y-2",children:T.preferences.favoriteRestaurants.map(e=>(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-gray-50 dark:bg-gray-900",children:["Restaurant ",e]},e))})})]})]}),(0,a.jsx)(c.TabsContent,{value:"settings",className:"space-y-4",children:(0,a.jsxs)(l.Zb,{children:[(0,a.jsx)(l.Ol,{children:(0,a.jsx)(l.ll,{children:"Account Settings"})}),(0,a.jsxs)(l.aY,{className:"space-y-3",children:[(0,a.jsxs)(i.z,{variant:"outline",className:"w-full justify-start",onClick:()=>t.push("/settings"),children:[(0,a.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Manage Settings"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Update your password, notification preferences, privacy settings, and more."})]})]})})]})})]})]})}):null:(0,a.jsx)("div",{className:"min-h-screen pb-20 flex items-center justify-center",children:(0,a.jsx)(l.Zb,{className:"w-full max-w-md",children:(0,a.jsxs)(l.aY,{className:"pt-6 text-center",children:[(0,a.jsx)(d.Z,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),(0,a.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Sign in to view your profile"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Access your bookings, orders, and preferences"}),(0,a.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,a.jsx)(i.z,{onClick:()=>t.push("/login"),children:"Log In"}),(0,a.jsx)(i.z,{variant:"outline",onClick:()=>t.push("/register"),children:"Register"})]})]})})})}},708:function(e,s,t){"use strict";t.d(s,{C:function(){return n}});var a=t(7437);t(2265);var r=t(6061),l=t(1628);let i=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{className:(0,l.cn)(i({variant:t}),s),...r})}},9668:function(e,s,t){"use strict";function a(e){let{src:s,width:t,quality:a}=e;return s}t.r(s),t.d(s,{default:function(){return a}})},434:function(e,s,t){"use strict";t.r(s),t.d(s,{CartProvider:function(){return n},useCart:function(){return c}});var a=t(7437),r=t(2265),l=t(798);let i=(0,r.createContext)(void 0);function n(e){let{children:s}=e,[t,n]=(0,r.useState)([]),[c,d]=(0,r.useState)(!1),{toast:x}=(0,l.pm)();(0,r.useEffect)(()=>{d(!0);{let e=localStorage.getItem("restaurant-cart");if(e)try{let s=JSON.parse(e);n(s)}catch(e){console.error("Error loading cart:",e)}}},[]),(0,r.useEffect)(()=>{c&&localStorage.setItem("restaurant-cart",JSON.stringify(t))},[t,c]);let o=e=>{let s=t.find(s=>s.id===e);s&&x({title:"Removed from Cart",description:"".concat(s.name," has been removed from your cart")}),n(s=>s.filter(s=>s.id!==e))},m=()=>t.reduce((e,s)=>e+s.price*s.quantity,0),u=()=>.08*m();return(0,a.jsx)(i.Provider,{value:{items:t,addItem:e=>{n(s=>{let t=s.find(s=>s.id===e.id);return t?(x({title:"Cart Updated",description:"".concat(e.name," quantity increased")}),s.map(s=>s.id===e.id?{...s,quantity:s.quantity+1}:s)):(x({title:"Added to Cart",description:"".concat(e.name," has been added to your cart")}),[...s,{...e,quantity:1}])})},removeItem:o,updateQuantity:(e,s)=>{if(s<=0){o(e);return}n(t=>t.map(t=>t.id===e?{...t,quantity:s}:t))},clearCart:()=>{n([]),x({title:"Cart Cleared",description:"All items have been removed from your cart"})},getItemCount:()=>t.reduce((e,s)=>e+s.quantity,0),getSubtotal:m,getTax:u,getTotal:()=>m()+u()},children:s})}function c(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}}},function(e){e.O(0,[6723,6691,4522,2243,9859,2971,2472,1744],function(){return e(e.s=7539)}),_N_E=e.O()}]);