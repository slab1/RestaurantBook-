(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7254],{5800:function(e,t,a){Promise.resolve().then(a.bind(a,573)),Promise.resolve().then(a.bind(a,2832)),Promise.resolve().then(a.bind(a,1750))},573:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return M}});var s=a(7437),n=a(2265),r=a(9598),i=a(708),l=a(3611),c=a(1750),o=a(7532),d=a(105),u=a(6704),m=a(8783),g=a(5688),h=a(5750),x=a(2369),p=a(5340),f=a(6654),v=a(1298),y=a(9168),j=a(6142),b=a(8957),N=a(3733),w=a(3578),R=a(2183),P=a(1332),T=a(8210),A=a(2292),C=a(8218);let E={loyaltyTransaction:{findMany:()=>Promise.resolve([])}},S=["Abia","Adamawa","Akwa Ibom","Anambra","Bauchi","Bayelsa","Benue","Borno","Cross River","Delta","Ebonyi","Edo","Ekiti","Enugu","FCT","Gombe","Imo","Jigawa","Kaduna","Kano","Katsina","Kebbi","Kogi","Kwara","Lagos","Nasarawa","Niger","Ogun","Ondo","Osun","Oyo","Plateau","Rivers","Sokoto","Taraba","Yobe","Zamfara"],I=["en","ha","yo","ig"];class O{async generateComprehensiveAnalytics(){let[e,t,a,s,n,r,i,l,c]=await Promise.all([this.calculateProgramPerformanceMetrics(),this.calculateUserEngagementTracking(),this.calculateTierDistributionAnalytics(),this.calculatePointsFlowAnalysis(),this.calculateAchievementCompletionRates(),this.calculatePartnerPerformanceTracking(),this.calculateROICalculations(),this.calculateNigerianMarketInsights(),this.calculateLocalBusinessGrowth()]),o=await this.generateRecommendations({program:e,engagement:t,tiers:a,points:s,achievements:n,partners:r,roi:i,nigerianMarket:l,localBusiness:c}),d=await this.identifyTrends({program:e,engagement:t,tiers:a,points:s,achievements:n,partners:r,roi:i,nigerianMarket:l,localBusiness:c});return{program:e,engagement:t,tiers:a,points:s,achievements:n,partners:r,roi:i,nigerianMarket:l,localBusiness:c,recommendations:o,trends:d}}async calculateProgramPerformanceMetrics(){let{start:e,end:t}=this.config.dateRange,a=await E.user.count({where:{loyaltyPoints:{gt:0},...this.config.restaurantId&&{bookings:{some:{restaurantId:this.config.restaurantId}}}}}),s=await E.user.count({where:{loyaltyTransactions:{some:{createdAt:{gte:e,lte:t}}},loyaltyPoints:{gt:0}}}),n=await E.user.count({where:{createdAt:{gte:e,lte:t},loyaltyPoints:{gt:0}}}),r=(0,w.Z)(new Date,90),i=await E.user.count({where:{loyaltyPoints:{gt:0},loyaltyTransactions:{none:{createdAt:{gte:r}}}}}),l=await E.loyaltyTransaction.aggregate({_sum:{points:!0},where:{type:{in:["EARNED","BONUS","TRANSFERRED"]},createdAt:{gte:e,lte:t}}}),c=await E.loyaltyTransaction.aggregate({_sum:{points:!0},where:{type:"REDEEMED",createdAt:{gte:e,lte:t}}}),o=await this.calculateRFMSegmentation(),d=await this.calculateCustomerLifetimeValue();return{totalUsers:a,activeUsers:s,inactiveUsers:i,newUsers:n,churnedUsers:a-s,retentionRate:a>0?s/a*100:0,avgPointsPerUser:a>0?(l._sum.points||0)/a:0,totalPointsIssued:l._sum.points||0,totalPointsRedeemed:Math.abs(c._sum.points||0),pointsRedemptionRate:l._sum.points?Math.abs(c._sum.points||0)/l._sum.points*100:0,programParticipationRate:await this.calculateProgramParticipationRate(),conversionRate:await this.calculateConversionRate(),customerLifetimeValue:d,averageOrderValue:await this.calculateAverageOrderValue(),frequency:o.averageFrequency,recency:o.averageRecency,monetaryValue:o.averageMonetary,rfmScore:o}}async calculateUserEngagementTracking(){let{start:e,end:t}=this.config.dateRange;(0,C.Z)(t,e);let a=await this.calculateDailyActiveUsers(e,t),s=await this.calculateWeeklyActiveUsers(e,t),n=await this.calculateMonthlyActiveUsers(e,t),r=await E.userInteraction.groupBy({by:["type"],_count:!0,where:{createdAt:{gte:e,lte:t}}}),i=r.reduce((e,t)=>e+t._count,0),l=await this.calculateSocialEngagement(e,t),c=await this.calculateAppUsageMetrics(e,t),o=await this.calculateEngagementScore(e,t);return{dailyActiveUsers:a,weeklyActiveUsers:s,monthlyActiveUsers:n,userInteractions:{total:i,byType:Object.fromEntries(r.map(e=>[e.type,e._count])),byChannel:await this.calculateInteractionsByChannel(e,t)},socialEngagement:l,appUsage:c,engagementScore:o}}async calculateTierDistributionAnalytics(){let{start:e,end:t}=this.config.dateRange,a=await this.calculateTierMetrics(),s=Object.values(a).reduce((e,t)=>e+t.count,0),n={BRONZE:a.BRONZE.count,SILVER:a.SILVER.count,GOLD:a.GOLD.count,PLATINUM:a.PLATINUM.count},r={BRONZE:s>0?n.BRONZE/s*100:0,SILVER:s>0?n.SILVER/s*100:0,GOLD:s>0?n.GOLD/s*100:0,PLATINUM:s>0?n.PLATINUM/s*100:0},i=await this.calculateTierProgression(e,t),l={strategy:this.generateTierStrategy(a),improvements:this.generateTierImprovements(a)};return{totalUsers:s,distribution:n,distributionPercentage:r,tierProgression:i,tierMetrics:a,tierRecommendations:l}}async calculatePointsFlowAnalysis(){let{start:e,end:t}=this.config.dateRange,a=await this.calculateIssuedPoints(e,t),s=await this.calculateRedeemedPoints(e,t),n=await this.calculateExpiredPoints(e,t),r=await this.calculatePointsVelocity(e,t),i=await this.calculatePointsEconomics();return{issuedPoints:a,redeemedPoints:s,expiredPoints:n,pointsVelocity:r,pointsEconomics:i}}async calculateAchievementCompletionRates(){let e=await this.getAvailableAchievements(),t=await this.calculateAchievementCompletions();return{totalAchievements:e.length,completedAchievements:t.completed,completionRate:e.length>0?t.completed/e.length*100:0,completionByCategory:t.byCategory,completionByType:t.byType,achievements:t.achievements,milestoneAchievements:{significant:this.identifyMilestoneAchievements(t)}}}async calculatePartnerPerformanceTracking(){let e=await this.getPartnerRestaurants(),t={};for(let a of e)t[a.id]=await this.calculatePartnerMetrics(a.id);let a=this.identifyTopPerformers(t),s=await this.calculatePartnerROI(t);return{totalPartners:e.length,activePartners:e.filter(e=>{var a;return(null===(a=t[e.id])||void 0===a?void 0:a.userCount)>0}).length,partnerMetrics:t,topPerformers:a,partnerROI:s}}async calculateROICalculations(){let e=await this.calculateTotalInvestment(),t=await this.calculateTotalReturns(),a=await this.calculateROIBreakdown(),s=await this.calculateCustomerAcquisitionCost(),n=await this.calculateCustomerLifetimeValue(),r=s>0?this.calculatePaybackPeriod(s,n):0;return{totalInvestment:e,totalReturns:t,netROI:e>0?(t-e)/e*100:0,roiBreakdown:a,customerAcquisitionCost:s,customerLifetimeValue:n,paybackPeriod:r,profitMarginImprovement:await this.calculateProfitMarginImprovement(),revenueAttribution:await this.calculateRevenueAttribution(),costAnalysis:await this.calculateCostAnalysis()}}async calculateNigerianMarketInsights(){let e=await this.calculateRegionalDistribution(),t=await this.calculateLanguagePreferences(),a=await this.calculateCulturalEvents(),s=await this.calculateEconomicIndicators(),n=await this.calculateCompetitiveAnalysis();return{regionalDistribution:e,languagePreferences:t,culturalEvents:a,economicIndicators:s,competitiveAnalysis:n}}async calculateLocalBusinessGrowth(){let e=await this.calculateMerchantGrowth(),t=await this.calculateJobCreation(),a=await this.calculateEconomicImpact(),s=await this.calculateDigitalAdoption(),n=await this.calculateScalingMetrics();return{merchantGrowth:e,jobCreation:t,economicImpact:a,digitalAdoption:s,scalingMetrics:n}}async calculateRFMSegmentation(){let e=await E.user.findMany({select:{loyaltyTransactions:{select:{createdAt:!0,points:!0},where:{type:"EARNED"},orderBy:{createdAt:"desc"}},bookings:{select:{totalAmount:!0},where:{status:"COMPLETED"}},lastLoginAt:!0,createdAt:!0},take:1e3}),t=0,a=0,s=0,n=0,r={R1:0,R2:0,R3:0,R4:0,R5:0};for(let i of e){if(0===i.loyaltyTransactions.length)continue;let e=i.loyaltyTransactions.length,l=i.lastLoginAt?(0,C.Z)(new Date,i.lastLoginAt):999,c=i.bookings.reduce((e,t)=>e+t.totalAmount,0);if(e>0&&l<365){t+=e,a+=l,s+=c,n++;let i=e>=10?5:e>=5?4:e>=2?3:2,o=l<=30?5:l<=90?4:l<=180?3:2,d=c>=5e4?5:c>=2e4?4:c>=1e4?3:2;"".concat(i).concat(o).concat(d),r["R".concat(i)]++}}return{average:n>0?(t+a+s)/n/1e3:0,distribution:Object.fromEntries(Object.entries(r).map(e=>{let[t,a]=e;return[t,n>0?a/n*100:0]})),averageFrequency:n>0?t/n:0,averageRecency:n>0?a/n:0,averageMonetary:n>0?s/n:0}}async calculateCustomerLifetimeValue(){let e=await this.calculateAverageOrderValue();return 24*e}async calculateAverageOrderValue(){let e=await E.booking.aggregate({_avg:{totalAmount:!0},where:{status:"COMPLETED",totalAmount:{gt:0}}});return e._avg.totalAmount||0}async calculateDailyActiveUsers(e,t){let a=(0,C.Z)(t,e),s={};for(let e=0;e<=a;e++){let n=(0,A.Z)((0,w.Z)(t,a-e),"yyyy-MM-dd"),r=(0,P.Z)((0,w.Z)(t,a-e)),i=(0,T.Z)((0,w.Z)(t,a-e)),l=await E.user.count({where:{loyaltyTransactions:{some:{createdAt:{gte:r,lte:i}}}}});s[n]=l}return s}async calculateWeeklyActiveUsers(e,t){let a=Math.ceil((0,C.Z)(t,e)/7),s={};for(let e=0;e<a;e++){let n=(0,w.Z)(t,(a-e)*7),r=(0,w.Z)(t,(a-e-1)*7-1),i=(0,A.Z)(n,"yyyy-MM-dd"),l=await E.user.count({where:{loyaltyTransactions:{some:{createdAt:{gte:n,lte:r}}}}});s[i]=l}return s}async calculateMonthlyActiveUsers(e,t){let a=Math.ceil((0,C.Z)(t,e)/30),s={};for(let e=0;e<a;e++){let n=(0,R.Z)(t,a-e),r=(0,R.Z)(t,a-e-1),i=(0,A.Z)(n,"yyyy-MM"),l=await E.user.count({where:{loyaltyTransactions:{some:{createdAt:{gte:n,lte:r}}}}});s[i]=l}return s}async calculateSocialEngagement(e,t){let[a,s,n,r]=await Promise.all([E.socialShare.count({where:{sharedAt:{gte:e,lte:t}}}),E.review.count({where:{createdAt:{gte:e,lte:t}}}),E.booking.count({where:{status:"COMPLETED",createdAt:{gte:e,lte:t}}}),E.referral.count({where:{createdAt:{gte:e,lte:t}}})]);return{shares:a,reviews:s,checkIns:n,referrals:r}}async calculateAppUsageMetrics(e,t){let a=await E.userSession.count({where:{lastActivity:{gte:e,lte:t}}}),s=await E.analyticsEvent.count({where:{createdAt:{gte:e,lte:t}}});return{sessions:a,sessionDuration:15,bounceRate:25,pageViews:s}}async calculateEngagementScore(e,t){let a=await E.user.findMany({select:{id:!0,loyaltyTransactions:{select:{id:!0},where:{createdAt:{gte:e,lte:t}}},userInteractions:{select:{id:!0},where:{createdAt:{gte:e,lte:t}}},reviews:{select:{id:!0},where:{createdAt:{gte:e,lte:t}}},bookings:{select:{id:!0},where:{createdAt:{gte:e,lte:t}}}}}),s=a.map(e=>{let t=10*e.loyaltyTransactions.length,a=5*e.userInteractions.length,s=15*e.reviews.length,n=20*e.bookings.length;return t+a+s+n}),n=s.length>0?s.reduce((e,t)=>e+t,0)/s.length:0;return{average:n,distribution:{low:s.filter(e=>e<25).length,medium:s.filter(e=>e>=25&&e<75).length,high:s.filter(e=>e>=75).length}}}async calculateInteractionsByChannel(e,t){return{app:60,web:25,sms:10,email:5}}async calculateTierMetrics(){let e=await E.user.findMany({select:{id:!0,loyaltyPoints:!0,totalSpent:!0,bookings:{select:{id:!0},where:{status:"COMPLETED"}}}}),t={BRONZE:{count:0,avgPoints:0,avgSpending:0,avgOrders:0,retentionRate:0},SILVER:{count:0,avgPoints:0,avgSpending:0,avgOrders:0,retentionRate:0},GOLD:{count:0,avgPoints:0,avgSpending:0,avgOrders:0,retentionRate:0},PLATINUM:{count:0,avgPoints:0,avgSpending:0,avgOrders:0,retentionRate:0}};for(let a of e){let e=this.calculateUserTier(a.loyaltyPoints,a.totalSpent);t[e].count++,t[e].avgPoints+=a.loyaltyPoints,t[e].avgSpending+=a.totalSpent,t[e].avgOrders+=a.bookings.length}for(let e of Object.keys(t))t[e].count>0&&(t[e].avgPoints=t[e].avgPoints/t[e].count,t[e].avgSpending=t[e].avgSpending/t[e].count,t[e].avgOrders=t[e].avgOrders/t[e].count,t[e].retentionRate=await this.calculateTierRetentionRate(e));return t}calculateUserTier(e,t){return t>=1e5||e>=1e4?"PLATINUM":t>=5e4||e>=5e3?"GOLD":t>=2e4||e>=2e3?"SILVER":"BRONZE"}async calculateTierProgression(e,t){return{upgrades:150,downgrades:25,avgTimeToUpgrade:45,churnRateByTier:{BRONZE:15,SILVER:8,GOLD:4,PLATINUM:2}}}generateTierStrategy(e){let t=e.BRONZE.count,a=e.SILVER.count,s=e.GOLD.count,n=e.PLATINUM.count;return t>a+s+n?"Focus on converting Bronze users to Silver tier through targeted campaigns and incentives.":s<a?"Develop premium rewards and exclusive benefits to encourage Silver to Gold tier progression.":"Maintain current tier structure while enhancing benefits for Platinum members."}generateTierImprovements(e){let t=[];return e.BRONZE.count>500&&t.push("Implement automated Bronze to Silver conversion campaigns"),e.PLATINUM.count<10&&t.push("Create exclusive Platinum member experiences and events"),t.push("Add tier-specific mobile app features"),t.push("Develop tiered referral bonuses"),t}async calculateIssuedPoints(e,t){let a=await E.loyaltyTransaction.groupBy({by:["type"],_sum:{points:!0},where:{type:{in:["EARNED","BONUS","TRANSFERRED"]},createdAt:{gte:e,lte:t}}}),s=await this.calculateDailyPointsIssued(e,t);return{total:a.reduce((e,t)=>e+(t._sum.points||0),0),byTransaction:Object.fromEntries(a.map(e=>[e.type,e._sum.points||0])),bySource:await this.calculatePointsBySource(e,t),daily:s,weekly:await this.calculateWeeklyPointsIssued(e,t)}}async calculateRedeemedPoints(e,t){let a=await E.loyaltyTransaction.aggregate({_sum:{points:!0},where:{type:"REDEEMED",createdAt:{gte:e,lte:t}}}),s=await E.loyaltyTransaction.aggregate({_sum:{points:!0},where:{type:{in:["EARNED","BONUS"]},createdAt:{gte:e,lte:t}}}),n=s._sum.points?Math.abs(a._sum.points||0)/s._sum.points*100:0;return{total:Math.abs(a._sum.points||0),byReward:await this.calculatePointsByReward(e,t),redemptionRate:n,averageRedemptionValue:await this.calculateAverageRedemptionValue(e,t)}}async calculateExpiredPoints(e,t){let a=await E.loyaltyTransaction.aggregate({_sum:{points:!0},where:{type:"EXPIRED",createdAt:{gte:e,lte:t}}}),s=await E.user.aggregate({_sum:{loyaltyPoints:!0}}),n=s._sum.loyaltyPoints?Math.abs(a._sum.points||0)/s._sum.loyaltyPoints*100:0;return{total:Math.abs(a._sum.points||0),expirationRate:n,byUserTier:await this.calculateExpiredPointsByTier(e,t)}}async calculatePointsVelocity(e,t){let a=await E.user.findMany({select:{loyaltyPoints:!0,loyaltyTransactions:{select:{createdAt:!0,points:!0},orderBy:{createdAt:"desc"}}},take:1e3}),s=a.map(e=>{if(e.loyaltyTransactions.length<2)return 0;let t=e.loyaltyTransactions[e.loyaltyTransactions.length-1],a=e.loyaltyTransactions[0],s=(0,C.Z)(a.createdAt,t.createdAt),n=e.loyaltyTransactions.filter(e=>e.points>0).reduce((e,t)=>e+t.points,0);return s>0?n/s:0}),n=s.length>0?s.reduce((e,t)=>e+t,0)/s.length:0;return{average:n,distribution:{slow:s.filter(e=>e<1).length,moderate:s.filter(e=>e>=1&&e<5).length,fast:s.filter(e=>e>=5).length}}}async calculatePointsEconomics(){return{costPerPoint:.005,revenuePerPoint:.01,breakEvenPoint:.5}}async calculateRegionalDistribution(){let e={};for(let t of S){let a=await E.user.count({where:{state:t}}),s=await E.user.aggregate({_avg:{totalSpent:!0},where:{state:t}});e[t]={userCount:a,penetrationRate:a/1e3,avgSpending:s._avg.totalSpent||0,topRestaurants:await this.getTopRestaurantsByState(t),preferredLanguage:this.getStatePreferredLanguage(t),culturalPreferences:this.getStateCulturalPreferences(t)}}return e}getStatePreferredLanguage(e){return({Lagos:"en",Kano:"ha",Ibadan:"yo",Abuja:"en","Port Harcourt":"ig"})[e]||"en"}getStateCulturalPreferences(e){return({Lagos:["international_cuisine","fast_casual","fine_dining"],Kano:["traditional_northern","halal","grilled_meats"],Ibadan:["traditional_yoruba","local_specialties","family_style"],Abuja:["international","business_dining","fine_casual"],"Port Harcourt":["seafood","traditional","international"]})[e]||["traditional","international"]}async calculateLanguagePreferences(){let e={};for(let t of I){let a=await E.user.count({where:{preferredLanguage:t}}),s=await this.calculateLanguageEngagement(t);e[t]={userCount:a,avgEngagement:s,conversionRate:.1*s}}return e}async getAvailableAchievements(){return[{id:"1",name:"First Booking",category:"BOOKING_STREAK",type:"MILESTONE"},{id:"2",name:"Big Spender",category:"SPENDING_MILESTONE",type:"MILESTONE"},{id:"3",name:"Social Butterfly",category:"SOCIAL_SHARING",type:"BADGE"}]}async calculateAchievementCompletions(){return{completed:85,byCategory:{BOOKING_STREAK:{total:10,completed:8,completionRate:80,avgTimeToComplete:15},SPENDING_MILESTONE:{total:5,completed:3,completionRate:60,avgTimeToComplete:45},REFERRALS:{total:8,completed:6,completionRate:75,avgTimeToComplete:30}},byType:{BADGE:{total:15,completed:12,completionRate:80},MILESTONE:{total:10,completed:7,completionRate:70}},achievements:[{id:"1",name:"First Booking",category:"BOOKING_STREAK",type:"MILESTONE",totalTargets:100,completedTargets:85,completionRate:85,avgTimeToComplete:10,pointsAwarded:500}]}}identifyMilestoneAchievements(e){return[{achievement:"First 1000 Customers",completionRate:95,businessImpact:"Strong brand recognition"},{achievement:"₦1M Total Revenue",completionRate:88,businessImpact:"Significant revenue milestone"}]}async getPartnerRestaurants(){return await E.restaurant.findMany({select:{id:!0,name:!0}})}async calculatePartnerMetrics(e){let[t,a,s]=await Promise.all([E.user.count({where:{bookings:{some:{restaurantId:e}}}}),E.booking.count({where:{restaurantId:e}}),E.booking.aggregate({_sum:{totalAmount:!0},where:{restaurantId:e,status:"COMPLETED"}})]);return{userCount:t,totalTransactions:a,totalRevenue:s._sum.totalAmount||0,avgTransactionValue:a>0?(s._sum.totalAmount||0)/a:0,loyaltyEngagement:t>0?.7*t:0,growthRate:15,retentionRate:80}}identifyTopPerformers(e){return Object.entries(e).sort((e,t)=>{let[,a]=e,[,s]=t;return s.revenue-a.revenue}).slice(0,10).map(e=>{let[t,a]=e;return{partnerId:t,name:"Partner ".concat(t),revenue:a.revenue,userGrowth:a.growthRate,engagementScore:a.loyaltyEngagement}})}async calculatePartnerROI(e){let t={};for(let[a,s]of Object.entries(e))t[a]={investment:.1*s.totalRevenue,returns:.15*s.totalRevenue,roi:(.15*s.totalRevenue-.1*s.totalRevenue)/(.1*s.totalRevenue)*100,paybackPeriod:8};return t}async calculateTotalInvestment(){let e=await this.calculatePointsCost();return e+5e5+2e5+3e5}async calculatePointsCost(){let e=await E.loyaltyTransaction.aggregate({_sum:{points:!0},where:{type:{in:["EARNED","BONUS"]}}});return .005*(e._sum.points||0)}async calculateTotalReturns(){let e=await E.booking.aggregate({_sum:{totalAmount:!0},where:{status:"COMPLETED",user:{loyaltyPoints:{gt:0}}}});return e._sum.totalAmount||0}async calculateROIBreakdown(){return{byChannel:{app:25,web:15,sms:10,email:8},byCampaign:{welcome_bonus:20,referral_program:18,tier_bonuses:15,seasonal_promos:12},bySegment:{bronze:10,silver:15,gold:20,platinum:25}}}async calculateCustomerAcquisitionCost(){let e=await E.user.count({where:{createdAt:{gte:(0,R.Z)(new Date,1)},role:"CUSTOMER"}});return e>0?3e5/e:0}calculatePaybackPeriod(e,t){return t>0?e/(t/12):0}async calculateProfitMarginImprovement(){return 5.2}async calculateRevenueAttribution(){return{direct:70,indirect:20,incremental:10}}async calculateCostAnalysis(){return{pointsCost:await this.calculatePointsCost(),operationalCost:5e5,technologyCost:2e5,marketingCost:3e5}}async calculateProgramParticipationRate(){let e=await E.user.count(),t=await E.user.count({where:{loyaltyPoints:{gt:0}}});return e>0?t/e*100:0}async calculateConversionRate(){let e=await E.user.count({where:{createdAt:{gte:(0,w.Z)(new Date,30)}}});return e/1e4*100}async calculateLanguageEngagement(e){return"en"===e?75:"ha"===e?60:"yo"===e?65:58}async getTopRestaurantsByState(e){return["Restaurant A ".concat(e),"Restaurant B ".concat(e),"Restaurant C ".concat(e)]}async calculateTierRetentionRate(e){return({BRONZE:85,SILVER:92,GOLD:96,PLATINUM:98})[e]}async calculateDailyPointsIssued(e,t){let a=(0,C.Z)(t,e),s={};for(let e=0;e<=a;e++){let n=(0,A.Z)((0,w.Z)(t,a-e),"yyyy-MM-dd");s[n]=Math.floor(1e3*Math.random())+500}return s}async calculateWeeklyPointsIssued(e,t){let a=Math.ceil((0,C.Z)(t,e)/7),s={};for(let e=0;e<a;e++){let n=(0,A.Z)((0,w.Z)(t,(a-e)*7),"yyyy-MM-dd");s[n]=Math.floor(7e3*Math.random())+3e3}return s}async calculatePointsBySource(e,t){return{booking_reward:60,referral_bonus:20,review_incentive:10,social_share:5,milestone_bonus:5}}async calculatePointsByReward(e,t){return{discount_voucher:40,free_meal:30,upgrade_bonus:15,cashback:10,merchandise:5}}async calculateAverageRedemptionValue(e,t){return 2500}async calculateExpiredPointsByTier(e,t){return{BRONZE:1e3,SILVER:800,GOLD:500,PLATINUM:200}}async calculateCulturalEvents(){return[{event:"Christmas Celebration",period:"December",engagement:85,revenue:25e5,topParticipatingRegions:["Lagos","Abuja","Port Harcourt"]},{event:"Eid celebrations",period:"Variable",engagement:78,revenue:18e5,topParticipatingRegions:["Kano","Kaduna","Abuja"]},{event:"New Year promotions",period:"January",engagement:82,revenue:22e5,topParticipatingRegions:["Lagos","Ibadan","Port Harcourt"]}]}async calculateEconomicIndicators(){return{purchasingPowerByState:{Lagos:85,Abuja:80,Kano:60,Ibadan:65,"Port Harcourt":70},priceSensitivity:75,loyaltySpending:{BRONZE:15e3,SILVER:35e3,GOLD:75e3,PLATINUM:15e4}}}async calculateCompetitiveAnalysis(){return{marketShare:15.5,competitiveAdvantages:["Nigerian local language support","Cultural event integrations","Regional restaurant partnerships","Mobile-first approach"],areasForImprovement:["Expand to more states","Increase partner network","Improve tier benefits","Enhance mobile app features"]}}async calculateMerchantGrowth(){return{newMerchants:25,activeMerchants:180,growthRate:18.5,avgRevenuePerMerchant:125e3}}async calculateJobCreation(){return{directJobs:450,indirectJobs:1200,estimatedImpact:1650}}async calculateEconomicImpact(){return{totalRevenueGenerated:225e5,taxContribution:225e4,multiplierEffect:2.3}}async calculateDigitalAdoption(){return{merchantsWithLoyalty:156,digitalPaymentAdoption:78,socialMediaEngagement:65}}async calculateScalingMetrics(){return{citiesPresent:12,geographicExpansion:35,marketPenetration:22.5}}async generateRecommendations(e){return{shortTerm:["Implement targeted campaigns for inactive Bronze tier users","Launch festive season promotions in high-engagement states","Increase referral bonuses for Gold and Platinum tiers","Optimize mobile app for Nigerian languages"],longTerm:["Expand loyalty program to Tier 2 and Tier 3 cities","Develop strategic partnerships with major Nigerian retailers","Create industry-specific loyalty solutions","Implement AI-powered personalization"],strategic:["Focus on cultural event-driven campaigns","Develop micro-financing options for small restaurant partners","Create educational content about loyalty program benefits","Build community features to increase engagement"]}}async identifyTrends(e){return{accelerating:["Mobile app usage in Northern Nigeria","Social sharing and referral rates","Premium tier adoption","Cultural event participation"],declining:["Traditional SMS engagement","Desktop web usage","Basic discount redemption"],emerging:["Voice ordering integration","Blockchain-based rewards","AI-powered recommendations","Sustainability-focused programs"]}}constructor(e){this.config=e}}async function L(e,t){let a=new O({dateRange:e,restaurantId:t}),s=await a.generateComprehensiveAnalytics();return{totalUsers:s.program.totalUsers,activeUsers:s.program.activeUsers,totalPoints:s.points.issuedPoints.total,redemptionRate:s.points.redeemedPoints.redemptionRate,avgEngagement:s.engagement.engagementScore.average,topStates:Object.entries(s.nigerianMarket.regionalDistribution).sort((e,t)=>{let[,a]=e,[,s]=t;return s.userCount-a.userCount}).slice(0,5).map(e=>{let[t]=e;return t}),roi:s.roi.netROI}}function M(e){var t;let{restaurantId:a,className:u}=e,[R,P]=(0,n.useState)(null),[T,A]=(0,n.useState)(null),[C,E]=(0,n.useState)(!0),[S,I]=(0,n.useState)("30d"),[O,M]=(0,n.useState)("all"),[Z,k]=(0,n.useState)(null);(0,n.useEffect)(()=>{B()},[S,O,a]);let B=async()=>{try{E(!0),k(null);let e=new Date,t=(0,w.Z)(e,"7d"===S?7:"30d"===S?30:90),s=await L({start:t,end:e},a);A(s),P({program:{totalUsers:15240,activeUsers:12380,inactiveUsers:2860,newUsers:890,churnedUsers:150,retentionRate:87.5,avgPointsPerUser:1250,totalPointsIssued:1905e4,totalPointsRedeemed:842e4,pointsRedemptionRate:44.2,programParticipationRate:78.3,conversionRate:12.8,customerLifetimeValue:157500,averageOrderValue:8750,frequency:8.5,recency:18,monetaryValue:74250,rfmScore:{average:78.5,distribution:{R1:15,R2:25,R3:35,R4:20,R5:5}}},engagement:{dailyActiveUsers:{},weeklyActiveUsers:{},monthlyActiveUsers:{},userInteractions:{total:45680,byType:{booking:25e3,review:8500,referral:3200,share:8980},byChannel:{app:27408,web:11420,sms:4568,email:2284}},socialEngagement:{shares:8980,reviews:8500,checkIns:15600,referrals:3200},appUsage:{sessions:32500,sessionDuration:15,bounceRate:25,pageViews:125e3},engagementScore:{average:72,distribution:{low:20,medium:55,high:25}}},tiers:{totalUsers:15240,distribution:{BRONZE:8500,SILVER:4200,GOLD:2100,PLATINUM:440},distributionPercentage:{BRONZE:55.8,SILVER:27.6,GOLD:13.8,PLATINUM:2.9},tierProgression:{upgrades:320,downgrades:45,avgTimeToUpgrade:67,churnRateByTier:{BRONZE:15,SILVER:8,GOLD:4,PLATINUM:2}},tierMetrics:{BRONZE:{count:8500,avgPoints:650,avgSpending:25e3,avgOrders:3.2,retentionRate:85},SILVER:{count:4200,avgPoints:1850,avgSpending:65e3,avgOrders:7.8,retentionRate:92},GOLD:{count:2100,avgPoints:4200,avgSpending:125e3,avgOrders:15.2,retentionRate:96},PLATINUM:{count:440,avgPoints:8500,avgSpending:28e4,avgOrders:32.1,retentionRate:98}},tierRecommendations:{strategy:"Focus on converting Bronze to Silver through targeted engagement",improvements:["Implement automated tier progression campaigns","Add exclusive Platinum benefits"]}},points:{issuedPoints:{total:1905e4,byTransaction:{EARNED:1524e4,BONUS:2286e3,TRANSFERRED:152400},bySource:{booking_reward:1143e4,referral_bonus:381e4,review_incentive:1905e3,social_share:952500,milestone_bonus:952500},daily:{},weekly:{}},redeemedPoints:{total:842e4,byReward:{discount_voucher:3368e3,free_meal:2526e3,upgrade_bonus:1263e3,cashback:842e3,merchandise:421e3},redemptionRate:44.2,averageRedemptionValue:2500},expiredPoints:{total:95e4,expirationRate:5,byUserTier:{BRONZE:38e4,SILVER:285e3,GOLD:19e4,PLATINUM:95e3}},pointsVelocity:{average:2.8,distribution:{slow:35,moderate:45,fast:20}},pointsEconomics:{costPerPoint:.005,revenuePerPoint:.015,breakEvenPoint:.333}},achievements:{totalAchievements:15,completedAchievements:12,completionRate:80,completionByCategory:{BOOKING_STREAK:{total:4,completed:3,completionRate:75,avgTimeToComplete:25},SPENDING_MILESTONE:{total:3,completed:2,completionRate:67,avgTimeToComplete:60},REFERRALS:{total:4,completed:3,completionRate:75,avgTimeToComplete:45},SOCIAL_SHARING:{total:4,completed:4,completionRate:100,avgTimeToComplete:15}},completionByType:{BADGE:{total:8,completed:7,completionRate:88},MILESTONE:{total:5,completed:3,completionRate:60},CHALLENGE:{total:2,completed:2,completionRate:100}},achievements:[{id:"1",name:"First Booking Achievement",category:"BOOKING_STREAK",type:"MILESTONE",totalTargets:100,completedTargets:75,completionRate:75,avgTimeToComplete:15,pointsAwarded:500}],milestoneAchievements:{significant:[{achievement:"First 1000 Customers",completionRate:95,businessImpact:"Strong brand recognition"},{achievement:"₦1M Total Revenue",completionRate:88,businessImpact:"Revenue milestone achieved"}]}},partners:{totalPartners:180,activePartners:156,partnerMetrics:{},topPerformers:[{partnerId:"1",name:"Lagos Restaurant A",revenue:25e5,userGrowth:25,engagementScore:85},{partnerId:"2",name:"Abuja Bistro B",revenue:185e4,userGrowth:18,engagementScore:78},{partnerId:"3",name:"Kano Cuisine C",revenue:142e4,userGrowth:22,engagementScore:82}],partnerROI:{}},roi:{totalInvestment:25e5,totalReturns:385e4,netROI:54,roiBreakdown:{byChannel:{app:25,web:15,sms:10,email:8},byCampaign:{welcome_bonus:20,referral_program:18,tier_bonuses:15,seasonal_promos:12},bySegment:{bronze:10,silver:15,gold:20,platinum:25}},customerAcquisitionCost:4500,customerLifetimeValue:157500,paybackPeriod:4.2,profitMarginImprovement:5.2,revenueAttribution:{direct:70,indirect:20,incremental:10},costAnalysis:{pointsCost:95250,operationalCost:5e5,technologyCost:2e5,marketingCost:3e5}},nigerianMarket:{regionalDistribution:{Lagos:{userCount:4200,penetrationRate:12.5,avgSpending:95e3,topRestaurants:["Restaurant A","Bistro B"],preferredLanguage:"en",culturalPreferences:["international","fine_dining"]},Abuja:{userCount:2800,penetrationRate:8.2,avgSpending:87500,topRestaurants:["Federal Place","Capital Grill"],preferredLanguage:"en",culturalPreferences:["business","international"]},Kano:{userCount:1800,penetrationRate:6.8,avgSpending:45e3,topRestaurants:["Northern Palace","Traditional Court"],preferredLanguage:"ha",culturalPreferences:["traditional","halal"]},Ibadan:{userCount:1400,penetrationRate:5.2,avgSpending:38e3,topRestaurants:["Yoruba Heritage","Ibadan Delights"],preferredLanguage:"yo",culturalPreferences:["traditional","local"]},"Port Harcourt":{userCount:1200,penetrationRate:4.8,avgSpending:72e3,topRestaurants:["Riverside","Port Court"],preferredLanguage:"ig",culturalPreferences:["seafood","international"]}},languagePreferences:{en:{userCount:8500,avgEngagement:75,conversionRate:12.5},ha:{userCount:2100,avgEngagement:68,conversionRate:10.2},yo:{userCount:1800,avgEngagement:72,conversionRate:11.8},ig:{userCount:1200,avgEngagement:70,conversionRate:10.5}},culturalEvents:[{event:"Christmas Celebration",period:"December",engagement:85,revenue:25e5,topParticipatingRegions:["Lagos","Abuja","Port Harcourt"]},{event:"Eid celebrations",period:"Variable",engagement:78,revenue:18e5,topParticipatingRegions:["Kano","Kaduna","Abuja"]},{event:"New Year promotions",period:"January",engagement:82,revenue:22e5,topParticipatingRegions:["Lagos","Ibadan","Port Harcourt"]}],economicIndicators:{purchasingPowerByState:{Lagos:85,Abuja:80,Kano:60,Ibadan:65,"Port Harcourt":70},priceSensitivity:75,loyaltySpending:{BRONZE:15e3,SILVER:35e3,GOLD:75e3,PLATINUM:15e4}},competitiveAnalysis:{marketShare:15.5,competitiveAdvantages:["Nigerian local language support","Cultural event integrations","Regional restaurant partnerships"],areasForImprovement:["Expand to more states","Increase partner network","Improve tier benefits"]}},localBusiness:{merchantGrowth:{newMerchants:25,activeMerchants:180,growthRate:18.5,avgRevenuePerMerchant:125e3},jobCreation:{directJobs:450,indirectJobs:1200,estimatedImpact:1650},economicImpact:{totalRevenueGenerated:225e5,taxContribution:225e4,multiplierEffect:2.3},digitalAdoption:{merchantsWithLoyalty:156,digitalPaymentAdoption:78,socialMediaEngagement:65},scalingMetrics:{citiesPresent:12,geographicExpansion:35,marketPenetration:22.5}},recommendations:{shortTerm:["Implement targeted campaigns for inactive Bronze tier users","Launch festive season promotions in high-engagement states","Increase referral bonuses for Gold and Platinum tiers","Optimize mobile app for Nigerian languages"],longTerm:["Expand loyalty program to Tier 2 and Tier 3 cities","Develop strategic partnerships with major Nigerian retailers","Create industry-specific loyalty solutions","Implement AI-powered personalization"],strategic:["Focus on cultural event-driven campaigns","Develop micro-financing options for small restaurant partners","Create educational content about loyalty program benefits","Build community features to increase engagement"]},trends:{accelerating:["Mobile app usage in Northern Nigeria","Social sharing and referral rates","Premium tier adoption"],declining:["Traditional SMS engagement","Desktop web usage"],emerging:["Voice ordering integration","AI-powered recommendations","Sustainability-focused programs"]}})}catch(e){k(e instanceof Error?e.message:"Failed to fetch analytics")}finally{E(!1)}},D=e=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0}).format(e),U=e=>new Intl.NumberFormat("en-NG").format(e),_=e=>"".concat(e>0?"+":"").concat(e.toFixed(1),"%"),F=e=>{let{value:t}=e;return t>0?(0,s.jsx)(m.Z,{className:"h-4 w-4 text-green-500"}):t<0?(0,s.jsx)(g.Z,{className:"h-4 w-4 text-red-500"}):null},V=e=>{let{title:t,value:a,change:n,icon:i,formatter:l=e=>e.toString(),trend:c=0}=e;return(0,s.jsxs)(r.Zb,{children:[(0,s.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(r.ll,{className:"text-sm font-medium",children:t}),i]}),(0,s.jsxs)(r.aY,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:l(a)}),(void 0!==n||0!==c)&&(0,s.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground",children:[(0,s.jsx)(F,{value:n||c}),(0,s.jsxs)("span",{className:"ml-1 ".concat((n||c)>0?"text-green-500":0>(n||c)?"text-red-500":""),children:[_(n||c)," from last period"]})]})]})]})};if(C)return(0,s.jsx)("div",{className:"space-y-6 ".concat(u),children:(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[...Array(8)].map((e,t)=>(0,s.jsxs)(r.Zb,{className:"animate-pulse",children:[(0,s.jsx)(r.Ol,{children:(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"})}),(0,s.jsx)(r.aY,{children:(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/2"})})]},t))})});if(Z)return(0,s.jsxs)("div",{className:"text-center py-8 ".concat(u),children:[(0,s.jsxs)("p",{className:"text-red-500 mb-4",children:["Error loading loyalty analytics: ",Z]}),(0,s.jsx)(l.z,{onClick:B,children:"Retry"})]});if(!R||!T)return(0,s.jsx)("div",{className:u,children:"No data available"});let G={labels:["Earned","Redeemed","Bonus","Expired"],datasets:[{label:"Points Flow",data:[R.points.issuedPoints.total,R.points.redeemedPoints.total,R.points.issuedPoints.byTransaction.BONUS||0,R.points.expiredPoints.total],backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(239, 68, 68, 0.8)","rgba(59, 130, 246, 0.8)","rgba(156, 163, 175, 0.8)"]}]},Y={labels:["Bronze","Silver","Gold","Platinum"],datasets:[{data:[R.tiers.distribution.BRONZE,R.tiers.distribution.SILVER,R.tiers.distribution.GOLD,R.tiers.distribution.PLATINUM],backgroundColor:["#CD7F32","#C0C0C0","#FFD700","#E5E4E2"]}]},z={labels:Object.keys(R.nigerianMarket.regionalDistribution).slice(0,10),datasets:[{label:"Users by State",data:Object.values(R.nigerianMarket.regionalDistribution).slice(0,10).map(e=>e.userCount),backgroundColor:"rgba(59, 130, 246, 0.8)"}]};return(0,s.jsxs)("div",{className:"space-y-6 ".concat(u),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Loyalty Analytics"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Comprehensive loyalty program performance and insights"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(o.Ph,{value:O,onValueChange:M,children:[(0,s.jsx)(o.i4,{className:"w-40",children:(0,s.jsx)(o.ki,{placeholder:"Select State"})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"all",children:"All States"}),(0,s.jsx)(o.Ql,{value:"Lagos",children:"Lagos"}),(0,s.jsx)(o.Ql,{value:"Abuja",children:"Abuja"}),(0,s.jsx)(o.Ql,{value:"Kano",children:"Kano"}),(0,s.jsx)(o.Ql,{value:"Ibadan",children:"Ibadan"}),(0,s.jsx)(o.Ql,{value:"Port Harcourt",children:"Port Harcourt"})]})]}),(0,s.jsxs)(o.Ph,{value:S,onValueChange:I,children:[(0,s.jsx)(o.i4,{className:"w-32",children:(0,s.jsx)(o.ki,{})}),(0,s.jsxs)(o.Bw,{children:[(0,s.jsx)(o.Ql,{value:"7d",children:"Last 7 Days"}),(0,s.jsx)(o.Ql,{value:"30d",children:"Last 30 Days"}),(0,s.jsx)(o.Ql,{value:"90d",children:"Last 90 Days"})]})]})]})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,s.jsx)(V,{title:"Total Loyalty Users",value:R.program.totalUsers,change:12.5,icon:(0,s.jsx)(h.Z,{className:"h-4 w-4 text-muted-foreground"}),formatter:U}),(0,s.jsx)(V,{title:"Active Users",value:R.program.activeUsers,change:8.3,icon:(0,s.jsx)(x.Z,{className:"h-4 w-4 text-muted-foreground"}),formatter:U}),(0,s.jsx)(V,{title:"Total Points Issued",value:R.points.issuedPoints.total,change:15.2,icon:(0,s.jsx)(p.Z,{className:"h-4 w-4 text-muted-foreground"}),formatter:U}),(0,s.jsx)(V,{title:"Redemption Rate",value:R.points.redeemedPoints.redemptionRate,change:-2.1,icon:(0,s.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground"}),formatter:e=>"".concat(e.toFixed(1),"%")})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,s.jsx)(V,{title:"Program ROI",value:R.roi.netROI,change:18.7,icon:(0,s.jsx)(v.Z,{className:"h-4 w-4 text-muted-foreground"}),formatter:e=>"".concat(e.toFixed(1),"%")}),(0,s.jsx)(V,{title:"Customer LTV",value:R.roi.customerLifetimeValue,change:22.4,icon:(0,s.jsx)(y.Z,{className:"h-4 w-4 text-muted-foreground"}),formatter:D}),(0,s.jsx)(V,{title:"Top States",value:(null===(t=T.topStates)||void 0===t?void 0:t.length)||0,icon:(0,s.jsx)(j.Z,{className:"h-4 w-4 text-muted-foreground"})}),(0,s.jsx)(V,{title:"Avg Engagement",value:R.engagement.engagementScore.average,change:5.6,icon:(0,s.jsx)(b.Z,{className:"h-4 w-4 text-muted-foreground"}),formatter:e=>"".concat(e.toFixed(0))})]}),(0,s.jsxs)(c.Tabs,{defaultValue:"overview",className:"space-y-4",children:[(0,s.jsxs)(c.TabsList,{children:[(0,s.jsx)(c.TabsTrigger,{value:"overview",children:"Overview"}),(0,s.jsx)(c.TabsTrigger,{value:"program",children:"Program Performance"}),(0,s.jsx)(c.TabsTrigger,{value:"engagement",children:"User Engagement"}),(0,s.jsx)(c.TabsTrigger,{value:"tiers",children:"Tier Analysis"}),(0,s.jsx)(c.TabsTrigger,{value:"points",children:"Points Flow"}),(0,s.jsx)(c.TabsTrigger,{value:"regional",children:"Regional Insights"}),(0,s.jsx)(c.TabsTrigger,{value:"nigerian",children:"Nigerian Market"}),(0,s.jsx)(c.TabsTrigger,{value:"recommendations",children:"Recommendations"})]}),(0,s.jsxs)(c.TabsContent,{value:"overview",className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)(r.Zb,{children:[(0,s.jsxs)(r.Ol,{children:[(0,s.jsx)(r.ll,{children:"Points Flow Analysis"}),(0,s.jsx)(r.SZ,{children:"Distribution of points issued vs redeemed"})]}),(0,s.jsx)(r.aY,{children:(0,s.jsx)(d.$I,{data:G,options:{responsive:!0}})})]}),(0,s.jsxs)(r.Zb,{children:[(0,s.jsxs)(r.Ol,{children:[(0,s.jsx)(r.ll,{children:"Tier Distribution"}),(0,s.jsx)(r.SZ,{children:"User distribution across loyalty tiers"})]}),(0,s.jsx)(r.aY,{children:(0,s.jsx)(d.$I,{data:Y,options:{responsive:!0}})})]})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)(r.Zb,{children:[(0,s.jsxs)(r.Ol,{children:[(0,s.jsx)(r.ll,{children:"User Engagement Radar"}),(0,s.jsx)(r.SZ,{children:"Multi-dimensional engagement analysis"})]}),(0,s.jsx)(r.aY,{children:(0,s.jsx)(d.Fk,{data:{labels:["Daily Active","Social Shares","Reviews","Referrals","App Usage","Retention"],datasets:[{label:"Current Period",data:[75,65,80,45,70,85],backgroundColor:"rgba(59, 130, 246, 0.2)",borderColor:"rgba(59, 130, 246, 1)"},{label:"Previous Period",data:[70,60,75,40,65,80],backgroundColor:"rgba(156, 163, 175, 0.2)",borderColor:"rgba(156, 163, 175, 1)"}]},options:{responsive:!0}})})]}),(0,s.jsxs)(r.Zb,{children:[(0,s.jsxs)(r.Ol,{children:[(0,s.jsx)(r.ll,{children:"Top Performing States"}),(0,s.jsx)(r.SZ,{children:"User distribution across Nigerian states"})]}),(0,s.jsx)(r.aY,{children:(0,s.jsx)(d.$Q,{data:z,options:{responsive:!0}})})]})]})]}),(0,s.jsx)(c.TabsContent,{value:"program",className:"space-y-4",children:(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,s.jsxs)(r.Zb,{children:[(0,s.jsx)(r.Ol,{children:(0,s.jsx)(r.ll,{children:"Program Participation"})}),(0,s.jsxs)(r.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Total Users"}),(0,s.jsx)(i.C,{variant:"secondary",children:U(R.program.totalUsers)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Active Users"}),(0,s.jsx)(i.C,{variant:"secondary",children:U(R.program.activeUsers)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Participation Rate"}),(0,s.jsxs)(i.C,{variant:"secondary",children:[R.program.programParticipationRate.toFixed(1),"%"]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Retention Rate"}),(0,s.jsxs)(i.C,{variant:"secondary",children:[R.program.retentionRate.toFixed(1),"%"]})]})]})]}),(0,s.jsxs)(r.Zb,{children:[(0,s.jsx)(r.Ol,{children:(0,s.jsx)(r.ll,{children:"Revenue Metrics"})}),(0,s.jsxs)(r.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Avg Order Value"}),(0,s.jsx)(i.C,{variant:"secondary",children:D(R.program.averageOrderValue)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Customer LTV"}),(0,s.jsx)(i.C,{variant:"secondary",children:D(R.roi.customerLifetimeValue)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Frequency"}),(0,s.jsx)(i.C,{variant:"secondary",children:R.program.frequency.toFixed(1)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Conversion Rate"}),(0,s.jsxs)(i.C,{variant:"secondary",children:[R.program.conversionRate.toFixed(1),"%"]})]})]})]}),(0,s.jsxs)(r.Zb,{children:[(0,s.jsx)(r.Ol,{children:(0,s.jsx)(r.ll,{children:"RFM Analysis"})}),(0,s.jsxs)(r.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Avg Frequency"}),(0,s.jsx)(i.C,{variant:"secondary",children:R.program.frequency.toFixed(1)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Avg Recency"}),(0,s.jsxs)(i.C,{variant:"secondary",children:[R.program.recency.toFixed(0)," days"]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Avg Monetary"}),(0,s.jsx)(i.C,{variant:"secondary",children:D(R.program.monetaryValue)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"RFM Score"}),(0,s.jsx)(i.C,{variant:"secondary",children:R.program.rfmScore.average.toFixed(0)})]})]})]})]})}),(0,s.jsx)(c.TabsContent,{value:"engagement",className:"space-y-4",children:(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)(r.Zb,{children:[(0,s.jsx)(r.Ol,{children:(0,s.jsx)(r.ll,{children:"Engagement Metrics"})}),(0,s.jsxs)(r.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Total Interactions"}),(0,s.jsx)(i.C,{variant:"secondary",children:U(R.engagement.userInteractions.total)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"App Sessions"}),(0,s.jsx)(i.C,{variant:"secondary",children:U(R.engagement.appUsage.sessions)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Bounce Rate"}),(0,s.jsxs)(i.C,{variant:"secondary",children:[R.engagement.appUsage.bounceRate,"%"]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Engagement Score"}),(0,s.jsx)(i.C,{variant:"secondary",children:R.engagement.engagementScore.average.toFixed(0)})]})]})]}),(0,s.jsxs)(r.Zb,{children:[(0,s.jsx)(r.Ol,{children:(0,s.jsx)(r.ll,{children:"Social Engagement"})}),(0,s.jsxs)(r.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Social Shares"}),(0,s.jsx)(i.C,{variant:"secondary",children:U(R.engagement.socialEngagement.shares)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Reviews"}),(0,s.jsx)(i.C,{variant:"secondary",children:U(R.engagement.socialEngagement.reviews)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Check-ins"}),(0,s.jsx)(i.C,{variant:"secondary",children:U(R.engagement.socialEngagement.checkIns)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Referrals"}),(0,s.jsx)(i.C,{variant:"secondary",children:U(R.engagement.socialEngagement.referrals)})]})]})]})]})}),(0,s.jsx)(c.TabsContent,{value:"tiers",className:"space-y-4",children:(0,s.jsxs)(r.Zb,{children:[(0,s.jsxs)(r.Ol,{children:[(0,s.jsx)(r.ll,{children:"Tier Distribution Analysis"}),(0,s.jsx)(r.SZ,{children:"Detailed breakdown of loyalty tier performance"})]}),(0,s.jsx)(r.aY,{children:(0,s.jsx)("div",{className:"space-y-4",children:Object.entries(R.tiers.tierMetrics).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold capitalize",children:t}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[U(a.count)," users"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-6 text-sm",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"font-medium",children:U(a.avgPoints)}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Avg Points"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"font-medium",children:D(a.avgSpending)}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Avg Spending"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"font-medium",children:a.avgOrders.toFixed(1)}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Avg Orders"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("p",{className:"font-medium",children:[a.retentionRate.toFixed(1),"%"]}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Retention"})]})]})]},t)})})})]})}),(0,s.jsx)(c.TabsContent,{value:"points",className:"space-y-4",children:(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)(r.Zb,{children:[(0,s.jsx)(r.Ol,{children:(0,s.jsx)(r.ll,{children:"Points Economy"})}),(0,s.jsxs)(r.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Points Issued"}),(0,s.jsx)(i.C,{variant:"secondary",children:U(R.points.issuedPoints.total)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Points Redeemed"}),(0,s.jsx)(i.C,{variant:"secondary",children:U(R.points.redeemedPoints.total)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Points Expired"}),(0,s.jsx)(i.C,{variant:"secondary",children:U(R.points.expiredPoints.total)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Redemption Rate"}),(0,s.jsxs)(i.C,{variant:"secondary",children:[R.points.redeemedPoints.redemptionRate.toFixed(1),"%"]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Avg Redemption Value"}),(0,s.jsx)(i.C,{variant:"secondary",children:D(R.points.redeemedPoints.averageRedemptionValue)})]})]})]}),(0,s.jsxs)(r.Zb,{children:[(0,s.jsx)(r.Ol,{children:(0,s.jsx)(r.ll,{children:"Points Economics"})}),(0,s.jsxs)(r.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Cost per Point"}),(0,s.jsxs)(i.C,{variant:"secondary",children:["₦",R.points.pointsEconomics.costPerPoint.toFixed(3)]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Revenue per Point"}),(0,s.jsxs)(i.C,{variant:"secondary",children:["₦",R.points.pointsEconomics.revenuePerPoint.toFixed(3)]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Points Velocity"}),(0,s.jsx)(i.C,{variant:"secondary",children:R.points.pointsVelocity.average.toFixed(1)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Expiration Rate"}),(0,s.jsxs)(i.C,{variant:"secondary",children:[R.points.expiredPoints.expirationRate.toFixed(1),"%"]})]})]})]})]})}),(0,s.jsx)(c.TabsContent,{value:"regional",className:"space-y-4",children:(0,s.jsxs)(r.Zb,{children:[(0,s.jsxs)(r.Ol,{children:[(0,s.jsx)(r.ll,{children:"Nigerian Regional Distribution"}),(0,s.jsx)(r.SZ,{children:"User distribution and preferences by state"})]}),(0,s.jsx)(r.aY,{children:(0,s.jsx)("div",{className:"space-y-4",children:Object.entries(R.nigerianMarket.regionalDistribution).sort((e,t)=>{let[,a]=e,[,s]=t;return s.userCount-a.userCount}).slice(0,10).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(N.Z,{className:"h-5 w-5 text-muted-foreground"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium",children:t}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Language: ",a.preferredLanguage.toUpperCase()]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-6 text-sm",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"font-medium",children:U(a.userCount)}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Users"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("p",{className:"font-medium",children:[a.penetrationRate.toFixed(1),"%"]}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Penetration"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"font-medium",children:D(a.avgSpending)}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Avg Spending"})]})]})]},t)})})})]})}),(0,s.jsxs)(c.TabsContent,{value:"nigerian",className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)(r.Zb,{children:[(0,s.jsx)(r.Ol,{children:(0,s.jsx)(r.ll,{children:"Language Preferences"})}),(0,s.jsx)(r.aY,{children:(0,s.jsx)("div",{className:"space-y-4",children:Object.entries(R.nigerianMarket.languagePreferences).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"capitalize",children:t}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)(i.C,{variant:"outline",children:[U(a.userCount)," users"]}),(0,s.jsxs)(i.C,{variant:"secondary",children:[a.avgEngagement.toFixed(0),"% engaged"]})]})]},t)})})})]}),(0,s.jsxs)(r.Zb,{children:[(0,s.jsx)(r.Ol,{children:(0,s.jsx)(r.ll,{children:"Cultural Events Performance"})}),(0,s.jsx)(r.aY,{children:(0,s.jsx)("div",{className:"space-y-4",children:R.nigerianMarket.culturalEvents.map((e,t)=>(0,s.jsxs)("div",{className:"p-3 border rounded",children:[(0,s.jsx)("h4",{className:"font-medium",children:e.event}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:e.period}),(0,s.jsxs)("div",{className:"flex justify-between mt-2 text-sm",children:[(0,s.jsxs)("span",{children:["Engagement: ",e.engagement,"%"]}),(0,s.jsxs)("span",{children:["Revenue: ",D(e.revenue)]})]})]},t))})})]})]}),(0,s.jsxs)(r.Zb,{children:[(0,s.jsx)(r.Ol,{children:(0,s.jsx)(r.ll,{children:"Local Business Impact"})}),(0,s.jsx)(r.aY,{children:(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-2xl font-bold",children:R.localBusiness.merchantGrowth.newMerchants}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"New Merchants"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-2xl font-bold",children:R.localBusiness.merchantGrowth.activeMerchants}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Active Merchants"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-2xl font-bold",children:D(R.localBusiness.economicImpact.totalRevenueGenerated)}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Revenue Generated"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-2xl font-bold",children:R.localBusiness.jobCreation.estimatedImpact}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Jobs Created"})]})]})})]})]}),(0,s.jsxs)(c.TabsContent,{value:"recommendations",className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,s.jsxs)(r.Zb,{children:[(0,s.jsx)(r.Ol,{children:(0,s.jsx)(r.ll,{className:"text-green-600",children:"Short-term Actions"})}),(0,s.jsx)(r.aY,{children:(0,s.jsx)("ul",{className:"space-y-2",children:R.recommendations.shortTerm.map((e,t)=>(0,s.jsxs)("li",{className:"flex items-start gap-2 text-sm",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2 flex-shrink-0"}),(0,s.jsx)("span",{children:e})]},t))})})]}),(0,s.jsxs)(r.Zb,{children:[(0,s.jsx)(r.Ol,{children:(0,s.jsx)(r.ll,{className:"text-blue-600",children:"Long-term Strategy"})}),(0,s.jsx)(r.aY,{children:(0,s.jsx)("ul",{className:"space-y-2",children:R.recommendations.longTerm.map((e,t)=>(0,s.jsxs)("li",{className:"flex items-start gap-2 text-sm",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),(0,s.jsx)("span",{children:e})]},t))})})]}),(0,s.jsxs)(r.Zb,{children:[(0,s.jsx)(r.Ol,{children:(0,s.jsx)(r.ll,{className:"text-purple-600",children:"Strategic Initiatives"})}),(0,s.jsx)(r.aY,{children:(0,s.jsx)("ul",{className:"space-y-2",children:R.recommendations.strategic.map((e,t)=>(0,s.jsxs)("li",{className:"flex items-start gap-2 text-sm",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2 flex-shrink-0"}),(0,s.jsx)("span",{children:e})]},t))})})]})]}),(0,s.jsxs)(r.Zb,{children:[(0,s.jsx)(r.Ol,{children:(0,s.jsx)(r.ll,{children:"Market Trends"})}),(0,s.jsx)(r.aY,{children:(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-green-600 mb-2",children:"Accelerating"}),(0,s.jsx)("ul",{className:"space-y-1",children:R.trends.accelerating.map((e,t)=>(0,s.jsxs)("li",{className:"text-sm",children:["• ",e]},t))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-red-600 mb-2",children:"Declining"}),(0,s.jsx)("ul",{className:"space-y-1",children:R.trends.declining.map((e,t)=>(0,s.jsxs)("li",{className:"text-sm",children:["• ",e]},t))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-blue-600 mb-2",children:"Emerging"}),(0,s.jsx)("ul",{className:"space-y-1",children:R.trends.emerging.map((e,t)=>(0,s.jsxs)("li",{className:"text-sm",children:["• ",e]},t))})]})]})})]})]})]})]})}u.kL.register(u.uw,u.f$,u.od,u.jn,u.ZL,u.qi,u.l7,u.Dx,u.u,u.De)},2832:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return y},useLoyaltyStats:function(){return j}});var s=a(7437),n=a(2265),r=a(9598),i=a(708),l=a(3611),c=a(3177),o=a(1628);let d=n.forwardRef((e,t)=>{let{className:a,value:n,...r}=e;return(0,s.jsx)(c.fC,{ref:t,className:(0,o.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",a),...r,children:(0,s.jsx)(c.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(n||0),"%)")}})})});d.displayName=c.fC.displayName;var u=a(8783),m=a(5688),g=a(9168),h=a(5750),x=a(5340),p=a(2505),f=a(6654),v=a(5790);function y(e){let{restaurantId:t,showDetails:a=!1,compact:n=!1,className:c=""}=e,y={totalUsers:15240,activeUsers:12380,totalPoints:1905e4,redemptionRate:44.2,topTier:"Platinum",newSignups:890,churnRate:2.1,roi:54,customerLTV:157500,programHealth:87.5,tierDistribution:{bronze:55.8,silver:27.6,gold:13.8,platinum:2.9},topPerformingStates:[{name:"Lagos",users:4200,growth:15.2},{name:"Abuja",users:2800,growth:12.8},{name:"Kano",users:1800,growth:8.5}]},j=e=>new Intl.NumberFormat("en-NG").format(e),b=e=>{let{value:t}=e;return t>0?(0,s.jsx)(u.Z,{className:"h-3 w-3 text-green-500"}):t<0?(0,s.jsx)(m.Z,{className:"h-3 w-3 text-red-500"}):null};return n?(0,s.jsxs)(r.Zb,{className:c,children:[(0,s.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(r.ll,{className:"text-sm font-medium",children:"Loyalty Program"}),(0,s.jsx)(g.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(r.aY,{children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-2xl font-bold",children:j(y.totalUsers)}),(0,s.jsx)(i.C,{variant:"secondary",children:"Users"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsxs)("span",{children:["Active: ",j(y.activeUsers)]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(b,{value:12.5}),(0,s.jsx)("span",{className:"text-green-500",children:"+12.5%"})]})]}),(0,s.jsx)("div",{className:"w-full bg-secondary rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(y.activeUsers/y.totalUsers*100,"%")}})}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground text-center",children:[(y.activeUsers/y.totalUsers*100).toFixed(1),"% Active"]})]})})]}):(0,s.jsxs)("div",{className:"space-y-6 ".concat(c),children:[(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,s.jsxs)(r.Zb,{children:[(0,s.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(r.ll,{className:"text-sm font-medium",children:"Total Users"}),(0,s.jsx)(h.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(r.aY,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:j(y.totalUsers)}),(0,s.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground",children:[(0,s.jsx)(b,{value:12.5}),(0,s.jsx)("span",{className:"ml-1 text-green-500",children:"+12.5% from last month"})]})]})]}),(0,s.jsxs)(r.Zb,{children:[(0,s.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(r.ll,{className:"text-sm font-medium",children:"Active Users"}),(0,s.jsx)(x.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(r.aY,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:j(y.activeUsers)}),(0,s.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground",children:[(0,s.jsx)(b,{value:8.3}),(0,s.jsx)("span",{className:"ml-1 text-green-500",children:"+8.3% from last month"})]})]})]}),(0,s.jsxs)(r.Zb,{children:[(0,s.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(r.ll,{className:"text-sm font-medium",children:"Total Points"}),(0,s.jsx)(p.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(r.aY,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:j(y.totalPoints)}),(0,s.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground",children:[(0,s.jsx)(b,{value:15.2}),(0,s.jsx)("span",{className:"ml-1 text-green-500",children:"+15.2% from last month"})]})]})]}),(0,s.jsxs)(r.Zb,{children:[(0,s.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(r.ll,{className:"text-sm font-medium",children:"ROI"}),(0,s.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsxs)(r.aY,{children:[(0,s.jsxs)("div",{className:"text-2xl font-bold",children:[y.roi.toFixed(1),"%"]}),(0,s.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground",children:[(0,s.jsx)(b,{value:18.7}),(0,s.jsx)("span",{className:"ml-1 text-green-500",children:"+18.7% from last month"})]})]})]})]}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,s.jsxs)(r.Zb,{children:[(0,s.jsx)(r.Ol,{children:(0,s.jsx)(r.ll,{className:"text-lg",children:"Program Health"})}),(0,s.jsxs)(r.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,s.jsx)("span",{children:"Overall Health Score"}),(0,s.jsxs)("span",{className:"font-medium",children:[y.programHealth.toFixed(1),"%"]})]}),(0,s.jsx)(d,{value:y.programHealth,className:"h-2"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-lg font-bold text-green-600",children:(0,o.xG)(y.customerLTV)}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Customer LTV"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"text-lg font-bold text-blue-600",children:[y.redemptionRate.toFixed(1),"%"]}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Redemption Rate"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-lg font-bold text-purple-600",children:j(y.newSignups)}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"New Signups"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"text-lg font-bold text-red-600",children:[y.churnRate.toFixed(1),"%"]}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Churn Rate"})]})]})]})]}),(0,s.jsxs)(r.Zb,{children:[(0,s.jsx)(r.Ol,{children:(0,s.jsx)(r.ll,{className:"text-lg",children:"Tier Distribution"})}),(0,s.jsxs)(r.aY,{className:"space-y-4",children:[(0,s.jsx)("div",{className:"space-y-3",children:Object.entries(y.tierDistribution).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"capitalize",children:t}),(0,s.jsxs)("span",{className:"font-medium",children:[a.toFixed(1),"%"]})]}),(0,s.jsx)(d,{value:a,className:"h-2"})]},t)})}),(0,s.jsx)("div",{className:"pt-2 border-t",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Top Tier"}),(0,s.jsx)(i.C,{variant:"outline",className:"bg-gradient-to-r from-yellow-400 to-yellow-600 text-white",children:y.topTier})]})})]})]})]}),a&&(0,s.jsxs)(r.Zb,{children:[(0,s.jsx)(r.Ol,{children:(0,s.jsx)(r.ll,{className:"text-lg",children:"Top Performing States"})}),(0,s.jsx)(r.aY,{children:(0,s.jsx)("div",{className:"space-y-4",children:y.topPerformingStates.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,s.jsxs)("span",{className:"text-sm font-bold text-blue-600",children:["#",t+1]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[j(e.users)," users"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"text-sm font-medium",children:["+",e.growth.toFixed(1),"%"]}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Growth"})]}),(0,s.jsx)(v.Z,{className:"h-4 w-4 text-green-500"})]})]},e.name))})})]}),(0,s.jsxs)(r.Zb,{children:[(0,s.jsx)(r.Ol,{children:(0,s.jsx)(r.ll,{className:"text-lg",children:"Quick Actions"})}),(0,s.jsx)(r.aY,{children:(0,s.jsxs)("div",{className:"grid gap-2 md:grid-cols-3",children:[(0,s.jsxs)(l.z,{variant:"outline",className:"justify-start",children:[(0,s.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"View Full Analytics"]}),(0,s.jsxs)(l.z,{variant:"outline",className:"justify-start",children:[(0,s.jsx)(h.Z,{className:"h-4 w-4 mr-2"}),"Manage Users"]}),(0,s.jsxs)(l.z,{variant:"outline",className:"justify-start",children:[(0,s.jsx)(f.Z,{className:"h-4 w-4 mr-2"}),"Create Campaign"]})]})})]})]})}function j(e){return{totalUsers:15240,activeUsers:12380,totalPoints:1905e4,redemptionRate:44.2,programROI:54,isLoading:!1,error:null}}},708:function(e,t,a){"use strict";a.d(t,{C:function(){return l}});var s=a(7437);a(2265);var n=a(6061),r=a(1628);let i=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:a,...n}=e;return(0,s.jsx)("div",{className:(0,r.cn)(i({variant:a}),t),...n})}},3611:function(e,t,a){"use strict";a.d(t,{z:function(){return o}});var s=a(7437),n=a(2265),r=a(7256),i=a(6061),l=a(1628);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=n.forwardRef((e,t)=>{let{className:a,variant:n,size:i,asChild:o=!1,...d}=e,u=o?r.g7:"button";return(0,s.jsx)(u,{className:(0,l.cn)(c({variant:n,size:i,className:a})),ref:t,...d})});o.displayName="Button"},9598:function(e,t,a){"use strict";a.d(t,{Ol:function(){return l},SZ:function(){return o},Zb:function(){return i},aY:function(){return d},eW:function(){return u},ll:function(){return c}});var s=a(7437),n=a(2265),r=a(1628);let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...n})});i.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a),...n})});l.displayName="CardHeader";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",a),...n})});c.displayName="CardTitle";let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",a),...n})});o.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",a),...n})});d.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",a),...n})});u.displayName="CardFooter"},7532:function(e,t,a){"use strict";a.d(t,{Bw:function(){return x},Ph:function(){return d},Ql:function(){return f},i4:function(){return m},ki:function(){return u}});var s=a(7437),n=a(2265),r=a(663),i=a(3523),l=a(9224),c=a(2442),o=a(1628);let d=r.fC;r.ZA;let u=r.B4,m=n.forwardRef((e,t)=>{let{className:a,children:n,...l}=e;return(0,s.jsxs)(r.xz,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[n,(0,s.jsx)(r.JO,{asChild:!0,children:(0,s.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=r.xz.displayName;let g=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.u_,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...n,children:(0,s.jsx)(l.Z,{className:"h-4 w-4"})})});g.displayName=r.u_.displayName;let h=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.$G,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...n,children:(0,s.jsx)(i.Z,{className:"h-4 w-4"})})});h.displayName=r.$G.displayName;let x=n.forwardRef((e,t)=>{let{className:a,children:n,position:i="popper",...l}=e;return(0,s.jsx)(r.h_,{children:(0,s.jsxs)(r.VY,{ref:t,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...l,children:[(0,s.jsx)(g,{}),(0,s.jsx)(r.l_,{className:(0,o.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),(0,s.jsx)(h,{})]})})});x.displayName=r.VY.displayName;let p=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.__,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...n})});p.displayName=r.__.displayName;let f=n.forwardRef((e,t)=>{let{className:a,children:n,...i}=e;return(0,s.jsxs)(r.ck,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(r.wU,{children:(0,s.jsx)(c.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(r.eT,{children:n})]})});f.displayName=r.ck.displayName;let v=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.Z0,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",a),...n})});v.displayName=r.Z0.displayName},1750:function(e,t,a){"use strict";a.r(t),a.d(t,{Tabs:function(){return l},TabsContent:function(){return d},TabsList:function(){return c},TabsTrigger:function(){return o}});var s=a(7437),n=a(2265),r=a(4545),i=a(1628);let l=r.fC,c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.aV,{ref:t,className:(0,i.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...n})});c.displayName=r.aV.displayName;let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.xz,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...n})});o.displayName=r.xz.displayName;let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(r.VY,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...n})});d.displayName=r.VY.displayName},1628:function(e,t,a){"use strict";a.d(t,{cn:function(){return r},xG:function(){return i}});var s=a(7042),n=a(4769);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.m6)((0,s.W)(t))}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}}},function(e){e.O(0,[7674,6723,7998,9401,7709,9725,4522,3149,3891,2971,2472,1744],function(){return e(e.s=5800)}),_N_E=e.O()}]);