(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1737],{2482:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var i=a(2898);let s=(0,i.Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},3546:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var i=a(2898);let s=(0,i.Z)("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]])},5432:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var i=a(2898);let s=(0,i.Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},1827:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var i=a(2898);let s=(0,i.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},1541:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var i=a(2898);let s=(0,i.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},5094:function(e,t,a){Promise.resolve().then(a.bind(a,149))},149:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return A}});var i=a(7437),s=a(2265),n=a(4033),r=a(5366),o=a(9598),c=a(3611),l=a(5340),d=a(6142);function h(e){let{restaurant:t,onBook:a,onViewMenu:n,onShare:r}=e,[h,u]=(0,s.useState)(!1);return(0,i.jsx)("div",{className:"w-full max-w-sm mx-auto",children:(0,i.jsx)(o.Zb,{className:"overflow-hidden",children:(0,i.jsxs)(o.aY,{className:"p-4",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,i.jsx)("h3",{className:"font-semibold text-lg",children:t.name}),(0,i.jsx)("span",{className:"text-sm text-gray-500",children:t.cuisine})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)(l.Z,{className:"w-4 h-4 text-yellow-400 fill-current"}),(0,i.jsx)("span",{className:"ml-1 text-sm",children:t.rating}),(0,i.jsxs)("span",{className:"ml-1 text-sm text-gray-500",children:["(",t.reviews,")"]})]}),(0,i.jsx)("span",{className:"text-sm text-gray-500",children:t.priceRange})]}),(0,i.jsxs)("div",{className:"flex items-center text-sm text-gray-500 mb-4",children:[(0,i.jsx)(d.Z,{className:"w-4 h-4 mr-1"}),(0,i.jsx)("span",{children:t.location}),t.distance&&(0,i.jsx)("span",{className:"ml-2",children:t.distance})]}),(0,i.jsxs)("div",{className:"flex space-x-2",children:[(0,i.jsx)(c.z,{onClick:()=>{a(t.id)},className:"flex-1",disabled:!t.isOpen,children:t.isOpen?"Book Now":"Closed"}),(0,i.jsx)(c.z,{variant:"outline",onClick:()=>{n(t.id)},children:"Menu"})]})]})})})}var u=a(2732),m=a(2167),g=a(5251),p=a(5432);function v(e){let{onRefresh:t,children:a,className:n=""}=e,[r,o]=(0,s.useState)(!1),[c,l]=(0,s.useState)(0),d=async()=>{o(!0);try{await t()}catch(e){console.error("Refresh failed:",e)}finally{o(!1),l(0)}},{onTouchStart:h,onTouchMove:u,onTouchEnd:v}=function(e){let t=(0,s.useRef)(0),a=(0,s.useRef)(0),i=(0,s.useRef)(!1),n=(0,s.useCallback)(e=>{window.scrollY>0||(t.current=e.touches[0].clientY)},[]),r=(0,s.useCallback)(e=>{if(window.scrollY>0)return;a.current=e.touches[0].clientY;let s=a.current-t.current;s>0&&(i.current=!0,e.preventDefault())},[]),o=(0,s.useCallback)(async()=>{i.current&&a.current-t.current>100&&await e(),i.current=!1,t.current=0,a.current=0},[e]);return{onTouchStart:n,onTouchMove:r,onTouchEnd:o}}(d);return window.innerWidth>=768?(0,i.jsx)("div",{className:n,children:a}):(0,i.jsxs)("div",{className:n,children:[(0,i.jsx)(m.M,{children:c>0&&(0,i.jsx)(g.E.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"fixed top-0 left-0 right-0 z-40 flex items-center justify-center h-16 bg-white dark:bg-gray-950 shadow-sm",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(g.E.div,{animate:{rotate:r?360:c>50?180:0},transition:{duration:r?1:.3,repeat:r?1/0:0,ease:r?"linear":"easeOut"},className:"w-6 h-6 border-2 border-blue-500 border-t-transparent rounded-full ".concat(r?"animate-spin":""),children:c>50&&!r&&(0,i.jsx)(p.Z,{className:"w-4 h-4 text-blue-500 absolute top-1 left-1"})}),(0,i.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:r?"Refreshing...":c>50?"Release to refresh":"Pull to refresh"})]})})}),(0,i.jsx)("div",{onTouchStart:e=>{window.scrollY>0||h(e)},onTouchMove:e=>{if(window.scrollY>0)return;u(e);let t=e.touches[0],a=parseFloat(t.startY)||0,i=t.clientY;l(Math.min(Math.max(0,i-a),100))},onTouchEnd:()=>{v(),setTimeout(()=>l(0),300)},style:{transform:c>0?"translateY(".concat(Math.min(.5*c,30),"px)"):"translateY(0)",transition:c>50?"none":"transform 0.3s ease-out"},children:a})]})}var y=a(4035),f=a(1541),x=a(2549),w=a(2031);class _{constructor(e,t,a,i,s){this._legacyCanvasSize=_.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=e,this.$canvas=document.createElement("canvas"),a&&"object"==typeof a?this._onDecode=t:(a||i||s?console.warn("You're using a deprecated version of the QrScanner constructor which will be removed in the future"):console.warn("Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=t),t="object"==typeof a?a:{},this._onDecodeError=t.onDecodeError||("function"==typeof a?a:this._onDecodeError),this._calculateScanRegion=t.calculateScanRegion||("function"==typeof i?i:this._calculateScanRegion),this._preferredCamera=t.preferredCamera||s||this._preferredCamera,this._legacyCanvasSize="number"==typeof a?a:"number"==typeof i?i:this._legacyCanvasSize,this._maxScansPerSecond=t.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),e.disablePictureInPicture=!0,e.playsInline=!0,e.muted=!0;let n=!1;if(e.hidden&&(e.hidden=!1,n=!0),document.body.contains(e)||(document.body.appendChild(e),n=!0),a=e.parentElement,t.highlightScanRegion||t.highlightCodeOutline){if(i=!!t.overlay,this.$overlay=t.overlay||document.createElement("div"),(s=this.$overlay.style).position="absolute",s.display="none",s.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!i&&t.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch(e){}a.insertBefore(this.$overlay,this.$video.nextSibling)}t.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(e),requestAnimationFrame(()=>{let t=window.getComputedStyle(e);"none"===t.display&&(e.style.setProperty("display","block","important"),n=!0),"visible"!==t.visibility&&(e.style.setProperty("visibility","visible","important"),n=!0),n&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),e.style.opacity="0",e.style.width="0",e.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),e.addEventListener("play",this._onPlay),e.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=_.createQrEngine()}static set WORKER_PATH(e){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await _.listCameras(!1)).length}catch(e){return!1}}static async listCameras(e=!1){if(!navigator.mediaDevices)return[];let t=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(e=>"videoinput"===e.kind),a;try{e&&(await t()).every(e=>!e.label)&&(a=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch(e){}try{return(await t()).map((e,t)=>({id:e.deviceId,label:e.label||(0===t?"Default Camera":`Camera ${t+1}`)}))}finally{a&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),_._stopVideoStream(a))}}async hasFlash(){let e;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;e=this.$video.srcObject}else e=(await this._getCameraStream()).stream;return"torch"in e.getVideoTracks()[0].getSettings()}catch(e){return!1}finally{e&&e!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),_._stopVideoStream(e))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(e){throw this._flashOn=!1,e}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),_._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&("https:"!==window.location.protocol&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden)){if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:e,facingMode:t}=await this._getCameraStream();!this._active||this._paused?_._stopVideoStream(e):(this._setVideoMirror(t),this.$video.srcObject=e,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(e){if(!this._paused)throw this._active=!1,e}}}stop(){this.pause(),this._active=!1}async pause(e=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let t=()=>{this.$video.srcObject instanceof MediaStream&&(_._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return e?(t(),!0):(await new Promise(e=>setTimeout(e,300)),!!this._paused&&(t(),!0))}async setCamera(e){e!==this._preferredCamera&&(this._preferredCamera=e,await this._restartVideoStream())}static async scanImage(e,t,a,i,s=!1,n=!1){let r,o=!1;t&&("scanRegion"in t||"qrEngine"in t||"canvas"in t||"disallowCanvasResizing"in t||"alsoTryWithoutScanRegion"in t||"returnDetailedScanResult"in t)?(r=t.scanRegion,a=t.qrEngine,i=t.canvas,s=t.disallowCanvasResizing||!1,n=t.alsoTryWithoutScanRegion||!1,o=!0):t||a||i||s||n?console.warn("You're using a deprecated api for scanImage which will be removed in the future."):console.warn("Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),t=!!a;try{let c,l,d;if([a,c]=await Promise.all([a||_.createQrEngine(),_._loadImage(e)]),[i,l]=_._drawToCanvas(c,r,i,s),a instanceof Worker){let e=a;t||_._postWorkerMessageSync(e,"inversionMode","both"),d=await new Promise((t,a)=>{let s,n,o,c=-1;n=i=>{i.data.id===c&&(e.removeEventListener("message",n),e.removeEventListener("error",o),clearTimeout(s),null!==i.data.data?t({data:i.data.data,cornerPoints:_._convertPoints(i.data.cornerPoints,r)}):a(_.NO_QR_CODE_FOUND))},o=t=>{e.removeEventListener("message",n),e.removeEventListener("error",o),clearTimeout(s),a("Scanner error: "+(t?t.message||t:"Unknown Error"))},e.addEventListener("message",n),e.addEventListener("error",o),s=setTimeout(()=>o("timeout"),1e4);let d=l.getImageData(0,0,i.width,i.height);c=_._postWorkerMessageSync(e,"decode",d,[d.data.buffer])})}else d=await Promise.race([new Promise((e,t)=>window.setTimeout(()=>t("Scanner error: timeout"),1e4)),(async()=>{try{var[t]=await a.detect(i);if(!t)throw _.NO_QR_CODE_FOUND;return{data:t.rawValue,cornerPoints:_._convertPoints(t.cornerPoints,r)}}catch(a){if(t=a.message||a,/not implemented|service unavailable/.test(t))return _._disableBarcodeDetector=!0,_.scanImage(e,{scanRegion:r,canvas:i,disallowCanvasResizing:s,alsoTryWithoutScanRegion:n});throw`Scanner error: ${t}`}})()]);return o?d:d.data}catch(c){if(!r||!n)throw c;let t=await _.scanImage(e,{qrEngine:a,canvas:i,disallowCanvasResizing:s});return o?t:t.data}finally{t||_._postWorkerMessage(a,"close")}}setGrayscaleWeights(e,t,a,i=!0){_._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:e,green:t,blue:a,useIntegerApproximation:i})}setInversionMode(e){_._postWorkerMessage(this._qrEnginePromise,"inversionMode",e)}static async createQrEngine(e){if(e&&console.warn("Specifying a worker path is not required and not supported anymore."),e=()=>a.e(3760).then(a.bind(a,3760)).then(e=>e.createWorker()),!(!_._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")))return e();let t=navigator.userAgentData;return t&&t.brands.some(({brand:e})=>/Chromium/i.test(e))&&/mac ?OS/i.test(t.platform)&&await t.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:e,platformVersion:t})=>/arm/i.test(e||"arm")&&13<=parseInt(t||"13")).catch(()=>!0)?e():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(e){let t=Math.round(2/3*Math.min(e.videoWidth,e.videoHeight));return{x:Math.round((e.videoWidth-t)/2),y:Math.round((e.videoHeight-t)/2),width:t,height:t,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var e=this.$video,t=e.videoWidth,a=e.videoHeight,i=e.offsetWidth,s=e.offsetHeight,n=e.offsetLeft,r=e.offsetTop,o=window.getComputedStyle(e),c=o.objectFit,l=t/a,d=i/s;switch(c){case"none":var h=t,u=a;break;case"fill":h=i,u=s;break;default:("cover"===c?l>d:l<d)?h=(u=s)*l:u=(h=i)/l,"scale-down"===c&&(h=Math.min(h,t),u=Math.min(u,a))}var[m,g]=o.objectPosition.split(" ").map((e,t)=>{let a=parseFloat(e);return e.endsWith("%")?(t?s-u:i-h)*a/100:a});o=this._scanRegion.width||t,d=this._scanRegion.height||a,c=this._scanRegion.x||0;var p=this._scanRegion.y||0;(l=this.$overlay.style).width=`${o/t*h}px`,l.height=`${d/a*u}px`,l.top=`${r+g+p/a*u}px`,a=/scaleX\(-1\)/.test(e.style.transform),l.left=`${n+(a?i-m-h:m)+(a?t-c-o:c)/t*h}px`,l.transform=e.style.transform}})}static _convertPoints(e,t){if(!t)return e;let a=t.x||0,i=t.y||0,s=t.width&&t.downScaledWidth?t.width/t.downScaledWidth:1;for(let n of(t=t.height&&t.downScaledHeight?t.height/t.downScaledHeight:1,e))n.x=n.x*s+a,n.y=n.y*t+i;return e}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var e=Date.now()-this._lastScanTimestamp,t=1e3/this._maxScansPerSecond;e<t&&await new Promise(a=>setTimeout(a,t-e)),this._lastScanTimestamp=Date.now();try{var a=await _.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(e){if(!this._active)return;this._onDecodeError(e)}!_._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=_.createQrEngine()),a?(this._onDecode?this._onDecode(a):this._legacyOnDecode&&this._legacyOnDecode(a.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} ${this._scanRegion.y||0} ${this._scanRegion.width||this.$video.videoWidth} ${this._scanRegion.height||this.$video.videoHeight}`),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",a.cornerPoints.map(({x:e,y:t})=>`${e},${t}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(e){e!==_.NO_QR_CODE_FOUND&&console.log(e)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let e=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",t=[{width:{min:1024}},{width:{min:768}},{}];for(let a of[...t.map(t=>Object.assign({},t,{[e]:{exact:this._preferredCamera}})),...t])try{let e=await navigator.mediaDevices.getUserMedia({video:a,audio:!1}),t=this._getFacingMode(e)||(a.facingMode?this._preferredCamera:"environment"===this._preferredCamera?"user":"environment");return{stream:e,facingMode:t}}catch(e){}throw"Camera not found."}async _restartVideoStream(){let e=this._paused;await this.pause(!0)&&!e&&this._active&&await this.start()}static _stopVideoStream(e){for(let t of e.getTracks())t.stop(),e.removeTrack(t)}_setVideoMirror(e){this.$video.style.transform="scaleX("+("user"===e?-1:1)+")"}_getFacingMode(e){return(e=e.getVideoTracks()[0])?/rear|back|environment/i.test(e.label)?"environment":/front|user|face/i.test(e.label)?"user":null:null}static _drawToCanvas(e,t,a,i=!1){a=a||document.createElement("canvas");let s=t&&t.x?t.x:0,n=t&&t.y?t.y:0,r=t&&t.width?t.width:e.videoWidth||e.width,o=t&&t.height?t.height:e.videoHeight||e.height;return i||(i=t&&t.downScaledWidth?t.downScaledWidth:r,t=t&&t.downScaledHeight?t.downScaledHeight:o,a.width!==i&&(a.width=i),a.height!==t&&(a.height=t)),(t=a.getContext("2d",{alpha:!1})).imageSmoothingEnabled=!1,t.drawImage(e,s,n,r,o,0,0,a.width,a.height),[a,t]}static async _loadImage(e){if(e instanceof Image)return await _._awaitImageLoad(e),e;if(e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement||e instanceof SVGImageElement||"OffscreenCanvas"in window&&e instanceof OffscreenCanvas||"ImageBitmap"in window&&e instanceof ImageBitmap)return e;if(e instanceof File||e instanceof Blob||e instanceof URL||"string"==typeof e){let t=new Image;t.src=e instanceof File||e instanceof Blob?URL.createObjectURL(e):e.toString();try{return await _._awaitImageLoad(t),t}finally{(e instanceof File||e instanceof Blob)&&URL.revokeObjectURL(t.src)}}else throw"Unsupported image type."}static async _awaitImageLoad(e){e.complete&&0!==e.naturalWidth||await new Promise((t,a)=>{let i=s=>{e.removeEventListener("load",i),e.removeEventListener("error",i),s instanceof ErrorEvent?a("Image load error"):t()};e.addEventListener("load",i),e.addEventListener("error",i)})}static async _postWorkerMessage(e,t,a,i){return _._postWorkerMessageSync(await e,t,a,i)}static _postWorkerMessageSync(e,t,a,i){if(!(e instanceof Worker))return -1;let s=_._workerMessageId++;return e.postMessage({id:s,type:t,data:a},i),s}}function b(e){let{onScan:t,onClose:a,isOpen:n,title:r="Scan QR Code"}=e,[o,l]=(0,s.useState)(null),[d,h]=(0,s.useState)(null),[u,m]=(0,s.useState)("prompt"),g=(0,s.useRef)(null),p=(0,s.useRef)(null);(0,s.useEffect)(()=>(n&&g.current?v():b(),()=>{b()}),[n]);let v=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({video:!0});e.getTracks().forEach(e=>e.stop()),m("granted");let i=new _(g.current,e=>{t(e.data),a()},{preferredCamera:"environment",highlightScanRegion:!0,highlightCodeOutline:!0,maxScansPerSecond:1});l(i),await i.start(),h(null)}catch(e){console.error("Camera access error:",e),m("denied"),h("Camera access denied. Please allow camera permissions to scan QR codes.")}},b=()=>{o&&(o.stop(),o.destroy(),l(null))},j=e=>{var i;let s=null===(i=e.target.files)||void 0===i?void 0:i[0];s&&_.scanImage(s).then(e=>{t(e),a()}).catch(e=>{h("Could not scan QR code from image. Please try again.")})};return"denied"===u?(0,i.jsx)(w.Vq,{open:n,onOpenChange:a,children:(0,i.jsxs)(w.cZ,{className:"sm:max-w-md",children:[(0,i.jsx)(w.fK,{children:(0,i.jsx)(w.$N,{children:r})}),(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center p-6 text-center",children:[(0,i.jsx)(y.Z,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,i.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Camera access is required to scan QR codes. Please enable camera permissions in your browser settings and try again."}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)(c.z,{variant:"outline",onClick:()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.click()},className:"flex items-center gap-2",children:[(0,i.jsx)(f.Z,{className:"h-4 w-4"}),"Upload Image"]}),(0,i.jsx)("input",{ref:p,type:"file",accept:"image/*",onChange:j,className:"hidden"})]})]}),d&&(0,i.jsx)("div",{className:"text-center text-sm text-destructive",children:d})]})}):(0,i.jsx)(w.Vq,{open:n,onOpenChange:a,children:(0,i.jsxs)(w.cZ,{className:"sm:max-w-md p-0",children:[(0,i.jsx)(w.fK,{className:"p-6 pb-0",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)(w.$N,{children:r}),(0,i.jsx)(c.z,{variant:"ghost",size:"sm",onClick:a,children:(0,i.jsx)(x.Z,{className:"h-4 w-4"})})]})}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("video",{ref:g,className:"w-full h-64 bg-black rounded-none",playsInline:!0,muted:!0}),d&&(0,i.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-75",children:(0,i.jsxs)("div",{className:"text-center text-white p-4",children:[(0,i.jsx)(y.Z,{className:"h-8 w-8 mx-auto mb-2"}),(0,i.jsx)("p",{className:"text-sm",children:d}),(0,i.jsx)(c.z,{variant:"outline",onClick:()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.click()},className:"mt-4 bg-white text-black hover:bg-gray-100",children:"Upload Image Instead"})]})})]}),(0,i.jsxs)("div",{className:"p-6 pt-4",children:[(0,i.jsx)("p",{className:"text-sm text-muted-foreground text-center",children:"Position the QR code within the camera view to scan"}),(0,i.jsx)("input",{ref:p,type:"file",accept:"image/*",onChange:j,className:"hidden"})]})]})})}_.DEFAULT_CANVAS_SIZE=400,_.NO_QR_CODE_FOUND="No QR code found",_._disableBarcodeDetector=!1,_._workerMessageId=0;var j=a(708),N=a(5831),k=a(1465),S=a(8203),C=a(6141),R=a(5750),O=a(1295),$=a(2741),E=a(2882),M=a(446),P=a(5566);function T(e){let{restaurantName:t,onSubmit:a,onCancel:n}=e,[r,l]=(0,s.useState)(!1),[d,h]=(0,s.useState)({date:"",time:"",partySize:2,guestName:"",guestEmail:"",guestPhone:"",specialRequests:"",notifications:!0}),{toast:u}=(0,M.pm)(),{vibrate:m,mediumImpact:p}=function(){let e=(0,s.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;"vibrate"in navigator&&navigator.vibrate(e)},[]),t=(0,s.useCallback)(()=>{"vibrate"in navigator&&navigator.vibrate(10)},[]),a=(0,s.useCallback)(()=>{"vibrate"in navigator&&navigator.vibrate(20)},[]),i=(0,s.useCallback)(()=>{"vibrate"in navigator&&navigator.vibrate(30)},[]);return{vibrate:e,lightImpact:t,mediumImpact:a,heavyImpact:i}}(),{subscribeToPush:v,sendNotification:y}=function(){let[e,t]=(0,s.useState)({permission:Notification.permission,isSubscribed:!1,subscription:null}),a=async()=>{if(!("Notification"in window))return console.warn("This browser does not support notifications"),"denied";let e=await Notification.requestPermission();return t(t=>({...t,permission:e})),e},i=async i=>{if("granted"!==e.permission){let e=await a();if("granted"!==e)return!1}try{let e=await navigator.serviceWorker.ready,a=await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:P.env.NEXT_PUBLIC_VAPID_PUBLIC_KEY});return t(e=>({...e,isSubscribed:!0,subscription:a})),await fetch("/api/notifications/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:a,userId:i})}),!0}catch(e){return console.error("Failed to subscribe to push notifications:",e),!1}},n=async()=>{if(!e.subscription)return!1;try{return await e.subscription.unsubscribe(),t(e=>({...e,isSubscribed:!1,subscription:null})),await fetch("/api/notifications/unsubscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:e.subscription})}),!0}catch(e){return console.error("Failed to unsubscribe from push notifications:",e),!1}},r=async function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"Notification"in window&&"granted"===e.permission&&new Notification(t,{icon:"/icons/icon-192x192.png",badge:"/icons/icon-72x72.png",...a})};return{...e,requestPermission:a,subscribeToPush:i,unsubscribeFromPush:n,sendNotification:r}}(),f=(e,t)=>{h(a=>({...a,[e]:t}))},x=async e=>{e.preventDefault(),p(),l(!0);try{d.notifications&&await v("current-user-id"),await a(d),d.notifications&&y("Booking Confirmed!",{body:"Your table at ".concat(t," has been booked for ").concat(d.date," at ").concat(d.time),icon:"/icons/icon-192x192.png",tag:"booking-confirmation"}),u({title:"Booking Confirmed!",description:"Your table at ".concat(t," has been successfully booked.")})}catch(e){u({title:"Booking Failed",description:"Please check your information and try again.",variant:"destructive"})}finally{l(!1)}},w=new Date().toISOString().split("T")[0];return(0,i.jsx)(g.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md mx-auto",children:(0,i.jsxs)(o.Zb,{className:"shadow-lg",children:[(0,i.jsx)(o.Ol,{children:(0,i.jsxs)(o.ll,{className:"text-xl text-center",children:["Book at ",t]})}),(0,i.jsxs)("form",{onSubmit:x,children:[(0,i.jsxs)(o.aY,{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)(k._,{htmlFor:"date",className:"flex items-center gap-2",children:[(0,i.jsx)(S.Z,{className:"h-4 w-4"}),"Date"]}),(0,i.jsx)(N.I,{id:"date",type:"date",min:w,required:!0,value:d.date,onChange:e=>f("date",e.target.value),className:"touch-target"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)(k._,{htmlFor:"time",className:"flex items-center gap-2",children:[(0,i.jsx)(C.Z,{className:"h-4 w-4"}),"Time"]}),(0,i.jsx)("div",{className:"grid grid-cols-3 gap-2 max-h-32 overflow-y-auto",children:["11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30"].map(e=>(0,i.jsx)(c.z,{type:"button",variant:d.time===e?"default":"outline",size:"sm",className:"h-10 text-xs touch-target",onClick:()=>f("time",e),children:e},e))})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)(k._,{htmlFor:"partySize",className:"flex items-center gap-2",children:[(0,i.jsx)(R.Z,{className:"h-4 w-4"}),"Party Size"]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(c.z,{type:"button",variant:"outline",size:"sm",onClick:()=>f("partySize",Math.max(1,d.partySize-1)),className:"h-10 w-10 p-0 touch-target",children:"-"}),(0,i.jsx)(N.I,{id:"partySize",type:"number",min:"1",max:"20",required:!0,value:d.partySize,onChange:e=>f("partySize",parseInt(e.target.value)||1),className:"text-center touch-target flex-1"}),(0,i.jsx)(c.z,{type:"button",variant:"outline",size:"sm",onClick:()=>f("partySize",Math.min(20,d.partySize+1)),className:"h-10 w-10 p-0 touch-target",children:"+"})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)(k._,{htmlFor:"guestName",className:"flex items-center gap-2",children:[(0,i.jsx)(R.Z,{className:"h-4 w-4"}),"Full Name"]}),(0,i.jsx)(N.I,{id:"guestName",type:"text",required:!0,value:d.guestName,onChange:e=>f("guestName",e.target.value),placeholder:"Enter your full name",className:"touch-target"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)(k._,{htmlFor:"guestEmail",className:"flex items-center gap-2",children:[(0,i.jsx)(O.Z,{className:"h-4 w-4"}),"Email"]}),(0,i.jsx)(N.I,{id:"guestEmail",type:"email",required:!0,value:d.guestEmail,onChange:e=>f("guestEmail",e.target.value),placeholder:"Enter your email",className:"touch-target"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)(k._,{htmlFor:"guestPhone",className:"flex items-center gap-2",children:[(0,i.jsx)($.Z,{className:"h-4 w-4"}),"Phone"]}),(0,i.jsx)(N.I,{id:"guestPhone",type:"tel",required:!0,value:d.guestPhone,onChange:e=>f("guestPhone",e.target.value),placeholder:"Enter your phone number",className:"touch-target"})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)(k._,{htmlFor:"specialRequests",className:"flex items-center gap-2",children:[(0,i.jsx)(E.Z,{className:"h-4 w-4"}),"Special Requests (Optional)"]}),(0,i.jsx)("textarea",{id:"specialRequests",value:d.specialRequests,onChange:e=>f("specialRequests",e.target.value),placeholder:"Any special dietary requirements or requests...",className:"w-full min-h-[80px] p-3 border border-input rounded-md text-sm resize-none touch-target",rows:3})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(k._,{htmlFor:"notifications",className:"text-sm font-medium",children:"Enable Notifications"}),(0,i.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Get booking confirmations and reminders"})]}),(0,i.jsx)("input",{id:"notifications",type:"checkbox",checked:d.notifications,onChange:e=>f("notifications",e.target.checked),className:"h-4 w-4 rounded touch-target"})]})]}),(0,i.jsxs)(o.eW,{className:"flex gap-2",children:[(0,i.jsx)(c.z,{type:"button",variant:"outline",onClick:n,className:"flex-1 touch-target",disabled:r,children:"Cancel"}),(0,i.jsx)(c.z,{type:"submit",className:"flex-1 touch-target",disabled:r,children:r?"Booking...":"Confirm Booking"})]})]})]})})}var D=a(7970),F=a(3546),z=a(2898);let I=(0,z.Z)("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),L=(0,z.Z)("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);var q=a(2482);function A(){let e=(0,n.useSearchParams)(),t=(0,n.useRouter)(),{user:a}=(0,D.useAuth)(),{toast:l}=(0,M.pm)(),[m,g]=(0,s.useState)([]),[p,y]=(0,s.useState)(!0),[f,x]=(0,s.useState)(!1),[_,N]=(0,s.useState)(!1),[k,S]=(0,s.useState)("grid"),[C,R]=(0,s.useState)(null),[O,$]=(0,s.useState)(!1),[E,P]=(0,s.useState)({page:1,limit:12,total:0,pages:0}),[z,A]=(0,s.useState)({cuisine:"",priceRange:"",query:""});(0,s.useEffect)(()=>{A({cuisine:e.get("cuisine")||"",priceRange:e.get("priceRange")||"",query:e.get("query")||""}),W(1)},[e]);let Y=[{id:"1",name:"Bella Vista",description:"Italian restaurant serving authentic pasta and wood-fired pizzas",address:"123 Main Street, New York, NY 10001",cuisine:"Italian",priceRange:"$$$",rating:4.5,imageUrl:"/imgs/authentic_italian_pasta_dinner_wine_cozy_setting.jpg",isOpen:!0,nextAvailableTime:"7:30 PM",distance:.8,_count:{reviews:128}},{id:"2",name:"Sakura Sushi",description:"Fresh sushi and sashimi with traditional Japanese ambiance",address:"456 Oak Avenue, New York, NY 10002",cuisine:"Japanese",priceRange:"$$$$",rating:4.8,imageUrl:"/imgs/modern_japanese_sushi_restaurant_bar_chefs.jpg",isOpen:!0,nextAvailableTime:"8:00 PM",distance:1.2,_count:{reviews:256}},{id:"3",name:"Spice Route",description:"Authentic Indian cuisine with aromatic spices and traditional flavors",address:"789 Pine Street, New York, NY 10003",cuisine:"Indian",priceRange:"$$",rating:4.3,imageUrl:"/imgs/authentic_indian_chicken_tikka_masala_rice_naan.jpg",isOpen:!0,nextAvailableTime:"7:00 PM",distance:.5,_count:{reviews:89}},{id:"4",name:"Le Petit Bistro",description:"French cuisine in an intimate, elegant setting",address:"321 Elm Street, New York, NY 10004",cuisine:"French",priceRange:"$$$$",rating:4.7,imageUrl:"/imgs/classic_french_bistro_elegant_dining_room.jpg",isOpen:!1,nextAvailableTime:"Closed - Opens Tomorrow 6:00 PM",distance:2.1,_count:{reviews:167}},{id:"5",name:"Golden Dragon",description:"Traditional Chinese cuisine with modern presentation",address:"654 Maple Drive, New York, NY 10005",cuisine:"Chinese",priceRange:"$$",rating:4.2,imageUrl:"/imgs/elegant_asian_fine_dining_restaurant_interior_luxury_decor.jpg",isOpen:!0,nextAvailableTime:"7:45 PM",distance:1.5,_count:{reviews:203}},{id:"6",name:"Sunset Grill",description:"American comfort food with a modern twist",address:"987 Cedar Lane, New York, NY 10006",cuisine:"American",priceRange:"$$$",rating:4.4,imageUrl:"/imgs/american_comfort_food_feast_family_restaurant.jpg",isOpen:!0,nextAvailableTime:"6:45 PM",distance:.9,_count:{reviews:145}},{id:"7",name:"Mediterranean Delights",description:"Fresh Mediterranean dishes with organic ingredients",address:"147 Birch Road, New York, NY 10007",cuisine:"Mediterranean",priceRange:"$$",rating:4.6,imageUrl:"/imgs/elegant_upscale_fine_dining_restaurant_interior.jpg",isOpen:!0,nextAvailableTime:"8:15 PM",distance:1.8,_count:{reviews:98}},{id:"8",name:"Taco Fiesta",description:"Authentic Mexican street food and colorful atmosphere",address:"258 Walnut Street, New York, NY 10008",cuisine:"Mexican",priceRange:"$",rating:4.1,imageUrl:"/imgs/luxury_restaurant_interior_golden_chandelier_elegant_setting.jpg",isOpen:!0,nextAvailableTime:"7:30 PM",distance:1.1,_count:{reviews:178}},{id:"9",name:"Vine & Dine",description:"Wine bar with small plates and extensive wine selection",address:"369 Cherry Street, New York, NY 10009",cuisine:"Wine Bar",priceRange:"$$$",rating:4.5,imageUrl:"/imgs/elegant_french_bistro_wine_bar.jpg",isOpen:!0,nextAvailableTime:"8:30 PM",distance:.7,_count:{reviews:112}},{id:"10",name:"Farm Table",description:"Farm-to-table dining with seasonal American cuisine",address:"741 Spruce Avenue, New York, NY 10010",cuisine:"American",priceRange:"$$$",rating:4.8,imageUrl:"/imgs/family_friendly_american_comfort_food_spread.jpg",isOpen:!0,nextAvailableTime:"6:00 PM",distance:1.4,_count:{reviews:234}},{id:"11",name:"Pasta & Co",description:"Fresh handmade pasta with authentic Italian recipes",address:"852 Willow Street, New York, NY 10011",cuisine:"Italian",priceRange:"$$",rating:4.4,imageUrl:"/imgs/delicious_authentic_italian_spaghetti_pasta_fork.jpg",isOpen:!0,nextAvailableTime:"7:15 PM",distance:1.6,_count:{reviews:156}},{id:"12",name:"Riverside Steakhouse",description:"Premium steaks with river views and sophisticated ambiance",address:"963 Poplar Drive, New York, NY 10012",cuisine:"Steakhouse",priceRange:"$$$$",rating:4.7,imageUrl:"/imgs/delicious_shrimp_pasta_outdoor_dining_italian.jpg",isOpen:!0,nextAvailableTime:"8:00 PM",distance:2.3,_count:{reviews:189}}],W=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E.page;try{var a,i,s;y(!0);let n=(null===(a=e.get("query"))||void 0===a?void 0:a.toLowerCase())||"",r=(null===(i=e.get("cuisine"))||void 0===i?void 0:i.toLowerCase())||"",o=e.get("priceRange")||"",c=(null===(s=e.get("location"))||void 0===s?void 0:s.toLowerCase())||"",l=Y.filter(e=>{let t=!n||e.name.toLowerCase().includes(n)||e.description.toLowerCase().includes(n)||e.cuisine.toLowerCase().includes(n),a=!r||e.cuisine.toLowerCase()===r.toLowerCase(),i=!o||e.priceRange===o,s=!c||e.address.toLowerCase().includes(c);return t&&a&&i&&s});l.sort((e,t)=>t.rating-e.rating);let d=l.length,h=E.limit,u=Math.ceil(d/h),m=(t-1)*h,p=l.slice(m,m+h);g(p),P({page:t,limit:h,total:d,pages:u,hasNext:t<u,hasPrev:t>1})}catch(e){console.error("Error fetching restaurants:",e),l({title:"Error",description:"Failed to load restaurants. Please try again.",variant:"destructive"})}finally{y(!1)}},V=async()=>{x(!0);try{await W(1),l({title:"Updated",description:"Restaurant list refreshed"})}finally{x(!1)}},Z=e=>{W(e),window.scrollTo({top:0,behavior:"smooth"})},H=()=>{t.push("/restaurants")},U=e=>{R(e),$(!0)},B=async e=>{console.log("Booking data:",e,"for restaurant:",null==C?void 0:C.name);try{let a=JSON.parse(localStorage.getItem("demo-bookings")||"[]"),i={id:Date.now().toString(),...e,restaurantId:null==C?void 0:C.id,restaurantName:null==C?void 0:C.name,status:"confirmed",createdAt:new Date().toISOString()};a.push(i),localStorage.setItem("demo-bookings",JSON.stringify(a)),$(!1),R(null),l({title:"Booking Confirmed!",description:"Your table has been booked at ".concat(null==C?void 0:C.name)}),t.push("/bookings")}catch(e){l({title:"Error",description:"Failed to create booking. Please try again.",variant:"destructive"})}},Q=e=>{t.push("/restaurants/".concat(e,"/menu"))},J=async e=>{let t=m.find(t=>t.id===e);if(t){if(navigator.share)try{await navigator.share({title:t.name,text:"Check out ".concat(t.name," - ").concat(t.cuisine),url:"".concat(window.location.origin,"/restaurants/").concat(e)})}catch(e){}else await navigator.clipboard.writeText("".concat(window.location.origin,"/restaurants/").concat(e)),l({title:"Link Copied",description:"Restaurant link has been copied to clipboard"})}},G=""!==e.toString(),K=window.innerWidth<768;return(0,i.jsxs)(v,{onRefresh:V,className:"space-y-8",children:[(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold tracking-tight mb-4",children:"Discover Restaurants"}),(0,i.jsx)("p",{className:"text-lg text-muted-foreground",children:"Find the perfect dining experience for any occasion"})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)(u.E,{}),K&&(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)(c.z,{variant:"outline",size:"sm",onClick:()=>N(!0),className:"flex-1 touch-target",children:[(0,i.jsx)(F.Z,{className:"h-4 w-4 mr-2"}),"Scan QR"]}),(0,i.jsxs)(c.z,{variant:"outline",size:"sm",onClick:()=>t.push("/nearby"),className:"flex-1 touch-target",children:[(0,i.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Nearby"]})]}),!K&&(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("p",{className:"text-sm text-muted-foreground",children:p?"Loading restaurants...":"Showing ".concat(m.length," of ").concat(E.total," restaurants")}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(c.z,{variant:"grid"===k?"default":"outline",size:"sm",onClick:()=>S("grid"),children:(0,i.jsx)(I,{className:"h-4 w-4"})}),(0,i.jsx)(c.z,{variant:"list"===k?"default":"outline",size:"sm",onClick:()=>S("list"),children:(0,i.jsx)(L,{className:"h-4 w-4"})})]})]})]}),G&&(0,i.jsx)(o.Zb,{children:(0,i.jsx)(o.aY,{className:"p-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)(q.Z,{className:"h-4 w-4"}),(0,i.jsx)("span",{className:"text-sm font-medium",children:"Active filters:"}),e.get("query")&&(0,i.jsxs)(j.C,{variant:"secondary",children:["Query: ",e.get("query")]}),e.get("cuisine")&&(0,i.jsxs)(j.C,{variant:"secondary",children:["Cuisine: ",e.get("cuisine")]}),e.get("priceRange")&&(0,i.jsxs)(j.C,{variant:"secondary",children:["Price: ",e.get("priceRange")]}),e.get("location")&&(0,i.jsxs)(j.C,{variant:"secondary",children:["Location: ",e.get("location")]})]}),(0,i.jsx)(c.z,{variant:"outline",size:"sm",onClick:H,children:"Clear all"})]})})}),p?(0,i.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((e,t)=>(0,i.jsxs)("div",{className:"animate-pulse",children:[(0,i.jsx)("div",{className:"bg-muted h-48 rounded-lg mb-4"}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("div",{className:"bg-muted h-4 rounded w-3/4"}),(0,i.jsx)("div",{className:"bg-muted h-3 rounded w-1/2"})]})]},t))}):m.length>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:K?"space-y-4":"grid ".concat("grid"===k?"md:grid-cols-2 lg:grid-cols-3":"grid-cols-1"," gap-6"),children:m.map(e=>{var a;return K?(0,i.jsx)(h,{restaurant:{...e,location:e.address,image:e.imageUrl,isOpen:null===(a=e.isOpen)||void 0===a||a},onBook:t=>U(e),onViewMenu:Q,onShare:J,onScanQR:e=>{t.push("/restaurants/".concat(e,"/menu"))}},e.id):(0,i.jsx)(r.P,{restaurant:e,viewMode:k},e.id)})}),E.pages>1&&(0,i.jsxs)("div",{className:"flex justify-center items-center space-x-2 mt-8",children:[(0,i.jsx)(c.z,{variant:"outline",onClick:()=>Z(E.page-1),disabled:1===E.page,children:"Previous"}),(0,i.jsxs)("div",{className:"flex items-center space-x-1",children:[Array.from({length:Math.min(5,E.pages)},(e,t)=>{let a=t+1;return(0,i.jsx)(c.z,{variant:E.page===a?"default":"outline",size:"sm",onClick:()=>Z(a),children:a},a)}),E.pages>5&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"px-2",children:"..."}),(0,i.jsx)(c.z,{variant:E.page===E.pages?"default":"outline",size:"sm",onClick:()=>Z(E.pages),children:E.pages})]})]}),(0,i.jsx)(c.z,{variant:"outline",onClick:()=>Z(E.page+1),disabled:E.page===E.pages,children:"Next"})]})]}):(0,i.jsxs)("div",{className:"text-center py-12",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No restaurants found"}),(0,i.jsx)("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search criteria or browse all restaurants"}),G&&(0,i.jsx)(c.z,{onClick:H,children:"View all restaurants"})]})]}),(0,i.jsx)(b,{isOpen:_,onClose:()=>N(!1),onScan:e=>{try{let a=JSON.parse(e);a.restaurantId&&t.push("/restaurants/".concat(a.restaurantId))}catch(t){e.startsWith("http")?window.open(e,"_blank"):l({title:"QR Code Scanned",description:"Scanned: ".concat(e)})}},title:"Scan Restaurant QR Code"}),(0,i.jsx)(w.Vq,{open:O,onOpenChange:$,children:(0,i.jsx)(w.cZ,{className:"sm:max-w-md max-h-[90vh] overflow-y-auto",children:C&&(0,i.jsx)(T,{restaurantName:C.name,onSubmit:B,onCancel:()=>$(!1)})})})]})}},1465:function(e,t,a){"use strict";a.d(t,{_:function(){return l}});var i=a(7437),s=a(2265),n=a(6743),r=a(6061),o=a(1628);let c=(0,r.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)(n.f,{ref:t,className:(0,o.cn)(c(),a),...s})});l.displayName=n.f.displayName},1396:function(e,t,a){e.exports=a(8326)}},function(e){e.O(0,[6723,8326,7998,9401,6691,1194,8299,764,2971,2472,1744],function(){return e(e.s=5094)}),_N_E=e.O()}]);