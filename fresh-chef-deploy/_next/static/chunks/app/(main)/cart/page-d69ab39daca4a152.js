(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6811],{3067:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(2898);let a=(0,s.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9883:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(2898);let a=(0,s.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6328:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(2898);let a=(0,s.Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},5367:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(2898);let a=(0,s.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2549:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(2898);let a=(0,s.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},4514:function(e,t,r){Promise.resolve().then(r.bind(r,8220))},8220:function(e,t,r){"use strict";r.r(t),r.d(t,{CartClient:function(){return v}});var s=r(7437),a=r(4033),n=r(6691),i=r.n(n),l=r(3067),c=r(6328),o=r(5367),d=r(2549),u=r(2898);let m=(0,u.Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var f=r(9883),x=r(3611),h=r(9598),p=r(5217),y=r(434),g=r(7970);function v(){let e=(0,a.useRouter)(),{items:t,removeItem:r,updateQuantity:n,clearCart:u,getSubtotal:v,getTax:N,getTotal:b}=(0,y.useCart)(),{user:j}=(0,g.useAuth)(),w=v(),k=N(),S=b();if(0===t.length)return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,s.jsx)("div",{className:"flex items-center mb-6",children:(0,s.jsxs)(x.z,{variant:"ghost",size:"sm",onClick:()=>e.back(),className:"text-gray-600 hover:text-gray-900",children:[(0,s.jsx)(l.Z,{className:"h-4 w-4 mr-2"}),"Back"]})}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[(0,s.jsx)("div",{className:"flex justify-center mb-6",children:(0,s.jsx)("div",{className:"bg-gray-100 rounded-full p-6",children:(0,s.jsx)(c.Z,{className:"h-16 w-16 text-gray-400"})})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Your cart is empty"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"Add items from restaurant menus to get started"}),(0,s.jsx)(x.z,{onClick:()=>e.push("/restaurants"),children:"Browse Restaurants"})]})]})});let C=t.reduce((e,t)=>(e[t.restaurantId]||(e[t.restaurantId]={restaurantName:t.restaurantName,items:[]}),e[t.restaurantId].items.push(t),e),{});return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)(x.z,{variant:"ghost",size:"sm",onClick:()=>e.back(),className:"text-gray-600 hover:text-gray-900",children:[(0,s.jsx)(l.Z,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Shopping Cart"})]}),t.length>0&&(0,s.jsxs)(x.z,{variant:"outline",size:"sm",onClick:u,className:"text-red-600 hover:text-red-700",children:[(0,s.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Clear Cart"]})]}),(0,s.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,s.jsx)("div",{className:"lg:col-span-2 space-y-6",children:Object.entries(C).map(e=>{let[t,{restaurantName:a,items:l}]=e;return(0,s.jsx)(h.Zb,{children:(0,s.jsxs)(h.aY,{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:a}),(0,s.jsx)("div",{className:"space-y-4",children:l.map(e=>(0,s.jsxs)("div",{className:"flex gap-4 pb-4 border-b last:border-b-0 last:pb-0",children:[(0,s.jsx)("div",{className:"relative w-24 h-24 flex-shrink-0 bg-gray-200 rounded-lg overflow-hidden",children:(0,s.jsx)(i(),{src:e.image,alt:e.name,fill:!0,unoptimized:!0,className:"object-cover"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-gray-600 capitalize mb-2",children:e.category}),(0,s.jsxs)("p",{className:"text-lg font-bold text-orange-600",children:["$",e.price.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex flex-col items-end justify-between",children:[(0,s.jsx)(x.z,{variant:"ghost",size:"sm",onClick:()=>r(e.id),className:"text-red-600 hover:text-red-700 p-1 h-8 w-8",children:(0,s.jsx)(d.Z,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(x.z,{variant:"outline",size:"sm",onClick:()=>n(e.id,e.quantity-1),disabled:e.quantity<=1,className:"h-8 w-8 p-0",children:(0,s.jsx)(m,{className:"h-3 w-3"})}),(0,s.jsx)("span",{className:"text-sm font-medium w-8 text-center",children:e.quantity}),(0,s.jsx)(x.z,{variant:"outline",size:"sm",onClick:()=>n(e.id,e.quantity+1),className:"h-8 w-8 p-0",children:(0,s.jsx)(f.Z,{className:"h-3 w-3"})})]}),(0,s.jsxs)("p",{className:"text-sm font-semibold text-gray-900",children:["$",(e.price*e.quantity).toFixed(2)]})]})]},e.id))})]})},t)})}),(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsx)(h.Zb,{className:"sticky top-4",children:(0,s.jsxs)(h.aY,{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Order Summary"}),(0,s.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Subtotal"}),(0,s.jsxs)("span",{className:"font-medium text-gray-900",children:["$",w.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Tax (8%)"}),(0,s.jsxs)("span",{className:"font-medium text-gray-900",children:["$",k.toFixed(2)]})]}),(0,s.jsx)(p.Z,{}),(0,s.jsxs)("div",{className:"flex justify-between text-lg",children:[(0,s.jsx)("span",{className:"font-semibold text-gray-900",children:"Total"}),(0,s.jsxs)("span",{className:"font-bold text-orange-600",children:["$",S.toFixed(2)]})]})]}),(0,s.jsx)(x.z,{onClick:()=>{if(!j){e.push("/login?redirect=/cart");return}alert("Checkout functionality would be implemented here")},className:"w-full mb-3",size:"lg",children:"Proceed to Checkout"}),(0,s.jsx)(x.z,{variant:"outline",onClick:()=>e.push("/restaurants"),className:"w-full",children:"Continue Shopping"}),(0,s.jsxs)("div",{className:"mt-6 pt-6 border-t",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[(0,s.jsx)("span",{children:"Total Items"}),(0,s.jsx)("span",{className:"font-medium",children:t.reduce((e,t)=>e+t.quantity,0)})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-600 mt-2",children:[(0,s.jsx)("span",{children:"Restaurants"}),(0,s.jsx)("span",{className:"font-medium",children:Object.keys(C).length})]})]}),(0,s.jsx)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:(0,s.jsxs)("p",{className:"text-sm text-blue-900",children:[(0,s.jsx)("strong",{children:"Note:"})," Orders from multiple restaurants will be processed separately."]})})]})})})]})]})})}},7970:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return i},useAuth:function(){return l}});var s=r(7437),a=r(2265);let n=(0,a.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,a.useState)(null),[l,c]=(0,a.useState)(!0),[o,d]=(0,a.useState)(!1);(0,a.useEffect)(()=>{d(!0)},[]),(0,a.useEffect)(()=>{o&&u()},[o]);let u=async()=>{try{{let e=localStorage.getItem("demo_user");if(e)try{i(JSON.parse(e)),c(!1);return}catch(e){console.error("[Auth] Failed to parse stored user:",e),localStorage.removeItem("demo_user")}}}catch(e){console.debug("[Auth] Auth check skipped:",e)}finally{c(!1)}},m=async(e,t)=>{try{if(c(!0),console.log("[Auth] Login attempt for:",e),"demo@restaurantbook.com"===e&&"password123"===t){let e={id:"demo-user-123",email:"demo@restaurantbook.com",firstName:"Demo",lastName:"User",role:"customer",avatar:"",emailVerified:!0,twoFactorEnabled:!1};return console.log("[Auth] Demo login successful"),localStorage.setItem("demo_user",JSON.stringify(e)),i(e),!0}if("admin@restaurantbook.com"===e&&"admin123"===t){let e={id:"admin-user-123",email:"admin@restaurantbook.com",firstName:"Admin",lastName:"User",role:"admin",avatar:"",emailVerified:!0,twoFactorEnabled:!1};return console.log("[Auth] Admin login successful"),localStorage.setItem("demo_user",JSON.stringify(e)),i(e),!0}return console.log("[Auth] Login failed - invalid credentials"),!1}catch(e){return console.error("[Auth] Login error:",e),!1}finally{c(!1)}},f=async e=>{try{c(!0);let t={id:"user-".concat(Date.now()),email:e.email,firstName:e.firstName,lastName:e.lastName,role:e.role||"customer",avatar:"",emailVerified:!1,twoFactorEnabled:!1};return localStorage.setItem("demo_user",JSON.stringify(t)),i(t),!0}catch(e){return console.error("[Auth] Registration error:",e),!1}finally{c(!1)}},x=async()=>{try{localStorage.removeItem("demo_user")}catch(e){console.debug("[Auth] Logout error:",e)}i(null)};return(0,s.jsx)(n.Provider,{value:{user:r,login:m,register:f,logout:x,loading:l},children:t})}function l(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3611:function(e,t,r){"use strict";r.d(t,{z:function(){return o}});var s=r(7437),a=r(2265),n=r(7256),i=r(6061),l=r(1628);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:o=!1,...d}=e,u=o?n.g7:"button";return(0,s.jsx)(u,{className:(0,l.cn)(c({variant:a,size:i,className:r})),ref:t,...d})});o.displayName="Button"},9598:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return o},Zb:function(){return i},aY:function(){return d},eW:function(){return u},ll:function(){return c}});var s=r(7437),a=r(2265),n=r(1628);let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});i.displayName="Card";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});l.displayName="CardHeader";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});c.displayName="CardTitle";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});o.displayName="CardDescription";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...a})});d.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})});u.displayName="CardFooter"},5217:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var s=r(7437),a=r(2265),n=r(1628);let i=a.forwardRef((e,t)=>{let{className:r,orientation:a="horizontal",...i}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",r),...i})});i.displayName="Separator"},798:function(e,t,r){"use strict";r.d(t,{pm:function(){return m}});var s=r(2265);let a=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],o={toasts:[]};function d(e){o=l(o,e),c.forEach(e=>{e(o)})}function u(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,t]=s.useState(o);return s.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},9668:function(e,t,r){"use strict";function s(e){let{src:t,width:r,quality:s}=e;return t}r.r(t),r.d(t,{default:function(){return s}})},434:function(e,t,r){"use strict";r.r(t),r.d(t,{CartProvider:function(){return l},useCart:function(){return c}});var s=r(7437),a=r(2265),n=r(798);let i=(0,a.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,a.useState)([]),[c,o]=(0,a.useState)(!1),{toast:d}=(0,n.pm)();(0,a.useEffect)(()=>{o(!0);{let e=localStorage.getItem("restaurant-cart");if(e)try{let t=JSON.parse(e);l(t)}catch(e){console.error("Error loading cart:",e)}}},[]),(0,a.useEffect)(()=>{c&&localStorage.setItem("restaurant-cart",JSON.stringify(r))},[r,c]);let u=e=>{let t=r.find(t=>t.id===e);t&&d({title:"Removed from Cart",description:"".concat(t.name," has been removed from your cart")}),l(t=>t.filter(t=>t.id!==e))},m=()=>r.reduce((e,t)=>e+t.price*t.quantity,0),f=()=>.08*m();return(0,s.jsx)(i.Provider,{value:{items:r,addItem:e=>{l(t=>{let r=t.find(t=>t.id===e.id);return r?(d({title:"Cart Updated",description:"".concat(e.name," quantity increased")}),t.map(t=>t.id===e.id?{...t,quantity:t.quantity+1}:t)):(d({title:"Added to Cart",description:"".concat(e.name," has been added to your cart")}),[...t,{...e,quantity:1}])})},removeItem:u,updateQuantity:(e,t)=>{if(t<=0){u(e);return}l(r=>r.map(r=>r.id===e?{...r,quantity:t}:r))},clearCart:()=>{l([]),d({title:"Cart Cleared",description:"All items have been removed from your cart"})},getItemCount:()=>r.reduce((e,t)=>e+t.quantity,0),getSubtotal:m,getTax:f,getTotal:()=>m()+f()},children:t})}function c(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},1628:function(e,t,r){"use strict";r.d(t,{cn:function(){return n},xG:function(){return i}});var s=r(7042),a=r(4769);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,s.W)(t))}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}},6304:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return n}});let s=r(1024),a=s._(r(2265)),n=a.default.createContext(null)},4033:function(e,t,r){e.exports=r(94)}},function(e){e.O(0,[6723,6691,2971,2472,1744],function(){return e(e.s=4514)}),_N_E=e.O()}]);